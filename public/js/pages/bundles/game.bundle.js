(()=>{"use strict";var e,t;!function(e){e[e.inProgress=0]="inProgress",e[e.gameFinished=1]="gameFinished"}(e||(e={}));class n{constructor(e,t){this.name=e,this.color=t,this.score=0,this.capturedPieces=0,this.numOfPieces=12,this.numOfKings=0,this.capturesAvailable=!1}updateCapturedPieces(e){this.capturedPieces+=e}updateScore(e){this.score+=e}deepCopyPlayer(){let e=new n(this.name,this.color);return e.numOfPieces=this.numOfPieces,e.numOfKings=this.numOfKings,e}}!function(e){e.Black="black",e.Red="red"}(t||(t={}));class i{constructor(e,t=!1,n=!1){this.color=e,this.isKing=t,this.captureStatus=!1}makeKing(){this.isKing=!0}captureCheck(){this.captureStatus=!0}deepCopyPiece(){return new i(this.color,this.isKing)}}class s{constructor(e,t,n,i){this.startRow=e,this.startCol=t,this.endRow=n,this.endCol=i}equals(e){return this.startRow===e.startRow&&this.startCol===e.startCol&&this.endRow===e.endRow&&this.endCol===e.endCol}}class o{constructor(){this.board=[],this.initializeBoard()}initializeBoard(){for(let e=0;e<8;e++){this.board[e]=[];for(let n=0;n<8;n++)this.board[e][n]=e<3&&(e+n)%2==1?new i(t.Black):e>4&&(e+n)%2==1?new i(t.Red):null}}getPiece(e,t){return this.board[e][t]}}class r{constructor(t,n,i){this.board=(new o).board,this.players=[t,n],this.currentState=e.inProgress,this.currentPlayer=t,this.winner=null,this.numOfTurns=0,this.playerOneMoves=[],this.playerTwoMoves=[],this.forcedJumps=i,this.chainingRow=null,this.chainingCol=null}changeTurn(){this.currentPlayer=this.currentPlayer===this.players[0]?this.players[1]:this.players[0],this.numOfTurns++,this.forcedJumps&&(this.capturesPossible()?this.currentPlayer.capturesAvailable=!0:this.currentPlayer.capturesAvailable=!1)}getPiece(e,t){return this.board[e][t]}validateMove(e,n,i,s){if(i<0||i>=8||s<0||s>=8)return!1;const o=this.getPiece(i,s),r=this.getPiece(e,n);if((null==r?void 0:r.color)===t.Black&&!1===r.isKing)return this.validateBlack(e,n,i,s,o);if((null==r?void 0:r.color)===t.Red&&!1===r.isKing)return this.validateRed(e,n,i,s,o);if(!0===(null==r?void 0:r.isKing)){if(1===Math.abs(e-i)&&1===Math.abs(n-s))return null===o;if(2==Math.abs(e-i)&&2==Math.abs(n-s))return this.canCapture(e,n,i,s)}return!1}validateBlack(e,t,n,i,s){return n-e==1&&1===Math.abs(t-i)?null===s:n-e==2&&2===Math.abs(t-i)&&this.canCapture(e,t,n,i)}validateRed(e,t,n,i,s){return n-e==-1&&1===Math.abs(t-i)?null===s:n-e==-2&&2===Math.abs(t-i)&&this.canCapture(e,t,n,i)}possibleMoves(e,n){const i=this.getPiece(e,n),o=[];if(null!==i){const r=i.color===t.Black?1:-1,l=e,a=n;if(!1===i.isKing){const e=[{endRow:l+r,endCol:a-1},{endRow:l+r,endCol:a+1},{endRow:l+2*r,endCol:a-2},{endRow:l+2*r,endCol:a+2}];for(const t of e)this.validateMove(l,a,t.endRow,t.endCol)&&o.push(new s(l,a,t.endRow,t.endCol))}else{const t=e,i=n,r=[{endRow:t+1,endCol:i-1},{endRow:t+1,endCol:i+1},{endRow:t-1,endCol:i-1},{endRow:t-1,endCol:i+1},{endRow:t+2,endCol:i-2},{endRow:t+2,endCol:i+2},{endRow:t-2,endCol:i-2},{endRow:t-2,endCol:i+2}];for(const e of r)this.validateMove(t,i,e.endRow,e.endCol)&&o.push(new s(t,i,e.endRow,e.endCol))}}return null!==this.chainingRow&&null!==this.chainingCol?e!==this.chainingRow||n!==this.chainingCol?[]:o.filter((e=>2===Math.abs(e.startRow-e.endRow))):this.forcedJumps&&this.currentPlayer.capturesAvailable?o.filter((e=>this.canCapture(e.startRow,e.startCol,e.endRow,e.endCol))):o}canCapture(e,t,n,i){if(2==Math.abs(e-n)&&2==Math.abs(t-i)){const s=(e+n)/2,o=(t+i)/2,r=this.getPiece(s,o),l=this.getPiece(e,t);if(null!==l&&null!==r&&r.color!==l.color&&null===this.getPiece(n,i))return!0}return!1}movePiece(e,t,n,i){const o=this.getPiece(e,t);let r=!1;if(o&&o.color===this.currentPlayer.color&&this.validateMove(e,t,n,i)){if(null!==o){const s=Math.floor((e+n)/2),o=Math.floor((t+i)/2),l=this.getPiece(s,o);this.canCapture(e,t,n,i)?(this.handlePieceCapture(l),!0===(null==l?void 0:l.isKing)&&(this.currentPlayer===this.players[0]?this.players[1].numOfKings-=1:this.players[0].numOfKings-=1),this.board[s][o]=null,r=!0,this.chainingRow=n,this.chainingCol=i):r=!1}this.board[e][t]=null,this.board[n][i]=o,this.currentPlayer===this.players[0]?this.playerOneMoves.push(new s(e,t,n,i)):this.playerTwoMoves.push(new s(e,t,n,i)),!1===o.isKing&&!0===this.promoteToKing(n,i)&&(o.makeKing(),this.currentPlayer.numOfKings+=1),this.capturesPossible();const l=this.chainCaptures(n,i);if(l&&!0===r){if(l.length>0)return console.log(l),this.chainingRow=n,void(this.chainingCol=i);this.chainingRow=null,this.chainingCol=null,this.changeTurn()}else this.chainingRow=null,this.chainingCol=null,this.changeTurn()}console.log(this.numOfTurns),console.log(`Number of Black Pieces: ${this.players[1].numOfPieces}, Kings: ${this.players[1].numOfKings}`),console.log(`Number of Red Pieces: ${this.players[0].numOfPieces}, Kings: ${this.players[0].numOfKings}`)}handlePieceCapture(e){!0===(null==e?void 0:e.isKing)?(this.currentPlayer.updateScore(2),this.currentPlayer.updateCapturedPieces(1)):(this.currentPlayer.updateScore(1),this.currentPlayer.updateCapturedPieces(1)),this.currentPlayer===this.players[0]?this.players[1].numOfPieces-=1:this.players[0].numOfPieces-=1}promoteToKing(e,n){const i=this.getPiece(e,n);return(null==i?void 0:i.color)==t.Red&&0==e||(null==i?void 0:i.color)==t.Black&&7==e}chainCaptures(e,t){return this.possibleMoves(e,t).filter((e=>2===Math.abs(e.startRow-e.endRow))).map((e=>({endRow:e.endRow,endCol:e.endCol})))}capturesPossible(){let e=!1;for(let t=0;t<8;t++)for(let n=0;n<8;n++){const i=this.getPiece(t,n);i&&i.color===this.currentPlayer.color&&this.possibleMoves(t,n).some((e=>2===Math.abs(e.startRow-e.endRow)))&&(i.captureCheck(),e=!0)}return e}isVulnerable(e,n){const i=this.getPiece(e,n);if(!i)return!1;const s=i.color===t.Black?[[1,-1],[1,1]]:[[-1,-1],[-1,1]];for(let[t,o]of s){const s=e+t,r=n+o,l=s+t,a=r+o;if(this.isValidPosition(s,r)&&this.isValidPosition(l,a)){const e=this.getPiece(s,r),t=this.getPiece(l,a);if(e&&e.color!==i.color&&!t)return!0}}return!1}isValidPosition(e,t){return e>=0&&e<8&&t>=0&&t<8}noPiecesLeft(e){return 0===e.numOfPieces}noValidMoves(){let e=0;for(let t=0;t<8;t++)for(let n=0;n<8;n++){const i=this.getPiece(t,n);i&&i.color===this.currentPlayer.color&&this.possibleMoves(t,n).length>0&&e++}return 0===e}checkEndOfGame(){this.noPiecesLeft(this.players[0])&&this.players[1].numOfPieces>=1?(this.currentState=e.gameFinished,this.winner=this.players[1]):this.noPiecesLeft(this.players[1])&&this.players[0].numOfPieces>=1?(this.currentState=e.gameFinished,this.winner=this.players[0]):this.noValidMoves()?(this.currentState=e.gameFinished,this.players[0].score>this.players[1].score?this.winner=this.players[0]:this.players[0].score<this.players[1].score?this.winner=this.players[1]:this.winner=null):this.currentState=e.inProgress}setAI(e){this.players[1]=e}simulateMove(e,t,n,i){const s=this.getPiece(e,t);let o=[],r=!1,l=e,a=t,c=n,h=i;if(s&&this.validateMove(e,t,n,i)){let e=!0;for(;e;)if(this.canCapture(l,a,c,h)){const t=Math.floor((l+c)/2),n=Math.floor((a+h)/2),i=this.getPiece(t,n);if(i){o.push({piece:i,row:t,col:n}),this.board[t][n]=null,this.board[l][a]=null,this.board[c][h]=s,!1===s.isKing&&!0===this.promoteToKing(c,h)&&(s.makeKing(),r=!0),l=c,a=h;const u=this.chainCaptures(c,h);e=u.length>0,e&&(c=u[0].endRow,h=u[0].endCol)}}else this.board[l][a]=null,this.board[c][h]=s,l=c,a=h,!1===s.isKing&&!0===this.promoteToKing(c,h)&&(s.makeKing(),r=!0),e=!1}return[o,r,l,a]}moveAI(e,t,n,i){const s=this.getPiece(e,t);let o=!1;if(s&&s.color===this.currentPlayer.color&&this.validateMove(e,t,n,i)){if(null!==s){const s=Math.floor((e+n)/2),r=Math.floor((t+i)/2);this.canCapture(e,t,n,i)?(this.currentPlayer===this.players[0]?this.players[1].numOfPieces-=1:this.players[0].numOfPieces-=1,this.board[s][r]=null,o=!0):o=!1}this.board[e][t]=null,this.board[n][i]=s,!0===this.promoteToKing(n,i)&&s.makeKing();const r=this.chainCaptures(n,i);if(r&&!0===o){if(r.length>0)return;this.changeTurn()}else this.changeTurn()}}undoSimulation(e,t,n,i,s,o){const r=this.getPiece(n,i);this.board[n][i]=null,this.board[e][t]=r,s.forEach((e=>{this.board[e.row][e.col]=e.piece})),o&&r&&(r.isKing=!1)}deepCopyGame(){const e=new r(this.players[0].deepCopyPlayer(),this.players[1].deepCopyPlayer(),this.forcedJumps);return e.board=this.board.map((e=>e.map((e=>e?e.deepCopyPiece():null)))),e.currentPlayer=this.currentPlayer,e.currentState=this.currentState,e.winner=this.winner?this.winner.deepCopyPlayer():null,e}}class l extends n{constructor(e,t,n,i){super(e,t),this.game=n,this.depth=i,this.openings=this.openingSet(),this.currentOpening=null}heuristic(e){let n=0,i=0,s=0;n+=15*e.players[1].numOfPieces-15*e.players[0].numOfPieces,n-=this.countOpponentCapturesPossible(t.Red,e);for(let o=0;o<8;o++)for(let r=0;r<8;r++){let l=e.getPiece(o,r);if(l){if(l.color===t.Black&&!0===l.isKing?i++:l.color===t.Red&&!0===l.isKing&&s++,r>=2&&r<=5&&o>=3&&o<=4&&(n+=l.color===t.Black?2.5:-2.5),o>=3&&o<=4&&r<2&&r>5&&(n+=l.color===t.Black?.5:-.5),e.numOfTurns<10&&(l.color===t.Black&&0===o?1!==r&&5!==r||(n+=10):l.color===t.Red&&7===o&&(2!==r&&6!==r||(n-=10))),o>=1&&o<=6&&r>=1&&r<=6){let i=l.color===t.Black?o-1:o+1,s=e.getPiece(i,r-1),a=e.getPiece(i,r+1);s&&s.color===l.color&&(n+=l.color===t.Black?6:-6),a&&a.color===l.color&&(n+=l.color===t.Black?6:-6)}e.numOfTurns<15&&l.color===t.Black&&(0===o&&(1!==r&&3!==r&&5!=r||(n+=5)),1===o&&(2!==r&&4!==r||(n+=5)),2===o&&3===r&&(n+=5)),e.isVulnerable(o,r)||(n+=l.color===t.Black?-6:6)}}return n+=20*i-20*s,n}countOpponentCapturesPossible(e,t){let n=0;for(let i=0;i<8;i++)for(let s=0;s<8;s++){const o=t.getPiece(i,s);o&&o.color===e&&(n+=t.possibleMoves(i,s).filter((e=>2===Math.abs(e.startRow-e.endRow))).length)}return n}openingSet(){const e=new Map;return e.set("Old Fourteenth",[new s(5,2,4,3),new s(2,3,3,2),new s(6,1,5,2),new s(2,5,3,6),new s(7,0,6,1)]),e.set("Alma",[new s(5,2,4,3),new s(2,3,3,2),new s(6,1,5,2),new s(2,5,3,6),new s(7,2,6,1)]),e.set("Centre",[new s(5,2,4,3),new s(2,3,3,2),new s(6,1,5,2),new s(2,5,3,6),new s(4,3,3,4)]),e.set("Glasgow",[new s(5,2,4,3),new s(2,3,3,2),new s(6,1,5,2),new s(2,5,3,6),new s(5,2,4,1)]),e.set("Laird and Lady",[new s(5,2,4,3),new s(2,3,3,2),new s(6,1,5,2),new s(2,5,3,6),new s(5,6,4,7),new s(3,6,4,5),new s(5,4,3,6),new s(2,7,4,5)]),e.set("Black Doctor",[new s(5,2,4,3),new s(2,3,3,2),new s(6,1,5,2),new s(2,5,3,6),new s(5,6,4,7),new s(3,6,4,5),new s(5,4,3,6),new s(3,2,5,4),new s(6,3,4,5)]),e.set("Laird and Lady Refused",[new s(5,2,4,3),new s(2,3,3,2),new s(6,1,5,2),new s(2,5,3,6),new s(5,6,4,7),new s(1,6,2,5)]),e.set("Glasgow-Whilter",[new s(5,2,4,3),new s(2,3,3,2),new s(6,1,5,2),new s(2,5,3,6),new s(5,6,4,5),new s(1,6,2,5),new s(5,2,4,1),new s(1,4,2,3)]),e.set("Nailor",[new s(5,2,4,3),new s(2,3,3,2),new s(6,1,5,2),new s(1,4,2,3)]),e.set("Tillicoultry",[new s(5,2,4,3),new s(2,3,3,2),new s(6,1,5,2),new s(2,5,3,4)]),e.set("Will o' the Wisp",[new s(5,2,4,3),new s(2,3,3,2),new s(5,6,4,7)]),e.set("Defiance",[new s(5,2,4,3),new s(2,3,3,2),new s(5,6,4,5),new s(1,2,2,3)]),e.set("Fife",[new s(5,2,4,3),new s(2,3,3,2),new s(5,6,4,5),new s(2,5,3,6),new s(6,7,5,6)]),e.set("Souter",[new s(5,2,4,3),new s(2,3,3,2),new s(5,6,4,5),new s(2,5,3,6),new s(6,5,5,6)]),e.set("Whilter-I",[new s(5,2,4,3),new s(2,3,3,2),new s(5,6,4,5),new s(2,5,3,6),new s(6,3,5,2)]),e.set("Whilter-II",[new s(5,2,4,3),new s(2,3,3,2),new s(6,3,5,2)]),e.set("Whilter-Exchange",[new s(5,2,4,3),new s(2,3,3,2),new s(6,3,5,2),new s(2,5,3,4)]),e.set("Maid of the Mill",[new s(5,2,4,3),new s(2,3,3,2),new s(6,1,5,2),new s(3,6,4,7),new s(4,3,3,4)]),e.set("Douglas",[new s(5,2,4,3),new s(2,3,3,2),new s(6,1,5,2),new s(3,6,4,7),new s(7,0,6,1),new s(1,6,2,5)]),e.set("Pioneer",[new s(5,2,4,3),new s(2,3,3,2),new s(6,1,5,2),new s(1,6,2,5)]),e.set("White Dyke",[new s(5,2,4,3),new s(2,5,3,6),new s(6,1,5,2),new s(3,6,4,5)]),e.set("Wagram",[new s(5,2,4,3),new s(2,5,3,6),new s(5,6,4,7),new s(2,1,3,0)]),e.set("Boston",[new s(5,2,4,3),new s(2,5,3,6),new s(5,6,4,7),new s(3,6,4,5)]),e.set("Dyke",[new s(5,2,4,3),new s(2,5,3,6),new s(4,3,3,2)]),e.set("Cross",[new s(5,2,4,3),new s(2,3,3,4)]),e.set("Waterloo",[new s(5,2,4,3),new s(2,3,3,4),new s(6,1,5,2),new s(3,4,4,5)]),e.set("Ayrshire Lassie",[new s(5,2,4,3),new s(2,1,3,0),new s(6,1,5,2),new s(1,0,2,1)]),e.set("Switcher",[new s(5,2,4,3),new s(2,7,3,6)]),e.set("Single Corner",[new s(5,2,4,3),new s(2,5,3,4)]),e.set("Second Double Corner",[new s(5,2,4,3),new s(2,1,3,2)]),e.set("Bristol",[new s(5,2,4,1),new s(2,1,3,0),new s(4,1,3,2)]),e.set("Paisley",[new s(5,2,4,1),new s(2,1,3,2)]),e.set("Bristol-Cross",[new s(5,2,4,1),new s(2,3,3,4)]),e}identifyOpening(){let e=!1;if(this.game.numOfTurns<Math.max(...Array.from(this.openings.values()).map((e=>e.length))))for(const[t,n]of this.openings)if(this.game.playerOneMoves.length<=n.length/2&&this.game.playerOneMoves.every(((e,t)=>n[2*t].equals(e)))){this.currentOpening=t,e=!0;break}e||(this.currentOpening=null)}minimax(n,i,s,o,r){if(n.checkEndOfGame(),0==i||n.currentState===e.gameFinished)return[this.heuristic(n),null];let l=r?-1/0:1/0,a=null;if(r){for(let e=0;e<8;e++)for(let r=0;r<8;r++){const c=n.getPiece(e,r);if(c&&c.color===t.Black){const t=n.possibleMoves(e,r);for(const e of t){const t=n.deepCopyGame();t.moveAI(e.startRow,e.startCol,e.endRow,e.endCol);const[r]=this.minimax(t,i-1,s,o,!1);if(o<=(s=Math.max(s,r))){a=e,l=r;break}r>l&&(l=r,a=e)}}}return[l,a]}for(let e=0;e<8;e++)for(let r=0;r<8;r++){const c=n.getPiece(e,r);if(c&&c.color===t.Red){const t=n.possibleMoves(e,r);for(const e of t){const t=n.deepCopyGame();t.moveAI(e.startRow,e.startCol,e.endRow,e.endCol);const[r]=this.minimax(t,i-1,s,o,!0);if((o=Math.min(o,r))<=s){a=e,l=r;break}r<l&&(l=r,a=e)}}}return[l,a]}makeMove(){if(this.game.currentState===e.gameFinished)console.log("Game is finished. AI cannot make a move."),this.game.changeTurn();else if(this.identifyOpening(),this.currentOpening){const e=this.getOpeningMove();e?this.game.movePiece(e.startRow,e.startCol,e.endRow,e.endCol):this.playMinimaxMove()}else 1===this.game.numOfTurns&&null===this.game.getPiece(3,4)?this.game.movePiece(2,5,3,4):3===this.game.numOfTurns&&null===this.game.getPiece(2,5)?this.game.movePiece(1,6,2,5):5===this.game.numOfTurns&&null===this.game.getPiece(1,6)?this.game.movePiece(0,7,1,6):this.playMinimaxMove()}playMinimaxMove(){const[e,t]=this.minimax(this.game,this.depth,-1/0,1/0,!0);t?(this.game.movePiece(null==t?void 0:t.startRow,null==t?void 0:t.startCol,null==t?void 0:t.endRow,null==t?void 0:t.endCol),console.log(`AI moved from: (${null==t?void 0:t.startRow}, ${null==t?void 0:t.startCol}) to (${null==t?void 0:t.endRow}, ${null==t?void 0:t.endCol})`),console.log(`Evaluated Score of move: ${e}`)):(console.log(`${this.game.players[1].name} has no valid moves!`),this.game.changeTurn())}getOpeningMove(){if(this.currentOpening){const e=this.openings.get(this.currentOpening);if(e&&this.game.numOfTurns<e.length)return e[this.game.numOfTurns]}return null}}const a=new Map;let c;const h=document.querySelector(".initial-screen .initial-screen-container .container .name-entry #startGameButton");null==h||h.addEventListener("click",$);const u=document.querySelector(".initial-screen .initial-screen-container .container .name-entry #startAIGameButton");let d;null==u||u.addEventListener("click",L);const w=document.querySelector(".initial-screen .initial-screen-container .container .name-entry #enforcedJumps");null==w||w.addEventListener("change",(e=>{e.target.checked?(d=!0,console.log(`Jumps: ${d}`)):(d=!1,console.log(`Jumps: ${d}`))}));const m=document.getElementById("restartLocalGameButton"),p=document.getElementById("restartAIGameButton"),g=document.querySelector(".end-of-game-section"),y=document.getElementById("winnerAnnouncement"),f=document.getElementById("playerOneFinalName"),C=document.getElementById("playerOneFinalScore"),P=document.getElementById("playerOneFinalCaptured"),v=document.getElementById("playerTwoFinalName"),b=document.getElementById("playerTwoFinalScore"),R=document.getElementById("playerTwoFinalCaptured"),k=document.querySelector(".player-one .container .name"),M=document.querySelector(".player-one .container .score"),O=document.querySelector(".player-one .container .captured"),S=document.querySelector(".player-one .container .turn"),B=document.querySelector(".player-two .container .name"),E=document.querySelector(".player-two .container .score"),x=document.querySelector(".player-two .container .captured"),K=document.querySelector(".player-two .container .turn"),T=document.querySelectorAll(".board-container .container .row");function $(){const e=document.getElementById("playerOneName").value||"Player 1",i=document.getElementById("playerTwoName").value||"Player 2",s=new n(e,t.Red),o=new n(i,t.Black);c=new r(s,o,d),F(),document.querySelector(".initial-screen").style.display="none",document.querySelector(".main").style.display="block",q()}function L(){const e=document.getElementById("playerOneName").value||"Player 1",i="Minimax-A/B",s=new n(e,t.Red),o=new n(i,t.Black);c=new r(s,o,d);const a=new l(i,t.Black,c,5);c.setAI(a),F(),document.querySelector(".initial-screen").style.display="none",document.querySelector(".main").style.display="block",q()}function q(){F(),T.forEach(((e,n)=>{e.querySelectorAll(".col").forEach(((e,i)=>{const s=c.getPiece(n,i);if(s){const o=document.createElement("div");!0===s.isKing?o.classList.add(s.color===t.Black?"black-piece-king":"red-piece-king"):o.classList.add(s.color===t.Black?"black-piece":"red-piece"),e.appendChild(o),o.addEventListener("click",I.bind(null,n,i,o))}}))}))}function A(){document.querySelectorAll(".highlight").forEach((e=>{const t=e;t.classList.remove("highlight");const n=a.get(t);n&&(t.removeEventListener("click",n),a.delete(t))}))}function I(e,t,n){const i=c.getPiece(e,t);if(A(),document.querySelectorAll(".black-piece, .red-piece").forEach((e=>{e.classList.remove("selected")})),document.querySelectorAll(".black-piece-king, .red-piece-king").forEach((e=>{e.classList.remove("selected")})),i&&i.color===c.currentPlayer.color){n.classList.toggle("selected");const i=c.possibleMoves(e,t);i.length>0&&i.forEach((n=>{const i=document.querySelector(`.col[data-row='${n.endRow}'][data-col='${n.endCol}']`);if(i){i.classList.add("highlight");const s=a.get(i);s&&i.removeEventListener("click",s);const o=()=>{!function(e,t,n,i){const s=c.getPiece(e,t);if(s&&s.color===c.currentPlayer.color){if(c.movePiece(e,t,n,i),G(),c.players[1]instanceof l)for(;c.currentPlayer===c.players[1];)c.players[1].makeMove(),G();const o=c.getPiece(n,i);!c.getPiece(e,t)&&o&&console.log(`${s.color} piece has moved from (${e}, ${t}) to (${n}, ${i})`)}}(e,t,n.endRow,n.endCol)};i.addEventListener("click",o),a.set(i,o)}}))}}function F(){k.textContent=`${c.players[0].name}`,M.textContent=`Score: ${c.players[0].score}`,O.textContent=`Captured Pieces: ${c.players[0].capturedPieces}`,B.textContent=`${c.players[1].name}`,E.textContent=`Score: ${c.players[1].score}`,x.textContent=`Captured Pieces: ${c.players[1].capturedPieces}`,c.currentPlayer===c.players[0]?(S.textContent="Turn: Yes",K.textContent="Turn: No"):(S.textContent="Turn: No",K.textContent="Turn: Yes"),c.checkEndOfGame(),c.currentState===e.gameFinished&&(c.winner===c.players[0]?(k.textContent=`${c.players[0].name} has won the game!`,B.textContent=`${c.players[1].name}, you lost, homie!`):c.winner===c.players[1]?(k.textContent=`${c.players[0].name}, you lost, homie!`,B.textContent=`${c.players[1].name} has won the game!`):(k.textContent="Game is a draw!",B.textContent="Game is a draw!"),S.textContent="",K.textContent="",g.style.display="flex",y.textContent=c.winner?`Winner: ${c.winner.name}`:"It's a draw!",f.textContent=c.players[0].name,C.textContent=`Score: ${c.players[0].score}`,P.textContent=`Captured Pieces: ${c.players[0].capturedPieces}`,v.textContent=c.players[1].name,b.textContent=`Score: ${c.players[1].score}`,R.textContent=`Captured Pieces: ${c.players[1].capturedPieces}`)}function G(){A(),T.forEach((e=>{e.querySelectorAll(".col").forEach((e=>{if(e.firstChild){const t=e.firstChild,n=a.get(t);n&&(t.removeEventListener("click",n),a.delete(t)),e.removeChild(e.firstChild)}}))})),q()}m.addEventListener("click",(()=>{g.style.display="none",A(),T.forEach((e=>{e.querySelectorAll(".col").forEach((e=>{if(e.firstChild){const t=e.firstChild,n=a.get(t);n&&(t.removeEventListener("click",n),a.delete(t)),e.removeChild(e.firstChild)}}))})),$()})),p.addEventListener("click",(()=>{g.style.display="none",A(),T.forEach((e=>{e.querySelectorAll(".col").forEach((e=>{if(e.firstChild){const t=e.firstChild,n=a.get(t);n&&(t.removeEventListener("click",n),a.delete(t)),e.removeChild(e.firstChild)}}))})),L()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFNLEVBQUcsRUFBRyxFQUFHLEdBQ25CLElBQUlBLEVBQU0sRUFBRyxFQUFHLEVBQUcsR0FDbkIsSUFBSUEsRUFBTSxFQUFHLEVBQUcsRUFBRyxHQUNuQixJQUFJQSxFQUFNLEVBQUcsRUFBRyxFQUFHLEtBRXJCc0csRUFBU1ksSUFBSSx5QkFBMEIsQ0FDckMsSUFBSWxILEVBQU0sRUFBRyxFQUFHLEVBQUcsR0FDbkIsSUFBSUEsRUFBTSxFQUFHLEVBQUcsRUFBRyxHQUNuQixJQUFJQSxFQUFNLEVBQUcsRUFBRyxFQUFHLEdBQ25CLElBQUlBLEVBQU0sRUFBRyxFQUFHLEVBQUcsR0FDbkIsSUFBSUEsRUFBTSxFQUFHLEVBQUcsRUFBRyxHQUNuQixJQUFJQSxFQUFNLEVBQUcsRUFBRyxFQUFHLEtBRXJCc0csRUFBU1ksSUFBSSxrQkFBbUIsQ0FDOUIsSUFBSWxILEVBQU0sRUFBRyxFQUFHLEVBQUcsR0FDbkIsSUFBSUEsRUFBTSxFQUFHLEVBQUcsRUFBRyxHQUNuQixJQUFJQSxFQUFNLEVBQUcsRUFBRyxFQUFHLEdBQ25CLElBQUlBLEVBQU0sRUFBRyxFQUFHLEVBQUcsR0FDbkIsSUFBSUEsRUFBTSxFQUFHLEVBQUcsRUFBRyxHQUNuQixJQUFJQSxFQUFNLEVBQUcsRUFBRyxFQUFHLEdBQ25CLElBQUlBLEVBQU0sRUFBRyxFQUFHLEVBQUcsR0FDbkIsSUFBSUEsRUFBTSxFQUFHLEVBQUcsRUFBRyxLQUVyQnNHLEVBQVNZLElBQUksU0FBVSxDQUNyQixJQUFJbEgsRUFBTSxFQUFHLEVBQUcsRUFBRyxHQUNuQixJQUFJQSxFQUFNLEVBQUcsRUFBRyxFQUFHLEdBQ25CLElBQUlBLEVBQU0sRUFBRyxFQUFHLEVBQUcsR0FDbkIsSUFBSUEsRUFBTSxFQUFHLEVBQUcsRUFBRyxLQUVyQnNHLEVBQVNZLElBQUksZUFBZ0IsQ0FDM0IsSUFBSWxILEVBQU0sRUFBRyxFQUFHLEVBQUcsR0FDbkIsSUFBSUEsRUFBTSxFQUFHLEVBQUcsRUFBRyxHQUNuQixJQUFJQSxFQUFNLEVBQUcsRUFBRyxFQUFHLEdBQ25CLElB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QUFHLEVBQUcsR0FDbkIsSUFBSUEsRUFBTSxFQUFHLEVBQUcsRUFBRyxLQUVyQnNHLEVBQVNZLElBQUksU0FBVSxDQUNyQixJQUFJbEgsRUFBTSxFQUFHLEVBQUcsRUFBRyxHQUNuQixJQUFJQSxFQUFNLEVBQUcsRUFBRyxFQUFHLEdBQ25CLElBQUlBLEVBQU0sRUFBRyxFQUFHLEVBQUcsR0FDbkIsSUFBSUEsRUFBTSxFQUFHLEVBQUcsRUFBRyxLQUVyQnNHLEVBQVNZLElBQUksU0FBVSxDQUNyQixJQUFJbEgsRUFBTSxFQUFHLEVBQUcsRUFBRyxHQUNuQixJQUFJQSxFQUFNLEVBQUcsRUFBRyxFQUFHLEdBQ25CLElBQUlBLEVBQU0sRUFBRyxFQUFHLEVBQUcsR0FDbkIsSUFBSUEsRUFBTSxFQUFHLEVBQUcsRUFBRyxLQUVyQnNHLEVBQVNZLElBQUksT0FBUSxDQUNuQixJQUFJbEgsRUFBTSxFQUFHLEVBQUcsRUFBRyxHQUNuQixJQUFJQSxFQUFNLEVBQUcsRUFBRyxFQUFHLEdBQ25CLElBQUlBLEVBQU0sRUFBRyxFQUFHLEVBQUcsS0FFckJzRyxFQUFTWSxJQUFJLFFBQVMsQ0FBQyxJQUFJbEgsRUFBTSxFQUFHLEVBQUcsRUFBRyxHQUFJLElBQUlBLEVBQU0sRUFBRyxFQUFHLEVBQUcsS0FDakVzRyxFQUFTWSxJQUFJLFdBQVksQ0FDdkIsSUFBSWxILEVBQU0sRUFBRyxFQUFHLEVBQUcsR0FDbkIsSUFBSUEsRUFBTSxFQUFHLEVBQUcsRUFBRyxHQUNuQixJQUFJQSxFQUFNLEVBQUcsRUFBRyxFQUFHLEdBQ25CLElBQUlBLEVBQU0sRUFBRyxFQUFHLEVBQUcsS0FFckJzRyxFQUFTWSxJQUFJLGtCQUFtQixDQUM5QixJQUFJbEgsRUFBTSxFQUFHLEVBQUcsRUFBRyxHQUNuQixJQUFJQSxFQUFNLEVBQUcsRUFBRyxFQUFHLEdBQ25CLElBQUlBLEVBQU0sRUFBRyxFQUFHLEVBQUcsR0FDbkIsSUFBSUEsRUFBTSxFQUFHLEVBQUcsRUFBRyxLQUVyQnNHLEVBQVNZLElBQUksV0FBWSxDQUFDLElBQUlsSCxFQUFNLEVBQUcsRUFBRyxFQUFHLEdBQUksSUFBSUEsRUFBTSxFQUFHLEVBQUcsRUFBRyxLQUNwRXNHLEVBQVNZLElBQUksZ0JBQWlCLENBQzVCLElBQUlsSCxFQUFNLEVBQUcsRUFBRyxFQUFHLEdBQ25CLElBQUlBLEVBQU0sRUFBRyxFQUFHLEVBQUcsS0FFckJzRyxFQUFTWSxJQUFJLHVCQUF3QixDQUNuQyxJQUFJbEgsRUFBTSxFQUFHLEVBQUcsRUFBRyxHQUNuQixJQUFJQSxFQUFNLEVBQUcsRUFBRyxFQUFHLEtBRXJCc0csRUFBU1ksSUFBSSxVQUFXLENBQ3RCLElBQUlsSCxFQUFNLEVBQUcsRUFBRyxFQUFHLEdBQ25CLElBQUlBLEVBQU0sRUFBRyxFQUFHLEVBQUcsR0FDbkIsSUFBSUEsRUFBTSxFQUFHLEVBQUcsRUFBRyxLQUVyQnNHLEVBQVNZLElBQUksVUFBVyxDQUFDLElBQUlsSCxFQUFNLEVBQUcsRUFBRyxFQUFHLEdBQUksSUFBSUEsRUFBTSxFQUFHLEVBQUcsRUFBRyxLQUNuRXNHLEVBQVNZLElBQUksZ0JBQWlCLENBQzVCLElBQUlsSCxFQUFNLEVBQUcsRUFBRyxFQUFHLEdBQ25CLElBQUlBLEVBQU0sRUFBRyxFQUFHLEVBQUcsS0FHZHNHLENBQ1QsQ0FFTyxlQUFBYSxHQUNMLElBQUlDLEdBQWUsRUFDbkIsR0FDRXJJLEtBQUtvSCxLQUFLM0UsV0FDVlksS0FBS2lGLE9BQU9DLE1BQU1DLEtBQUt4SSxLQUFLdUgsU0FBU2tCLFVBQVUzRCxLQUFLNEQsR0FBTUEsRUFBRS9ELFVBRTVELElBQUssTUFBTzdFLEVBQU0yRCxLQUFVekQsS0FBS3VILFNBQy9CLEdBQUl2SCxLQUFLb0gsS0FBSzFFLGVBQWVpQyxRQUFVbEIsRUFBTWtCLE9BQVMsR0FDOUIzRSxLQUFLb0gsS0FBSzFFLGVBQWVpRyxPQUM3QyxDQUFDL0UsRUFBTWdGLElBQ0VuRixFQUFjLEVBQVJtRixHQUFXdEgsT0FBT3NDLEtBSWhCLENBQ2pCNUQsS0FBS3lILGVBQWlCM0gsRUFDdEJ1SSxHQUFlLEVBQ2YsS0FDRixDQUlEQSxJQUNIckksS0FBS3lILGVBQWlCLEtBRTFCLENBY08sT0FBQW9CLENBQ0x6QixFQUNBQyxFQUNBeUIsRUFDQUMsRUFDQUMsR0FJQSxHQUZBNUIsRUFBS3BCLGlCQUVRLEdBQVRxQixHQUFjRCxFQUFLL0UsZUFBaUIzQyxFQUFNdUcsYUFHNUMsTUFBTyxDQUZLakcsS0FBSzBILFVBQVVOLEdBRVosTUFHakIsSUFBSTZCLEVBQW9CRCxHQUFtQixJQUFZRSxJQUNuREMsRUFBeUIsS0FFN0IsR0FBSUgsRUFBa0IsQ0FDcEIsSUFBSyxJQUFJckgsRUFBTSxFQUFHQSxFQUFNLEVBQUdBLElBQ3pCLElBQUssSUFBSUMsRUFBTSxFQUFHQSxFQUFNLEVBQUdBLElBQU8sQ0FDaEMsTUFBTXNCLEVBQVFrRSxFQUFLckYsU0FBU0osRUFBS0MsR0FDakMsR0FBSXNCLEdBQVNBLEVBQU1uRCxRQUFVSixFQUFXa0MsTUFBTyxDQUM3QyxNQUFNNEIsRUFBUTJELEVBQUs1RCxjQUFjN0IsRUFBS0MsR0FDdEMsSUFBSyxNQUFNZ0MsS0FBUUgsRUFBTyxDQUN4QixNQUFNMkYsRUFBV2hDLEVBQUtILGVBRXRCbUMsRUFBU3hDLE9BQ1BoRCxFQUFLMUMsU0FDTDBDLEVBQUt6QyxTQUNMeUMsRUFBS3hDLE9BQ0x3QyxFQUFLdkMsUUFLUCxNQUFPZ0ksR0FBa0JySixLQUFLNkksUUFDNUJPLEVBQ0EvQixFQUFRLEVBQ1J5QixFQUNBQyxHQUNBLEdBSUYsR0FBSUEsSUFESkQsRUFBUXpGLEtBQUtpRixJQUFJUSxFQUFPTyxJQUNMLENBQ2pCRixFQUFXdkYsRUFDWHFGLEVBQVlJLEVBQ1osS0FDRixDQUVJQSxFQUFpQkosSUFDbkJBLEVBQVlJLEVBQ1pGLEVBQVd2RixFQUVmLENBQ0YsQ0FDRixDQUVGLE1BQU8sQ0FBQ3FGLEVBQVdFLEVBQ3JCLENBQ0UsSUFBSyxJQUFJeEgsRUFBTSxFQUFHQSxFQUFNLEVBQUdBLElBQ3pCLElBQUssSUFBSUMsRUFBTSxFQUFHQSxFQUFNLEVBQUdBLElBQU8sQ0FDaEMsTUFBTXNCLEVBQVFrRSxFQUFLckYsU0FBU0osRUFBS0MsR0FDakMsR0FBSXNCLEdBQVNBLEVBQU1uRCxRQUFVSixFQUFXbUMsSUFBSyxDQUMzQyxNQUFNMkIsRUFBUTJELEVBQUs1RCxjQUFjN0IsRUFBS0MsR0FDdEMsSUFBSyxNQUFNZ0MsS0FBUUgsRUFBTyxDQUN4QixNQUFNMkYsRUFBV2hDLEVBQUtILGVBRXRCbUMsRUFBU3hDLE9BQ1BoRCxFQUFLMUMsU0FDTDBDLEVBQUt6QyxTQUNMeUMsRUFBS3hDLE9BQ0x3QyxFQUFLdkMsUUFLUCxNQUFPZ0ksR0FBa0JySixLQUFLNkksUUFDNUJPLEVBQ0EvQixFQUFRLEVBQ1J5QixFQUNBQyxHQUNBLEdBS0YsSUFGQUEsRUFBTzFGLEtBQUtpRyxJQUFJUCxFQUFNTSxLQUVWUCxFQUFPLENBQ2pCSyxFQUFXdkYsRUFDWHFGLEVBQVlJLEVBQ1osS0FDRixDQUVJQSxFQUFpQkosSUFDbkJBLEVBQVlJLEVBQ1pGLEVBQVd2RixFQUVmLENBQ0YsQ0FDRixDQUVGLE1BQU8sQ0FBQ3FGLEVBQVdFLEVBRXZCLENBS08sUUFBQUksR0FDTCxHQUFJdkosS0FBS29ILEtBQUsvRSxlQUFpQjNDLEVBQU11RyxhQUNuQ3JCLFFBQVFDLElBQUksNENBQ1o3RSxLQUFLb0gsS0FBS3RFLGtCQUdWLEdBREE5QyxLQUFLb0ksa0JBQ0RwSSxLQUFLeUgsZUFBZ0IsQ0FDdkIsTUFBTTdELEVBQU81RCxLQUFLd0osaUJBQ2Q1RixFQUNGNUQsS0FBS29ILEtBQUtqRCxVQUNSUCxFQUFLMUMsU0FDTDBDLEVBQUt6QyxTQUNMeUMsRUFBS3hDLE9BQ0x3QyxFQUFLdkMsUUFHUHJCLEtBQUt5SixpQkFHVCxNQUMyQixJQUF6QnpKLEtBQUtvSCxLQUFLM0UsWUFDbUIsT0FBN0J6QyxLQUFLb0gsS0FBS3JGLFNBQVMsRUFBRyxHQUV0Qi9CLEtBQUtvSCxLQUFLakQsVUFBVSxFQUFHLEVBQUcsRUFBRyxHQUVKLElBQXpCbkUsS0FBS29ILEtBQUszRSxZQUNtQixPQUE3QnpDLEtBQUtvSCxLQUFLckYsU0FBUyxFQUFHLEdBRXRCL0IsS0FBS29ILEtBQUtqRCxVQUFVLEVBQUcsRUFBRyxFQUFHLEdBRUosSUFBekJuRSxLQUFLb0gsS0FBSzNFLFlBQ21CLE9BQTdCekMsS0FBS29ILEtBQUtyRixTQUFTLEVBQUcsR0FFdEIvQixLQUFLb0gsS0FBS2pELFVBQVUsRUFBRyxFQUFHLEVBQUcsR0FFN0JuRSxLQUFLeUosaUJBR1gsQ0FFTyxlQUFBQSxHQUNMLE1BQU94SixFQUFPMkQsR0FBUTVELEtBQUs2SSxRQUN6QjdJLEtBQUtvSCxLQUNMcEgsS0FBS3FILE9BQ0wsSUFDQTZCLEtBQ0EsR0FFRXRGLEdBQ0Y1RCxLQUFLb0gsS0FBS2pELFVBQ1JQLGFBQUksRUFBSkEsRUFBTTFDLFNBQ04wQyxhQUFJLEVBQUpBLEVBQU16QyxTQUNOeUMsYUFBSSxFQUFKQSxFQUFNeEMsT0FDTndDLGFBQUksRUFBSkEsRUFBTXZDLFFBRVJ1RCxRQUFRQyxJQUNOLG1CQUFtQmpCLGFBQUksRUFBSkEsRUFBTTFDLGFBQWEwQyxhQUFJLEVBQUpBLEVBQU16QyxpQkFBaUJ5QyxhQUFJLEVBQUpBLEVBQU14QyxXQUFXd0MsYUFBSSxFQUFKQSxFQUFNdkMsV0FFdEZ1RCxRQUFRQyxJQUFJLDRCQUE0QjVFLE9BRXhDMkUsUUFBUUMsSUFBSSxHQUFHN0UsS0FBS29ILEtBQUtoRixRQUFRLEdBQUd0Qyw0QkFDcENFLEtBQUtvSCxLQUFLdEUsYUFFZCxDQUVPLGNBQUEwRyxHQUNMLEdBQUl4SixLQUFLeUgsZUFBZ0IsQ0FDdkIsTUFBTWlDLEVBQVcxSixLQUFLdUgsU0FBU29DLElBQUkzSixLQUFLeUgsZ0JBQ3hDLEdBQUlpQyxHQUFZMUosS0FBS29ILEtBQUszRSxXQUFhaUgsRUFBUy9FLE9BQzlDLE9BQU8rRSxFQUFTMUosS0FBS29ILEtBQUszRSxXQUU5QixDQUNBLE9BQU8sSUFDVCxFQzlqQkYsTUFBTW1ILEVBQXNCLElBQUkxQixJQUNoQyxJQUFJZCxFQUlKLE1BQU15QyxFQUFvQkMsU0FBU0MsY0FDakMscUZBRUZGLFNBQUFBLEVBQW1CRyxpQkFBaUIsUUFBU0MsR0FFN0MsTUFBTUMsRUFBaUJKLFNBQVNDLGNBQzlCLHVGQUlGLElBQUlJLEVBRkpELFNBQUFBLEVBQWdCRixpQkFBaUIsUUFBU0ksR0FHMUMsTUFBTUMsRUFBV1AsU0FBU0MsY0FDeEIsbUZBRUZNLFNBQUFBLEVBQVVMLGlCQUFpQixVQUFXTSxJQUNyQkEsRUFBTUMsT0FDVkMsU0FDVEwsR0FBb0IsRUFDcEJ2RixRQUFRQyxJQUFJLFVBQVVzRixPQUV0QkEsR0FBb0IsRUFDcEJ2RixRQUFRQyxJQUFJLFVBQVVzRixLQUN4QixJQUdGLE1BQU1NLEVBQXlCWCxTQUFTWSxlQUN0QywwQkFFSUMsRUFBc0JiLFNBQVNZLGVBQ25DLHVCQUlJRSxFQUFtQmQsU0FBU0MsY0FDaEMsd0JBRUljLEVBQXFCZixTQUFTWSxlQUNsQyxzQkFFSUksRUFBcUJoQixTQUFTWSxlQUNsQyxzQkFFSUssRUFBc0JqQixTQUFTWSxlQUNuQyx1QkFFSU0sRUFBeUJsQixTQUFTWSxlQUN0QywwQkFFSU8sRUFBcUJuQixTQUFTWSxlQUNsQyxzQkFFSVEsRUFBc0JwQixTQUFTWSxlQUNuQyx1QkFFSVMsRUFBeUJyQixTQUFTWSxlQUN0QywwQkFJSVUsRUFBZ0J0QixTQUFTQyxjQUM3QixnQ0FFSXNCLEVBQWlCdkIsU0FBU0MsY0FDOUIsaUNBRUl1QixFQUFvQnhCLFNBQVNDLGNBQ2pDLG9DQUVJd0IsRUFBZ0J6QixTQUFTQyxjQUM3QixnQ0FJSXlCLEVBQWdCMUIsU0FBU0MsY0FDN0IsZ0NBRUkwQixFQUFpQjNCLFNBQVNDLGNBQzlCLGlDQUVJMkIsRUFBb0I1QixTQUFTQyxjQUNqQyxvQ0FFSTRCLEVBQWdCN0IsU0FBU0MsY0FDN0IsZ0NBR0k2QixFQUFPOUIsU0FBUytCLGlCQUFpQixvQ0FLdkMsU0FBUzVCLElBQ1AsTUFBTW1CLEVBQ0h0QixTQUFTWSxlQUFlLGlCQUFzQ29CLE9BQy9ELFdBQ0lOLEVBQ0gxQixTQUFTWSxlQUFlLGlCQUFzQ29CLE9BQy9ELFdBRUk3SixFQUFZLElBQUlyQyxFQUFPd0wsRUFBZXpMLEVBQVdtQyxLQUNqREksRUFBWSxJQUFJdEMsRUFBTzRMLEVBQWU3TCxFQUFXa0MsT0FDdkR1RixFQUFPLElBQUlwRixFQUFhQyxFQUFXQyxFQUFXaUksR0FHOUM0QixJQUVDakMsU0FBU0MsY0FBYyxtQkFBbUNpQyxNQUFNQyxRQUMvRCxPQUNEbkMsU0FBU0MsY0FBYyxTQUF5QmlDLE1BQU1DLFFBQVUsUUFFakVDLEdBQ0YsQ0FNQSxTQUFTOUIsSUFDUCxNQUFNZ0IsRUFDSHRCLFNBQVNZLGVBQWUsaUJBQXNDb0IsT0FDL0QsV0FDSU4sRUFBZ0IsY0FFaEJ2SixFQUFZLElBQUlyQyxFQUFPd0wsRUFBZXpMLEVBQVdtQyxLQUNqREksRUFBWSxJQUFJdEMsRUFBTzRMLEVBQWU3TCxFQUFXa0MsT0FDdkR1RixFQUFPLElBQUlwRixFQUFhQyxFQUFXQyxFQUFXaUksR0FHOUMsTUFBTWdDLEVBQUssSUFBSWhGLEVBQVdxRSxFQUFlN0wsRUFBV2tDLE1BQU91RixFQUFNLEdBQ2pFQSxFQUFLbEIsTUFBTWlHLEdBR1hKLElBRUNqQyxTQUFTQyxjQUFjLG1CQUFtQ2lDLE1BQU1DLFFBQy9ELE9BQ0RuQyxTQUFTQyxjQUFjLFNBQXlCaUMsTUFBTUMsUUFBVSxRQUVqRUMsR0FDRixDQXFEQSxTQUFTQSxJQUNQSCxJQUNBSCxFQUFLNUUsU0FBUSxDQUFDckYsRUFBS3lLLEtBQ0p6SyxFQUFJa0ssaUJBQWlCLFFBQzdCN0UsU0FBUSxDQUFDcEYsRUFBS3lLLEtBQ2pCLE1BQU1uSixFQUFRa0UsRUFBS3JGLFNBQVNxSyxFQUFVQyxHQUN0QyxHQUFJbkosRUFBTyxDQUNULE1BQU1vSixFQUFXeEMsU0FBU3lDLGNBQWMsUUFDbkIsSUFBakJySixFQUFNdEMsT0FDUjBMLEVBQVNFLFVBQVVDLElBQ2pCdkosRUFBTW5ELFFBQVVKLEVBQVdrQyxNQUN2QixtQkFDQSxrQkFHTnlLLEVBQVNFLFVBQVVDLElBQ2pCdkosRUFBTW5ELFFBQVVKLEVBQVdrQyxNQUFRLGNBQWdCLGFBR3ZERCxFQUFJOEssWUFBWUosR0FHaEJBLEVBQVN0QyxpQkFDUCxRQUNBMkMsRUFBWUMsS0FBSyxLQUFNUixFQUFVQyxFQUFVQyxHQUUvQyxJQUNBLEdBRU4sQ0FLQSxTQUFTTyxJQUNQL0MsU0FBUytCLGlCQUFpQixjQUFjN0UsU0FBUzhGLElBQy9DLE1BQU1DLEVBQWNELEVBQ3BCQyxFQUFZUCxVQUFVUSxPQUFPLGFBRTdCLE1BQU1DLEVBQWVyRCxFQUFvQkQsSUFBSW9ELEdBQ3pDRSxJQUNGRixFQUFZRyxvQkFBb0IsUUFBU0QsR0FDekNyRCxFQUFvQnVELE9BQU9KLEdBQzdCLEdBRUosQ0FTQSxTQUFTSixFQUNQUCxFQUNBQyxFQUNBQyxHQUVBLE1BQU1wSixFQUFRa0UsRUFBS3JGLFNBQVNxSyxFQUFVQyxHQWN0QyxHQWJBUSxJQUdBL0MsU0FBUytCLGlCQUFpQiw0QkFBNEI3RSxTQUFTb0csSUFDN0RBLEVBQUVaLFVBQVVRLE9BQU8sV0FBVyxJQUVoQ2xELFNBQ0crQixpQkFBaUIsc0NBQ2pCN0UsU0FBU29HLElBQ1JBLEVBQUVaLFVBQVVRLE9BQU8sV0FBVyxJQUk5QjlKLEdBQVNBLEVBQU1uRCxRQUFVcUgsRUFBSzdFLGNBQWN4QyxNQUFPLENBQ3JEdU0sRUFBU0UsVUFBVWEsT0FBTyxZQUMxQixNQUFNNUosRUFBUTJELEVBQUs1RCxjQUFjNEksRUFBVUMsR0FHdkM1SSxFQUFNa0IsT0FBUyxHQUVqQmxCLEVBQU11RCxTQUFTcEQsSUFDYixNQUFNMEosRUFBYXhELFNBQVNDLGNBQzFCLGtCQUFrQm5HLEVBQUt4QyxzQkFBc0J3QyxFQUFLdkMsWUFFcEQsR0FBSWlNLEVBQVksQ0FDZEEsRUFBV2QsVUFBVUMsSUFBSSxhQUd6QixNQUFNYyxFQUFtQjNELEVBQW9CRCxJQUFJMkQsR0FDN0NDLEdBQ0ZELEVBQVdKLG9CQUFvQixRQUFTSyxHQUkxQyxNQUFNTixFQUFlLE1BbUIvQixTQUNFL0wsRUFDQUMsRUFDQUMsRUFDQUMsR0FFQSxNQUFNNkIsRUFBUWtFLEVBQUtyRixTQUFTYixFQUFVQyxHQUV0QyxHQUFJK0IsR0FBU0EsRUFBTW5ELFFBQVVxSCxFQUFLN0UsY0FBY3hDLE1BQU8sQ0FNckQsR0FKQXFILEVBQUtqRCxVQUFVakQsRUFBVUMsRUFBVUMsRUFBUUMsR0FDM0NtTSxJQUdJcEcsRUFBS2hGLFFBQVEsYUFBYytFLEVBQzdCLEtBQU9DLEVBQUs3RSxnQkFBa0I2RSxFQUFLaEYsUUFBUSxJQUN6Q2dGLEVBQUtoRixRQUFRLEdBQUdtSCxXQUNoQmlFLElBS0osTUFBTUMsRUFBYXJHLEVBQUtyRixTQUFTWCxFQUFRQyxJQUNwQitGLEVBQUtyRixTQUFTYixFQUFVQyxJQUN4QnNNLEdBQ25CN0ksUUFBUUMsSUFDTixHQUFHM0IsRUFBTW5ELCtCQUErQm1CLE1BQWFDLFVBQWlCQyxNQUFXQyxLQUd2RixDQUNGLENBaERZcU0sQ0FBWXRCLEVBQVVDLEVBQVV6SSxFQUFLeEMsT0FBUXdDLEVBQUt2QyxPQUFPLEVBRTNEaU0sRUFBV3RELGlCQUFpQixRQUFTaUQsR0FDckNyRCxFQUFvQnpCLElBQUltRixFQUFZTCxFQUN0QyxJQUdOLENBQ0YsQ0E2Q0EsU0FBU2xCLElBQ1BYLEVBQWN1QyxZQUFjLEdBQUd2RyxFQUFLaEYsUUFBUSxHQUFHdEMsT0FDL0N1TCxFQUFlc0MsWUFBYyxVQUFVdkcsRUFBS2hGLFFBQVEsR0FBR25DLFFBQ3ZEcUwsRUFBa0JxQyxZQUFjLG9CQUFvQnZHLEVBQUtoRixRQUFRLEdBQUdsQyxpQkFFcEVzTCxFQUFjbUMsWUFBYyxHQUFHdkcsRUFBS2hGLFFBQVEsR0FBR3RDLE9BQy9DMkwsRUFBZWtDLFlBQWMsVUFBVXZHLEVBQUtoRixRQUFRLEdBQUduQyxRQUN2RHlMLEVBQWtCaUMsWUFBYyxvQkFBb0J2RyxFQUFLaEYsUUFBUSxHQUFHbEMsaUJBRWhFa0gsRUFBSzdFLGdCQUFrQjZFLEVBQUtoRixRQUFRLElBQ3RDbUosRUFBY29DLFlBQWMsWUFDNUJoQyxFQUFjZ0MsWUFBYyxhQUU1QnBDLEVBQWNvQyxZQUFjLFdBQzVCaEMsRUFBY2dDLFlBQWMsYUFHOUJ2RyxFQUFLcEIsaUJBRURvQixFQUFLL0UsZUFBaUIzQyxFQUFNdUcsZUFDMUJtQixFQUFLNUUsU0FBVzRFLEVBQUtoRixRQUFRLElBQy9CZ0osRUFBY3VDLFlBQWMsR0FBR3ZHLEVBQUtoRixRQUFRLEdBQUd0Qyx5QkFDL0MwTCxFQUFjbUMsWUFBYyxHQUFHdkcsRUFBS2hGLFFBQVEsR0FBR3RDLDBCQUN0Q3NILEVBQUs1RSxTQUFXNEUsRUFBS2hGLFFBQVEsSUFDdENnSixFQUFjdUMsWUFBYyxHQUFHdkcsRUFBS2hGLFFBQVEsR0FBR3RDLHlCQUMvQzBMLEVBQWNtQyxZQUFjLEdBQUd2RyxFQUFLaEYsUUFBUSxHQUFHdEMsMkJBRS9Dc0wsRUFBY3VDLFlBQWMsa0JBQzVCbkMsRUFBY21DLFlBQWMsbUJBRTlCcEMsRUFBY29DLFlBQWMsR0FDNUJoQyxFQUFjZ0MsWUFBYyxHQUM1Qi9DLEVBQWlCb0IsTUFBTUMsUUFBVSxPQUVqQ3BCLEVBQW1COEMsWUFBY3ZHLEVBQUs1RSxPQUNsQyxXQUFXNEUsRUFBSzVFLE9BQU8xQyxPQUN2QixlQUVKZ0wsRUFBbUI2QyxZQUFjdkcsRUFBS2hGLFFBQVEsR0FBR3RDLEtBQ2pEaUwsRUFBb0I0QyxZQUFjLFVBQVV2RyxFQUFLaEYsUUFBUSxHQUFHbkMsUUFDNUQrSyxFQUF1QjJDLFlBQWMsb0JBQW9CdkcsRUFBS2hGLFFBQVEsR0FBR2xDLGlCQUV6RStLLEVBQW1CMEMsWUFBY3ZHLEVBQUtoRixRQUFRLEdBQUd0QyxLQUNqRG9MLEVBQW9CeUMsWUFBYyxVQUFVdkcsRUFBS2hGLFFBQVEsR0FBR25DLFFBQzVEa0wsRUFBdUJ3QyxZQUFjLG9CQUFvQnZHLEVBQUtoRixRQUFRLEdBQUdsQyxpQkFFN0UsQ0FNQSxTQUFTc04sSUFDUFgsSUFFQWpCLEVBQUs1RSxTQUFTckYsSUFDWkEsRUFBSWtLLGlCQUFpQixRQUFRN0UsU0FBU3BGLElBRXBDLEdBQUlBLEVBQUlnTSxXQUFZLENBQ2xCLE1BQU10QixFQUFXMUssRUFBSWdNLFdBQ2ZMLEVBQW1CM0QsRUFBb0JELElBQUkyQyxHQUM3Q2lCLElBQ0ZqQixFQUFTWSxvQkFBb0IsUUFBU0ssR0FDdEMzRCxFQUFvQnVELE9BQU9iLElBRTdCMUssRUFBSWlNLFlBQVlqTSxFQUFJZ00sV0FDdEIsSUFDQSxJQUdKMUIsR0FDRixDQTNRQXpCLEVBQXVCVCxpQkFBaUIsU0FBUyxLQUMvQ1ksRUFBaUJvQixNQUFNQyxRQUFVLE9BQ2pDWSxJQUVBakIsRUFBSzVFLFNBQVNyRixJQUNaQSxFQUFJa0ssaUJBQWlCLFFBQVE3RSxTQUFTcEYsSUFFcEMsR0FBSUEsRUFBSWdNLFdBQVksQ0FDbEIsTUFBTXRCLEVBQVcxSyxFQUFJZ00sV0FDZkwsRUFBbUIzRCxFQUFvQkQsSUFBSTJDLEdBQzdDaUIsSUFDRmpCLEVBQVNZLG9CQUFvQixRQUFTSyxHQUN0QzNELEVBQW9CdUQsT0FBT2IsSUFFN0IxSyxFQUFJaU0sWUFBWWpNLEVBQUlnTSxXQUN0QixJQUNBLElBRUozRCxHQUFnQixJQU1sQlUsRUFBb0JYLGlCQUFpQixTQUFTLEtBQzVDWSxFQUFpQm9CLE1BQU1DLFFBQVUsT0FDakNZLElBRUFqQixFQUFLNUUsU0FBU3JGLElBQ1pBLEVBQUlrSyxpQkFBaUIsUUFBUTdFLFNBQVNwRixJQUVwQyxHQUFJQSxFQUFJZ00sV0FBWSxDQUNsQixNQUFNdEIsRUFBVzFLLEVBQUlnTSxXQUNmTCxFQUFtQjNELEVBQW9CRCxJQUFJMkMsR0FDN0NpQixJQUNGakIsRUFBU1ksb0JBQW9CLFFBQVNLLEdBQ3RDM0QsRUFBb0J1RCxPQUFPYixJQUU3QjFLLEVBQUlpTSxZQUFZak0sRUFBSWdNLFdBQ3RCLElBQ0EsSUFFSnhELEdBQWEsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3Byb2plY3QvLi9zcmMvY29tcG9uZW50cy9jaGVja2Vyc0dhbWUudHMiLCJ3ZWJwYWNrOi8vcHJvamVjdC8uL3NyYy9jb21wb25lbnRzL2NoZWNrZXJzQUkudHMiLCJ3ZWJwYWNrOi8vcHJvamVjdC8uL3NyYy9wYWdlcy9jaGVja2Vycy1kb20udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2hlY2tlcnNBSSB9IGZyb20gXCIuL2NoZWNrZXJzQUlcIjtcclxuXHJcbi8qKlxyXG4gKiBFbnVtIHJlcHJlc2VudGluZyB0aGUgc3RhdGUgb2YgdGhlIGNoZWNrZXJzIGdhbWUuXHJcbiAqL1xyXG5leHBvcnQgZW51bSBTdGF0ZSB7XHJcbiAgaW5Qcm9ncmVzcyxcclxuICBnYW1lRmluaXNoZWQsXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIGEgcGxheWVyIGluIHRoZSBjaGVja2VycyBnYW1lLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFBsYXllciB7XHJcbiAgcHVibGljIG5hbWU6IHN0cmluZztcclxuICBwdWJsaWMgY29sb3I6IFBpZWNlQ29sb3I7XHJcbiAgcHVibGljIHNjb3JlOiBudW1iZXI7XHJcbiAgcHVibGljIGNhcHR1cmVkUGllY2VzOiBudW1iZXI7XHJcbiAgcHVibGljIG51bU9mUGllY2VzOiBudW1iZXI7XHJcbiAgcHVibGljIG51bU9mS2luZ3M6IG51bWJlcjtcclxuICBwdWJsaWMgY2FwdHVyZXNBdmFpbGFibGU6IGJvb2xlYW47XHJcblxyXG4gIC8qKlxyXG4gICAqIENvbnN0cnVjdHMgYSBQbGF5ZXIgb2JqZWN0LlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHBsYXllci5cclxuICAgKiBAcGFyYW0ge1BpZWNlQ29sb3J9IGNvbG9yIC0gVGhlIGNvbG9yIGFzc2lnbmVkIHRvIHRoZSBwbGF5ZXIuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IobmFtZTogc3RyaW5nLCBjb2xvcjogUGllY2VDb2xvcikge1xyXG4gICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuY29sb3IgPSBjb2xvcjtcclxuICAgIHRoaXMuc2NvcmUgPSAwO1xyXG4gICAgdGhpcy5jYXB0dXJlZFBpZWNlcyA9IDA7XHJcbiAgICB0aGlzLm51bU9mUGllY2VzID0gMTI7XHJcbiAgICB0aGlzLm51bU9mS2luZ3MgPSAwO1xyXG4gICAgdGhpcy5jYXB0dXJlc0F2YWlsYWJsZSA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVXBkYXRlcyB0aGUgbnVtYmVyIG9mIHBpZWNlcyBjYXB0dXJlZCBieSB0aGUgcGxheWVyLlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBjb3VudCAtIFRoZSBudW1iZXIgb2YgcGllY2VzIGNhcHR1cmVkIGluIGEgbW92ZS5cclxuICAgKi9cclxuICB1cGRhdGVDYXB0dXJlZFBpZWNlcyhjb3VudDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICB0aGlzLmNhcHR1cmVkUGllY2VzICs9IGNvdW50O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVXBkYXRlcyB0aGUgc2NvcmUgb2YgdGhlIHBsYXllci5cclxuICAgKiBAcGFyYW0ge251bWJlcn0gc2NvcmUgLSBUaGUgc2NvcmUgdG8gYmUgYWRkZWQgdG8gdGhlIHBsYXllcidzIGN1cnJlbnQgc2NvcmUuXHJcbiAgICovXHJcbiAgdXBkYXRlU2NvcmUoc2NvcmU6IG51bWJlcik6IHZvaWQge1xyXG4gICAgdGhpcy5zY29yZSArPSBzY29yZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE1ldGhvZCB0byBjcmVhdGUgYSBjb3B5IG9mIHRoZSBQbGF5ZXIgaW5zdGFuY2UgdG8gYmUgdXNlZCBpbiBtaW5pbWF4IGFsZ29yaXRobVxyXG4gICAqIEByZXR1cm5zIHtQbGF5ZXJ9IC0gY29weSBvZiB0aGUgcGxheWVyIGluc3RhbmNlXHJcbiAgICovXHJcbiAgcHVibGljIGRlZXBDb3B5UGxheWVyKCk6IFBsYXllciB7XHJcbiAgICBsZXQgY29waWVkUGxheWVyID0gbmV3IFBsYXllcih0aGlzLm5hbWUsIHRoaXMuY29sb3IpO1xyXG4gICAgY29waWVkUGxheWVyLm51bU9mUGllY2VzID0gdGhpcy5udW1PZlBpZWNlcztcclxuICAgIGNvcGllZFBsYXllci5udW1PZktpbmdzID0gdGhpcy5udW1PZktpbmdzO1xyXG5cclxuICAgIHJldHVybiBjb3BpZWRQbGF5ZXI7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogRW51bSBmb3IgcGllY2UgY29sb3JzIGluIHRoZSBjaGVja2VycyBnYW1lLlxyXG4gKi9cclxuZXhwb3J0IGVudW0gUGllY2VDb2xvciB7XHJcbiAgQmxhY2sgPSBcImJsYWNrXCIsXHJcbiAgUmVkID0gXCJyZWRcIixcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgYSBjaGVja2VycyBwaWVjZSwgaW5jbHVkaW5nIGl0cyBjb2xvciBhbmQga2luZyBzdGF0dXMuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ2hlY2tlcnNQaWVjZSB7XHJcbiAgcHVibGljIGNvbG9yOiBQaWVjZUNvbG9yO1xyXG4gIHB1YmxpYyBpc0tpbmc6IGJvb2xlYW47XHJcbiAgcHVibGljIGNhcHR1cmVTdGF0dXM6IGJvb2xlYW47XHJcblxyXG4gIC8qKlxyXG4gICAqIENvbnN0cnVjdHMgYSBDaGVja2Vyc1BpZWNlIG9iamVjdC5cclxuICAgKiBAcGFyYW0ge1BpZWNlQ29sb3J9IGNvbG9yIC0gVGhlIGNvbG9yIG9mIHRoZSBwaWVjZS5cclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzS2luZyAtIEluZGljYXRlcyBpZiB0aGUgcGllY2UgaXMgYSBraW5nLiBEZWZhdWx0IGlzIGZhbHNlLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgY29sb3I6IFBpZWNlQ29sb3IsXHJcbiAgICBpc0tpbmc6IGJvb2xlYW4gPSBmYWxzZSxcclxuICAgIGNhcHR1cmVTdGF0dXM6IGJvb2xlYW4gPSBmYWxzZVxyXG4gICkge1xyXG4gICAgdGhpcy5jb2xvciA9IGNvbG9yO1xyXG4gICAgdGhpcy5pc0tpbmcgPSBpc0tpbmc7XHJcbiAgICB0aGlzLmNhcHR1cmVTdGF0dXMgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFByb21vdGVzIHRoZSBwaWVjZSB0byBhIGtpbmcuXHJcbiAgICovXHJcbiAgcHVibGljIG1ha2VLaW5nKCk6IHZvaWQge1xyXG4gICAgdGhpcy5pc0tpbmcgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGNhcHR1cmVDaGVjaygpIHtcclxuICAgIHRoaXMuY2FwdHVyZVN0YXR1cyA9IHRydWU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgY29weSBvZiB0aGUgQ2hlY2tlcnNQaWVjZSBpbnN0YW5jZVxyXG4gICAqIEByZXR1cm5zIHtDaGVja2Vyc1BpZWNlfSAtIGNvcHkgb2YgdGhlIGNoZWNrZXJzIHBpZWNlXHJcbiAgICovXHJcbiAgcHVibGljIGRlZXBDb3B5UGllY2UoKTogQ2hlY2tlcnNQaWVjZSB7XHJcbiAgICBjb25zdCBjb3BpZWRQaWVjZSA9IG5ldyBDaGVja2Vyc1BpZWNlKHRoaXMuY29sb3IsIHRoaXMuaXNLaW5nKTtcclxuICAgIHJldHVybiBjb3BpZWRQaWVjZTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDbGFzcyB0byBzdG9yZSB0aGUgc3RhcnQgYW5kIGVuZCBwb3NpdGlvbnMgb2YgYSBtb3ZlIGluIGEgY2hlY2tlcnMgZ2FtZS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBNb3ZlcyB7XHJcbiAgcHVibGljIHN0YXJ0Um93OiBudW1iZXI7XHJcbiAgcHVibGljIHN0YXJ0Q29sOiBudW1iZXI7XHJcbiAgcHVibGljIGVuZFJvdzogbnVtYmVyO1xyXG4gIHB1YmxpYyBlbmRDb2w6IG51bWJlcjtcclxuXHJcbiAgLyoqXHJcbiAgICogQ29uc3RydWN0cyBhIE1vdmVzIG9iamVjdC5cclxuICAgKiBAcGFyYW0ge251bWJlcn0gc3RhcnRSb3cgLSBUaGUgc3RhcnRpbmcgcm93IG9mIHRoZSBtb3ZlLlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydENvbCAtIFRoZSBzdGFydGluZyBjb2x1bW4gb2YgdGhlIG1vdmUuXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGVuZFJvdyAtIFRoZSBlbmRpbmcgcm93IG9mIHRoZSBtb3ZlLlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBlbmRDb2wgLSBUaGUgZW5kaW5nIGNvbHVtbiBvZiB0aGUgbW92ZS5cclxuICAgKi9cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHN0YXJ0Um93OiBudW1iZXIsXHJcbiAgICBzdGFydENvbDogbnVtYmVyLFxyXG4gICAgZW5kUm93OiBudW1iZXIsXHJcbiAgICBlbmRDb2w6IG51bWJlclxyXG4gICkge1xyXG4gICAgdGhpcy5zdGFydFJvdyA9IHN0YXJ0Um93O1xyXG4gICAgdGhpcy5zdGFydENvbCA9IHN0YXJ0Q29sO1xyXG4gICAgdGhpcy5lbmRSb3cgPSBlbmRSb3c7XHJcbiAgICB0aGlzLmVuZENvbCA9IGVuZENvbDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBlcXVhbHMoY2hlY2tNb3ZlOiBNb3Zlcyk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgdGhpcy5zdGFydFJvdyA9PT0gY2hlY2tNb3ZlLnN0YXJ0Um93ICYmXHJcbiAgICAgIHRoaXMuc3RhcnRDb2wgPT09IGNoZWNrTW92ZS5zdGFydENvbCAmJlxyXG4gICAgICB0aGlzLmVuZFJvdyA9PT0gY2hlY2tNb3ZlLmVuZFJvdyAmJlxyXG4gICAgICB0aGlzLmVuZENvbCA9PT0gY2hlY2tNb3ZlLmVuZENvbFxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBNYW5hZ2VzIHRoZSBzdGF0ZSBhbmQgaW5pdGlhbGl6YXRpb24gb2YgdGhlIGNoZWNrZXJzIGJvYXJkLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENoZWNrZXJzQm9hcmQge1xyXG4gIC8qKlxyXG4gICAqIFJlcHJlc2VudHMgdGhlIGNoZWNrZXJzIGJvYXJkIGFzIGEgMkQgYXJyYXkuXHJcbiAgICovXHJcbiAgcHVibGljIGJvYXJkOiAoQ2hlY2tlcnNQaWVjZSB8IG51bGwpW11bXSA9IFtdO1xyXG5cclxuICAvKipcclxuICAgKiBDb25zdHJ1Y3RzIGEgQ2hlY2tlcnNCb2FyZCBvYmplY3QgYW5kIGluaXRpYWxpemVzIHRoZSBib2FyZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuaW5pdGlhbGl6ZUJvYXJkKCk7XHJcbiAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmJvYXJkKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHMgdGhlIGJvYXJkIHRvIGl0cyBzdGFydGluZyBzdGF0ZSB3aXRoIHBpZWNlcyBwb3NpdGlvbmVkLlxyXG4gICAqL1xyXG4gIHByaXZhdGUgaW5pdGlhbGl6ZUJvYXJkKCk6IHZvaWQge1xyXG4gICAgZm9yIChsZXQgcm93ID0gMDsgcm93IDwgODsgcm93KyspIHtcclxuICAgICAgdGhpcy5ib2FyZFtyb3ddID0gW107XHJcbiAgICAgIGZvciAobGV0IGNvbCA9IDA7IGNvbCA8IDg7IGNvbCsrKSB7XHJcbiAgICAgICAgaWYgKHJvdyA8IDMgJiYgKHJvdyArIGNvbCkgJSAyID09PSAxKSB7XHJcbiAgICAgICAgICB0aGlzLmJvYXJkW3Jvd11bY29sXSA9IG5ldyBDaGVja2Vyc1BpZWNlKFBpZWNlQ29sb3IuQmxhY2spO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocm93ID4gNCAmJiAocm93ICsgY29sKSAlIDIgPT09IDEpIHtcclxuICAgICAgICAgIHRoaXMuYm9hcmRbcm93XVtjb2xdID0gbmV3IENoZWNrZXJzUGllY2UoUGllY2VDb2xvci5SZWQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLmJvYXJkW3Jvd11bY29sXSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXRyaWV2ZXMgdGhlIHBpZWNlIGF0IHRoZSBzcGVjaWZpZWQgcG9zaXRpb24gb24gdGhlIGJvYXJkLlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSByb3cgLSBUaGUgcm93IG9mIHRoZSBwaWVjZS5cclxuICAgKiBAcGFyYW0ge251bWJlcn0gY29sIC0gVGhlIGNvbHVtbiBvZiB0aGUgcGllY2UuXHJcbiAgICogQHJldHVybnMge0NoZWNrZXJzUGllY2UgfCBudWxsfSAtIFRoZSBwaWVjZSBhdCB0aGUgc3BlY2lmaWVkIHBvc2l0aW9uIG9yIG51bGwgaWYgZW1wdHkuXHJcbiAgICovXHJcbiAgcHVibGljIGdldFBpZWNlKHJvdzogbnVtYmVyLCBjb2w6IG51bWJlcik6IENoZWNrZXJzUGllY2UgfCBudWxsIHtcclxuICAgIHJldHVybiB0aGlzLmJvYXJkW3Jvd11bY29sXTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBNYW5hZ2VzIHRoZSBvdmVyYWxsIGdhbWUgc3RhdGUgb2YgYSBjaGVja2VycyBnYW1lLCBpbmNsdWRpbmcgdGhlIGJvYXJkLCBwbGF5ZXJzLCB0dXJucywgYW5kIGdhbWUgcHJvZ3Jlc3MuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ2hlY2tlcnNHYW1lIHtcclxuICBwdWJsaWMgYm9hcmQ6IChDaGVja2Vyc1BpZWNlIHwgbnVsbClbXVtdO1xyXG4gIHB1YmxpYyBwbGF5ZXJzOiBbUGxheWVyLCBQbGF5ZXJdO1xyXG4gIHB1YmxpYyBjdXJyZW50U3RhdGU6IFN0YXRlO1xyXG4gIHB1YmxpYyBjdXJyZW50UGxheWVyOiBQbGF5ZXI7XHJcbiAgcHVibGljIHdpbm5lcjogUGxheWVyIHwgbnVsbDtcclxuICBwdWJsaWMgbnVtT2ZUdXJuczogbnVtYmVyO1xyXG4gIHB1YmxpYyBwbGF5ZXJPbmVNb3ZlczogTW92ZXNbXTtcclxuICBwdWJsaWMgcGxheWVyVHdvTW92ZXM6IE1vdmVzW107XHJcbiAgcHVibGljIGZvcmNlZEp1bXBzOiBib29sZWFuO1xyXG4gIHB1YmxpYyBjaGFpbmluZ1JvdzogbnVtYmVyIHwgbnVsbDtcclxuICBwdWJsaWMgY2hhaW5pbmdDb2w6IG51bWJlciB8IG51bGw7XHJcblxyXG4gIC8qKlxyXG4gICAqIENvbnN0cnVjdHMgYSBDaGVja2Vyc0dhbWUgb2JqZWN0LlxyXG4gICAqIEBwYXJhbSB7UGxheWVyfSBwbGF5ZXJPbmUgLSBUaGUgZmlyc3QgcGxheWVyLlxyXG4gICAqIEBwYXJhbSB7UGxheWVyfSBwbGF5ZXJUd28gLSBUaGUgc2Vjb25kIHBsYXllci5cclxuICAgKi9cclxuICBjb25zdHJ1Y3RvcihwbGF5ZXJPbmU6IFBsYXllciwgcGxheWVyVHdvOiBQbGF5ZXIsIGZvcmNlZEp1bXBzOiBib29sZWFuKSB7XHJcbiAgICB0aGlzLmJvYXJkID0gbmV3IENoZWNrZXJzQm9hcmQoKS5ib2FyZDtcclxuICAgIHRoaXMucGxheWVycyA9IFtwbGF5ZXJPbmUsIHBsYXllclR3b107XHJcbiAgICB0aGlzLmN1cnJlbnRTdGF0ZSA9IFN0YXRlLmluUHJvZ3Jlc3M7XHJcbiAgICB0aGlzLmN1cnJlbnRQbGF5ZXIgPSBwbGF5ZXJPbmU7XHJcbiAgICB0aGlzLndpbm5lciA9IG51bGw7XHJcbiAgICB0aGlzLm51bU9mVHVybnMgPSAwO1xyXG4gICAgdGhpcy5wbGF5ZXJPbmVNb3ZlcyA9IFtdO1xyXG4gICAgdGhpcy5wbGF5ZXJUd29Nb3ZlcyA9IFtdO1xyXG4gICAgdGhpcy5mb3JjZWRKdW1wcyA9IGZvcmNlZEp1bXBzO1xyXG4gICAgdGhpcy5jaGFpbmluZ1JvdyA9IG51bGw7XHJcbiAgICB0aGlzLmNoYWluaW5nQ29sID0gbnVsbDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENoYW5nZXMgdGhlIHR1cm4gdG8gdGhlIG5leHQgcGxheWVyLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjaGFuZ2VUdXJuKCk6IHZvaWQge1xyXG4gICAgdGhpcy5jdXJyZW50UGxheWVyID1cclxuICAgICAgdGhpcy5jdXJyZW50UGxheWVyID09PSB0aGlzLnBsYXllcnNbMF1cclxuICAgICAgICA/IHRoaXMucGxheWVyc1sxXVxyXG4gICAgICAgIDogdGhpcy5wbGF5ZXJzWzBdO1xyXG4gICAgdGhpcy5udW1PZlR1cm5zKys7XHJcbiAgICBpZiAodGhpcy5mb3JjZWRKdW1wcykge1xyXG4gICAgICBpZiAodGhpcy5jYXB0dXJlc1Bvc3NpYmxlKCkpIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRQbGF5ZXIuY2FwdHVyZXNBdmFpbGFibGUgPSB0cnVlO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuY3VycmVudFBsYXllci5jYXB0dXJlc0F2YWlsYWJsZSA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXRyaWV2ZXMgdGhlIHBpZWNlIGF0IHRoZSBzcGVjaWZpZWQgYm9hcmQgY29vcmRpbmF0ZXMuXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHJvdyAtIFRoZSByb3cgb2YgdGhlIHBpZWNlLlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBjb2wgLSBUaGUgY29sdW1uIG9mIHRoZSBwaWVjZS5cclxuICAgKiBAcmV0dXJucyB7Q2hlY2tlcnNQaWVjZSB8IG51bGx9IC0gVGhlIHBpZWNlIGF0IHRoZSBnaXZlbiBwb3NpdGlvbiwgb3IgbnVsbCBpZiBlbXB0eS5cclxuICAgKi9cclxuICBwdWJsaWMgZ2V0UGllY2Uocm93OiBudW1iZXIsIGNvbDogbnVtYmVyKTogQ2hlY2tlcnNQaWVjZSB8IG51bGwge1xyXG4gICAgcmV0dXJuIHRoaXMuYm9hcmRbcm93XVtjb2xdO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVmFsaWRhdGVzIGEgcHJvcG9zZWQgbW92ZSBmb3IgYSBwaWVjZS5cclxuICAgKiBAcGFyYW0ge251bWJlcn0gc3RhcnRSb3cgLSBUaGUgc3RhcnRpbmcgcm93IG9mIHRoZSBtb3ZlLlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydENvbCAtIFRoZSBzdGFydGluZyBjb2x1bW4gb2YgdGhlIG1vdmUuXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGVuZFJvdyAtIFRoZSBlbmRpbmcgcm93IG9mIHRoZSBtb3ZlLlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBlbmRDb2wgLSBUaGUgZW5kaW5nIGNvbHVtbiBvZiB0aGUgbW92ZS5cclxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gLSBUcnVlIGlmIHRoZSBtb3ZlIGlzIHZhbGlkLCBmYWxzZSBvdGhlcndpc2UuXHJcbiAgICovXHJcbiAgcHVibGljIHZhbGlkYXRlTW92ZShcclxuICAgIHN0YXJ0Um93OiBudW1iZXIsXHJcbiAgICBzdGFydENvbDogbnVtYmVyLFxyXG4gICAgZW5kUm93OiBudW1iZXIsXHJcbiAgICBlbmRDb2w6IG51bWJlclxyXG4gICk6IGJvb2xlYW4ge1xyXG4gICAgLy8gY2hlY2sgdG8gc2VlIGlmIGF0dGVtcHRlZCBtb3ZlIHdpbGwgcGxhY2UgcGllY2Ugb3V0c2lkZSBib2FyZFxyXG4gICAgaWYgKGVuZFJvdyA8IDAgfHwgZW5kUm93ID49IDggfHwgZW5kQ29sIDwgMCB8fCBlbmRDb2wgPj0gOCkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZGVzdGluYXRpb25TcXVhcmUgPSB0aGlzLmdldFBpZWNlKGVuZFJvdywgZW5kQ29sKTtcclxuICAgIGNvbnN0IHBpZWNlID0gdGhpcy5nZXRQaWVjZShzdGFydFJvdywgc3RhcnRDb2wpO1xyXG5cclxuICAgIGlmIChwaWVjZT8uY29sb3IgPT09IFBpZWNlQ29sb3IuQmxhY2sgJiYgcGllY2UuaXNLaW5nID09PSBmYWxzZSkge1xyXG4gICAgICAvLyB2YWxpZGF0ZSBtb3ZlIGZvciB0aGUgQmxhY2sgcGllY2VcclxuICAgICAgcmV0dXJuIHRoaXMudmFsaWRhdGVCbGFjayhcclxuICAgICAgICBzdGFydFJvdyxcclxuICAgICAgICBzdGFydENvbCxcclxuICAgICAgICBlbmRSb3csXHJcbiAgICAgICAgZW5kQ29sLFxyXG4gICAgICAgIGRlc3RpbmF0aW9uU3F1YXJlXHJcbiAgICAgICk7XHJcbiAgICB9IGVsc2UgaWYgKHBpZWNlPy5jb2xvciA9PT0gUGllY2VDb2xvci5SZWQgJiYgcGllY2UuaXNLaW5nID09PSBmYWxzZSkge1xyXG4gICAgICAvLyB2YWxpZGF0ZSBtb3ZlIGZvciB0aGUgcmVkIHBpZWNlXHJcbiAgICAgIHJldHVybiB0aGlzLnZhbGlkYXRlUmVkKFxyXG4gICAgICAgIHN0YXJ0Um93LFxyXG4gICAgICAgIHN0YXJ0Q29sLFxyXG4gICAgICAgIGVuZFJvdyxcclxuICAgICAgICBlbmRDb2wsXHJcbiAgICAgICAgZGVzdGluYXRpb25TcXVhcmVcclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocGllY2U/LmlzS2luZyA9PT0gdHJ1ZSkge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgTWF0aC5hYnMoc3RhcnRSb3cgLSBlbmRSb3cpID09PSAxICYmXHJcbiAgICAgICAgTWF0aC5hYnMoc3RhcnRDb2wgLSBlbmRDb2wpID09PSAxXHJcbiAgICAgICkge1xyXG4gICAgICAgIGlmIChkZXN0aW5hdGlvblNxdWFyZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfSBlbHNlIGlmIChcclxuICAgICAgICBNYXRoLmFicyhzdGFydFJvdyAtIGVuZFJvdykgPT0gMiAmJlxyXG4gICAgICAgIE1hdGguYWJzKHN0YXJ0Q29sIC0gZW5kQ29sKSA9PSAyXHJcbiAgICAgICkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNhbkNhcHR1cmUoc3RhcnRSb3csIHN0YXJ0Q29sLCBlbmRSb3csIGVuZENvbCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICAvLyBtZXRob2Qgb2YgdmFsaWRhdGlvbiBmb3IgYmxhY2sgcGllY2VzXHJcbiAgcHVibGljIHZhbGlkYXRlQmxhY2soXHJcbiAgICBzdGFydFJvdzogbnVtYmVyLFxyXG4gICAgc3RhcnRDb2w6IG51bWJlcixcclxuICAgIGVuZFJvdzogbnVtYmVyLFxyXG4gICAgZW5kQ29sOiBudW1iZXIsXHJcbiAgICBkZXN0aW5hdGlvblNxdWFyZTogQ2hlY2tlcnNQaWVjZSB8IG51bGxcclxuICApOiBib29sZWFuIHtcclxuICAgIGlmIChlbmRSb3cgLSBzdGFydFJvdyA9PT0gMSAmJiBNYXRoLmFicyhzdGFydENvbCAtIGVuZENvbCkgPT09IDEpIHtcclxuICAgICAgaWYgKGRlc3RpbmF0aW9uU3F1YXJlICE9PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBlbHNlIGlmIChlbmRSb3cgLSBzdGFydFJvdyA9PT0gMiAmJiBNYXRoLmFicyhzdGFydENvbCAtIGVuZENvbCkgPT09IDIpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuY2FuQ2FwdHVyZShzdGFydFJvdywgc3RhcnRDb2wsIGVuZFJvdywgZW5kQ29sKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIG1ldGhvZCBvZiB2YWxpZGF0aW9uIGZvciByZWQgcGllY2VzXHJcbiAgcHVibGljIHZhbGlkYXRlUmVkKFxyXG4gICAgc3RhcnRSb3c6IG51bWJlcixcclxuICAgIHN0YXJ0Q29sOiBudW1iZXIsXHJcbiAgICBlbmRSb3c6IG51bWJlcixcclxuICAgIGVuZENvbDogbnVtYmVyLFxyXG4gICAgZGVzdGluYXRpb25TcXVhcmU6IENoZWNrZXJzUGllY2UgfCBudWxsXHJcbiAgKTogYm9vbGVhbiB7XHJcbiAgICBpZiAoZW5kUm93IC0gc3RhcnRSb3cgPT09IC0xICYmIE1hdGguYWJzKHN0YXJ0Q29sIC0gZW5kQ29sKSA9PT0gMSkge1xyXG4gICAgICBpZiAoZGVzdGluYXRpb25TcXVhcmUgIT09IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2UgaWYgKGVuZFJvdyAtIHN0YXJ0Um93ID09PSAtMiAmJiBNYXRoLmFicyhzdGFydENvbCAtIGVuZENvbCkgPT09IDIpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuY2FuQ2FwdHVyZShzdGFydFJvdywgc3RhcnRDb2wsIGVuZFJvdywgZW5kQ29sKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENvbXB1dGVzIHRoZSBwb3NzaWJsZSBtb3ZlcyBmb3IgYSBwaWVjZSBhdCBhIGdpdmVuIGJvYXJkIHBvc2l0aW9uLlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSByb3cgLSBUaGUgcm93IG9mIHRoZSBwaWVjZS5cclxuICAgKiBAcGFyYW0ge251bWJlcn0gY29sIC0gVGhlIGNvbHVtbiBvZiB0aGUgcGllY2UuXHJcbiAgICogQHJldHVybnMge01vdmVzW119IC0gQW4gYXJyYXkgb2YgcG9zc2libGUgbW92ZXMgZm9yIHRoZSBwaWVjZS5cclxuICAgKi9cclxuICBwdWJsaWMgcG9zc2libGVNb3Zlcyhyb3c6IG51bWJlciwgY29sOiBudW1iZXIpOiBNb3Zlc1tdIHtcclxuICAgIGNvbnN0IHBpZWNlID0gdGhpcy5nZXRQaWVjZShyb3csIGNvbCk7XHJcbiAgICBjb25zdCBtb3ZlczogTW92ZXNbXSA9IFtdO1xyXG5cclxuICAgIGlmIChwaWVjZSAhPT0gbnVsbCkge1xyXG4gICAgICBjb25zdCBkaXJlY3Rpb24gPSBwaWVjZS5jb2xvciA9PT0gUGllY2VDb2xvci5CbGFjayA/IDEgOiAtMTtcclxuICAgICAgY29uc3Qgc3RhcnRSb3cgPSByb3c7XHJcbiAgICAgIGNvbnN0IHN0YXJ0Q29sID0gY29sO1xyXG5cclxuICAgICAgLy8gY2hlY2sgZm9yIHJlZ3VsYXIgcGllY2VzXHJcbiAgICAgIGlmIChwaWVjZS5pc0tpbmcgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgY29uc3QgcG90ZW50aWFsTW92ZXNBcnIgPSBbXHJcbiAgICAgICAgICAvLyByZWd1bGFyIG1vdmVzXHJcbiAgICAgICAgICB7IGVuZFJvdzogc3RhcnRSb3cgKyBkaXJlY3Rpb24sIGVuZENvbDogc3RhcnRDb2wgLSAxIH0sXHJcbiAgICAgICAgICB7IGVuZFJvdzogc3RhcnRSb3cgKyBkaXJlY3Rpb24sIGVuZENvbDogc3RhcnRDb2wgKyAxIH0sXHJcbiAgICAgICAgICAvLyBjYXB0dXJlIG1vdmVzXHJcbiAgICAgICAgICB7IGVuZFJvdzogc3RhcnRSb3cgKyAyICogZGlyZWN0aW9uLCBlbmRDb2w6IHN0YXJ0Q29sIC0gMiB9LFxyXG4gICAgICAgICAgeyBlbmRSb3c6IHN0YXJ0Um93ICsgMiAqIGRpcmVjdGlvbiwgZW5kQ29sOiBzdGFydENvbCArIDIgfSxcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IG1vdmUgb2YgcG90ZW50aWFsTW92ZXNBcnIpIHtcclxuICAgICAgICAgIGlmICh0aGlzLnZhbGlkYXRlTW92ZShzdGFydFJvdywgc3RhcnRDb2wsIG1vdmUuZW5kUm93LCBtb3ZlLmVuZENvbCkpIHtcclxuICAgICAgICAgICAgbW92ZXMucHVzaChuZXcgTW92ZXMoc3RhcnRSb3csIHN0YXJ0Q29sLCBtb3ZlLmVuZFJvdywgbW92ZS5lbmRDb2wpKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gZm9yIGtpbmcgcGllY2VzXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc3Qgc3RhcnRSb3cgPSByb3c7XHJcbiAgICAgICAgY29uc3Qgc3RhcnRDb2wgPSBjb2w7XHJcblxyXG4gICAgICAgIGNvbnN0IHBvdGVudGlhbE1vdmVzQXJyID0gW1xyXG4gICAgICAgICAgLy8gcmVndWxhciBtb3Zlc1xyXG4gICAgICAgICAgeyBlbmRSb3c6IHN0YXJ0Um93ICsgMSwgZW5kQ29sOiBzdGFydENvbCAtIDEgfSxcclxuICAgICAgICAgIHsgZW5kUm93OiBzdGFydFJvdyArIDEsIGVuZENvbDogc3RhcnRDb2wgKyAxIH0sXHJcbiAgICAgICAgICB7IGVuZFJvdzogc3RhcnRSb3cgLSAxLCBlbmRDb2w6IHN0YXJ0Q29sIC0gMSB9LFxyXG4gICAgICAgICAgeyBlbmRSb3c6IHN0YXJ0Um93IC0gMSwgZW5kQ29sOiBzdGFydENvbCArIDEgfSxcclxuICAgICAgICAgIC8vIGNhcHR1cmUgbW92ZXNcclxuICAgICAgICAgIHsgZW5kUm93OiBzdGFydFJvdyArIDIsIGVuZENvbDogc3RhcnRDb2wgLSAyIH0sXHJcbiAgICAgICAgICB7IGVuZFJvdzogc3RhcnRSb3cgKyAyLCBlbmRDb2w6IHN0YXJ0Q29sICsgMiB9LFxyXG4gICAgICAgICAgeyBlbmRSb3c6IHN0YXJ0Um93IC0gMiwgZW5kQ29sOiBzdGFydENvbCAtIDIgfSxcclxuICAgICAgICAgIHsgZW5kUm93OiBzdGFydFJvdyAtIDIsIGVuZENvbDogc3RhcnRDb2wgKyAyIH0sXHJcbiAgICAgICAgXTtcclxuICAgICAgICBmb3IgKGNvbnN0IG1vdmUgb2YgcG90ZW50aWFsTW92ZXNBcnIpIHtcclxuICAgICAgICAgIGlmICh0aGlzLnZhbGlkYXRlTW92ZShzdGFydFJvdywgc3RhcnRDb2wsIG1vdmUuZW5kUm93LCBtb3ZlLmVuZENvbCkpIHtcclxuICAgICAgICAgICAgbW92ZXMucHVzaChuZXcgTW92ZXMoc3RhcnRSb3csIHN0YXJ0Q29sLCBtb3ZlLmVuZFJvdywgbW92ZS5lbmRDb2wpKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIEZpbHRlciBtb3ZlcyBmb3IgY2hhaW5pbmdcclxuICAgIGlmICh0aGlzLmNoYWluaW5nUm93ICE9PSBudWxsICYmIHRoaXMuY2hhaW5pbmdDb2wgIT09IG51bGwpIHtcclxuICAgICAgaWYgKHJvdyAhPT0gdGhpcy5jaGFpbmluZ1JvdyB8fCBjb2wgIT09IHRoaXMuY2hhaW5pbmdDb2wpIHtcclxuICAgICAgICAvLyBJZiBpdCdzIG5vdCB0aGUgY2hhaW5pbmcgcGllY2UsIGl0IGNhbm5vdCBtb3ZlXHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIFJldHVybiBvbmx5IGNhcHR1cmUgbW92ZXMgZm9yIHRoZSBjaGFpbmluZyBwaWVjZVxyXG4gICAgICAgIHJldHVybiBtb3Zlcy5maWx0ZXIoXHJcbiAgICAgICAgICAobW92ZSkgPT4gTWF0aC5hYnMobW92ZS5zdGFydFJvdyAtIG1vdmUuZW5kUm93KSA9PT0gMlxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIENvbmRpdGlvbmFsIHRvIGVuc3VyZSBmb3JjZWQganVtcHNcclxuICAgIGlmICh0aGlzLmZvcmNlZEp1bXBzKSB7XHJcbiAgICAgIGlmICh0aGlzLmN1cnJlbnRQbGF5ZXIuY2FwdHVyZXNBdmFpbGFibGUpIHtcclxuICAgICAgICByZXR1cm4gbW92ZXMuZmlsdGVyKChtb3ZlKSA9PlxyXG4gICAgICAgICAgdGhpcy5jYW5DYXB0dXJlKFxyXG4gICAgICAgICAgICBtb3ZlLnN0YXJ0Um93LFxyXG4gICAgICAgICAgICBtb3ZlLnN0YXJ0Q29sLFxyXG4gICAgICAgICAgICBtb3ZlLmVuZFJvdyxcclxuICAgICAgICAgICAgbW92ZS5lbmRDb2xcclxuICAgICAgICAgIClcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbW92ZXM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDaGVja3MgaWYgYSBwaWVjZSBjYW4gY2FwdHVyZSBhbiBvcHBvbmVudCdzIHBpZWNlLlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydFJvdyAtIFRoZSBzdGFydGluZyByb3cgb2YgdGhlIGNhcHR1cmluZyBwaWVjZS5cclxuICAgKiBAcGFyYW0ge251bWJlcn0gc3RhcnRDb2wgLSBUaGUgc3RhcnRpbmcgY29sdW1uIG9mIHRoZSBjYXB0dXJpbmcgcGllY2UuXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGVuZFJvdyAtIFRoZSByb3cgd2hlcmUgdGhlIGNhcHR1cmUgd291bGQgZW5kLlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBlbmRDb2wgLSBUaGUgY29sdW1uIHdoZXJlIHRoZSBjYXB0dXJlIHdvdWxkIGVuZC5cclxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gLSBUcnVlIGlmIGEgY2FwdHVyZSBpcyBwb3NzaWJsZSwgZmFsc2Ugb3RoZXJ3aXNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjYW5DYXB0dXJlKFxyXG4gICAgc3RhcnRSb3c6IG51bWJlcixcclxuICAgIHN0YXJ0Q29sOiBudW1iZXIsXHJcbiAgICBlbmRSb3c6IG51bWJlcixcclxuICAgIGVuZENvbDogbnVtYmVyXHJcbiAgKTogYm9vbGVhbiB7XHJcbiAgICBpZiAoTWF0aC5hYnMoc3RhcnRSb3cgLSBlbmRSb3cpID09IDIgJiYgTWF0aC5hYnMoc3RhcnRDb2wgLSBlbmRDb2wpID09IDIpIHtcclxuICAgICAgY29uc3QgbWlkZGxlUm93ID0gKHN0YXJ0Um93ICsgZW5kUm93KSAvIDI7XHJcbiAgICAgIGNvbnN0IG1pZGRsZUNvbCA9IChzdGFydENvbCArIGVuZENvbCkgLyAyO1xyXG5cclxuICAgICAgY29uc3QgbWlkZGxlUGllY2UgPSB0aGlzLmdldFBpZWNlKG1pZGRsZVJvdywgbWlkZGxlQ29sKTtcclxuICAgICAgY29uc3QgY3VycmVudFBpZWNlID0gdGhpcy5nZXRQaWVjZShzdGFydFJvdywgc3RhcnRDb2wpO1xyXG5cclxuICAgICAgaWYgKGN1cnJlbnRQaWVjZSAhPT0gbnVsbCAmJiBtaWRkbGVQaWVjZSAhPT0gbnVsbCkge1xyXG4gICAgICAgIGlmIChtaWRkbGVQaWVjZS5jb2xvciAhPT0gY3VycmVudFBpZWNlLmNvbG9yKSB7XHJcbiAgICAgICAgICBjb25zdCBkZXN0aW5hdGlvblNxdWFyZSA9IHRoaXMuZ2V0UGllY2UoZW5kUm93LCBlbmRDb2wpO1xyXG4gICAgICAgICAgaWYgKGRlc3RpbmF0aW9uU3F1YXJlID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogTW92ZXMgYSBwaWVjZSBmcm9tIG9uZSBwb3NpdGlvbiB0byBhbm90aGVyLCBpZiB0aGUgbW92ZSBpcyB2YWxpZC5cclxuICAgKiBAcGFyYW0ge251bWJlcn0gc3RhcnRSb3cgLSBUaGUgc3RhcnRpbmcgcm93IG9mIHRoZSBwaWVjZS5cclxuICAgKiBAcGFyYW0ge251bWJlcn0gc3RhcnRDb2wgLSBUaGUgc3RhcnRpbmcgY29sdW1uIG9mIHRoZSBwaWVjZS5cclxuICAgKiBAcGFyYW0ge251bWJlcn0gZW5kUm93IC0gVGhlIGVuZGluZyByb3cgb2YgdGhlIG1vdmUuXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGVuZENvbCAtIFRoZSBlbmRpbmcgY29sdW1uIG9mIHRoZSBtb3ZlLlxyXG4gICAqIEhhbmRsZXMgcGllY2UgY2FwdHVyZXMsIGNoYWluIGNhcHR1cmVzLCBwaWVjZSBwcm9tb3Rpb25zIGFuZCBjaGFuZ2Ugb2YgdHVybnMuXHJcbiAgICovXHJcbiAgcHVibGljIG1vdmVQaWVjZShcclxuICAgIHN0YXJ0Um93OiBudW1iZXIsXHJcbiAgICBzdGFydENvbDogbnVtYmVyLFxyXG4gICAgZW5kUm93OiBudW1iZXIsXHJcbiAgICBlbmRDb2w6IG51bWJlclxyXG4gICk6IHZvaWQge1xyXG4gICAgY29uc3QgcGllY2UgPSB0aGlzLmdldFBpZWNlKHN0YXJ0Um93LCBzdGFydENvbCk7XHJcbiAgICBsZXQgY2FwdHVyZWRBbHJlYWR5ID0gZmFsc2U7XHJcbiAgICBpZiAocGllY2UgJiYgcGllY2UuY29sb3IgPT09IHRoaXMuY3VycmVudFBsYXllci5jb2xvcikge1xyXG4gICAgICBpZiAodGhpcy52YWxpZGF0ZU1vdmUoc3RhcnRSb3csIHN0YXJ0Q29sLCBlbmRSb3csIGVuZENvbCkpIHtcclxuICAgICAgICBpZiAocGllY2UgIT09IG51bGwpIHtcclxuICAgICAgICAgIGNvbnN0IG1pZGRsZVJvdyA9IE1hdGguZmxvb3IoKHN0YXJ0Um93ICsgZW5kUm93KSAvIDIpO1xyXG4gICAgICAgICAgY29uc3QgbWlkZGxlQ29sID0gTWF0aC5mbG9vcigoc3RhcnRDb2wgKyBlbmRDb2wpIC8gMik7XHJcbiAgICAgICAgICBjb25zdCBlbmVteVBpZWNlID0gdGhpcy5nZXRQaWVjZShtaWRkbGVSb3csIG1pZGRsZUNvbCk7XHJcbiAgICAgICAgICBpZiAodGhpcy5jYW5DYXB0dXJlKHN0YXJ0Um93LCBzdGFydENvbCwgZW5kUm93LCBlbmRDb2wpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlUGllY2VDYXB0dXJlKGVuZW15UGllY2UpO1xyXG4gICAgICAgICAgICBpZiAoZW5lbXlQaWVjZT8uaXNLaW5nID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudFBsYXllciA9PT0gdGhpcy5wbGF5ZXJzWzBdKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXllcnNbMV0ubnVtT2ZLaW5ncyAtPSAxO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXllcnNbMF0ubnVtT2ZLaW5ncyAtPSAxO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmJvYXJkW21pZGRsZVJvd11bbWlkZGxlQ29sXSA9IG51bGw7XHJcbiAgICAgICAgICAgIGNhcHR1cmVkQWxyZWFkeSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhaW5pbmdSb3cgPSBlbmRSb3c7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhaW5pbmdDb2wgPSBlbmRDb2w7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjYXB0dXJlZEFscmVhZHkgPSBmYWxzZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuYm9hcmRbc3RhcnRSb3ddW3N0YXJ0Q29sXSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5ib2FyZFtlbmRSb3ddW2VuZENvbF0gPSBwaWVjZTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFBsYXllciA9PT0gdGhpcy5wbGF5ZXJzWzBdKSB7XHJcbiAgICAgICAgICB0aGlzLnBsYXllck9uZU1vdmVzLnB1c2goXHJcbiAgICAgICAgICAgIG5ldyBNb3ZlcyhzdGFydFJvdywgc3RhcnRDb2wsIGVuZFJvdywgZW5kQ29sKVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5wbGF5ZXJUd29Nb3Zlcy5wdXNoKFxyXG4gICAgICAgICAgICBuZXcgTW92ZXMoc3RhcnRSb3csIHN0YXJ0Q29sLCBlbmRSb3csIGVuZENvbClcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocGllY2UuaXNLaW5nID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgaWYgKHRoaXMucHJvbW90ZVRvS2luZyhlbmRSb3csIGVuZENvbCkgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgcGllY2UubWFrZUtpbmcoKTtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50UGxheWVyLm51bU9mS2luZ3MgKz0gMTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY2FwdHVyZXNQb3NzaWJsZSgpO1xyXG4gICAgICAgIGNvbnN0IG5leHRDYXB0dXJlcyA9IHRoaXMuY2hhaW5DYXB0dXJlcyhlbmRSb3csIGVuZENvbCk7XHJcbiAgICAgICAgaWYgKG5leHRDYXB0dXJlcyAmJiBjYXB0dXJlZEFscmVhZHkgPT09IHRydWUpIHtcclxuICAgICAgICAgIGlmIChuZXh0Q2FwdHVyZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhuZXh0Q2FwdHVyZXMpO1xyXG4gICAgICAgICAgICB0aGlzLmNoYWluaW5nUm93ID0gZW5kUm93O1xyXG4gICAgICAgICAgICB0aGlzLmNoYWluaW5nQ29sID0gZW5kQ29sO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNoYWluaW5nUm93ID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5jaGFpbmluZ0NvbCA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlVHVybigpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLmNoYWluaW5nUm93ID0gbnVsbDtcclxuICAgICAgICAgIHRoaXMuY2hhaW5pbmdDb2wgPSBudWxsO1xyXG4gICAgICAgICAgdGhpcy5jaGFuZ2VUdXJuKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zb2xlLmxvZyh0aGlzLm51bU9mVHVybnMpO1xyXG4gICAgY29uc29sZS5sb2coXHJcbiAgICAgIGBOdW1iZXIgb2YgQmxhY2sgUGllY2VzOiAke3RoaXMucGxheWVyc1sxXS5udW1PZlBpZWNlc30sIEtpbmdzOiAke3RoaXMucGxheWVyc1sxXS5udW1PZktpbmdzfWBcclxuICAgICk7XHJcbiAgICBjb25zb2xlLmxvZyhcclxuICAgICAgYE51bWJlciBvZiBSZWQgUGllY2VzOiAke3RoaXMucGxheWVyc1swXS5udW1PZlBpZWNlc30sIEtpbmdzOiAke3RoaXMucGxheWVyc1swXS5udW1PZktpbmdzfWBcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBIYW5kbGVzIHRoZSBjYXB0dXJlIG9mIGEgcGllY2UsIHVwZGF0aW5nIHRoZSBjYXB0dXJpbmcgcGxheWVyJ3Mgc2NvcmUgYW5kIGNhcHR1cmVkIHBpZWNlcyBjb3VudC5cclxuICAgKiBAcGFyYW0ge0NoZWNrZXJzUGllY2UgfCBudWxsfSBwaWVjZSAtIFRoZSBwaWVjZSBiZWluZyBjYXB0dXJlZC5cclxuICAgKi9cclxuICBwdWJsaWMgaGFuZGxlUGllY2VDYXB0dXJlKHBpZWNlOiBDaGVja2Vyc1BpZWNlIHwgbnVsbCk6IHZvaWQge1xyXG4gICAgaWYgKHBpZWNlPy5pc0tpbmcgPT09IHRydWUpIHtcclxuICAgICAgdGhpcy5jdXJyZW50UGxheWVyLnVwZGF0ZVNjb3JlKDIpO1xyXG4gICAgICB0aGlzLmN1cnJlbnRQbGF5ZXIudXBkYXRlQ2FwdHVyZWRQaWVjZXMoMSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmN1cnJlbnRQbGF5ZXIudXBkYXRlU2NvcmUoMSk7XHJcbiAgICAgIHRoaXMuY3VycmVudFBsYXllci51cGRhdGVDYXB0dXJlZFBpZWNlcygxKTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmN1cnJlbnRQbGF5ZXIgPT09IHRoaXMucGxheWVyc1swXSkge1xyXG4gICAgICB0aGlzLnBsYXllcnNbMV0ubnVtT2ZQaWVjZXMgLT0gMTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMucGxheWVyc1swXS5udW1PZlBpZWNlcyAtPSAxO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUHJvbW90ZXMgYSBwaWVjZSB0byBhIGtpbmcgaWYgaXQgcmVhY2hlcyB0aGUgb3Bwb3NpdGUgZW5kIG9mIHRoZSBib2FyZC5cclxuICAgKiBAcGFyYW0ge251bWJlcn0gcm93IC0gVGhlIHJvdyBvZiB0aGUgcGllY2UuXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGNvbCAtIFRoZSBjb2x1bW4gb2YgdGhlIHBpZWNlLlxyXG4gICAqIEByZXR1cm5zIHtib29sZWFufSAtIFJldHVybiB3aGV0aGVyIG9yIG5vdCBhIHBpZWNlIHdhcyBwcm9tb3RlZFxyXG4gICAqL1xyXG4gIHB1YmxpYyBwcm9tb3RlVG9LaW5nKHJvdzogbnVtYmVyLCBjb2w6IG51bWJlcik6IGJvb2xlYW4ge1xyXG4gICAgY29uc3QgcGllY2UgPSB0aGlzLmdldFBpZWNlKHJvdywgY29sKTtcclxuICAgIGlmIChwaWVjZT8uY29sb3IgPT0gUGllY2VDb2xvci5SZWQgJiYgcm93ID09IDApIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2UgaWYgKHBpZWNlPy5jb2xvciA9PSBQaWVjZUNvbG9yLkJsYWNrICYmIHJvdyA9PSA3KSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRGV0ZXJtaW5lcyBpZiBhIHBpZWNlIGNhbiBtYWtlIGFkZGl0aW9uYWwgY2FwdHVyZXMgYWZ0ZXIgYW4gaW5pdGlhbCBjYXB0dXJlLlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSByb3cgLSBUaGUgcm93IG9mIHRoZSBjYXB0dXJpbmcgcGllY2UuXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGNvbCAtIFRoZSBjb2x1bW4gb2YgdGhlIGNhcHR1cmluZyBwaWVjZS5cclxuICAgKiBAcmV0dXJucyB7e2VuZFJvdzogbnVtYmVyLCBlbmRDb2w6IG51bWJlcn1bXX0gLSBBbiBhcnJheSBvZiBwb3RlbnRpYWwgY2FwdHVyZSBtb3Zlcy5cclxuICAgKi9cclxuICBwdWJsaWMgY2hhaW5DYXB0dXJlcyhyb3c6IG51bWJlciwgY29sOiBudW1iZXIpIHtcclxuICAgIGNvbnN0IG1vdmVzID0gdGhpcy5wb3NzaWJsZU1vdmVzKHJvdywgY29sKTtcclxuICAgIGNvbnN0IGNhcHR1cmVNb3ZlcyA9IG1vdmVzLmZpbHRlcihcclxuICAgICAgKG1vdmUpID0+IE1hdGguYWJzKG1vdmUuc3RhcnRSb3cgLSBtb3ZlLmVuZFJvdykgPT09IDJcclxuICAgICk7XHJcbiAgICByZXR1cm4gY2FwdHVyZU1vdmVzLm1hcCgobW92ZSkgPT4gKHtcclxuICAgICAgZW5kUm93OiBtb3ZlLmVuZFJvdyxcclxuICAgICAgZW5kQ29sOiBtb3ZlLmVuZENvbCxcclxuICAgIH0pKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENoZWNrcyBpZiB0aGUgY3VycmVudCBwbGF5ZXIgaGFzIGFueSBwb3NzaWJsZSBjYXB0dXJlcyBvbiB0aGUgYm9hcmQuXHJcbiAgICogQHJldHVybnMge2Jvb2xlYW59IC0gVHJ1ZSBpZiB0aGVyZSBhcmUgcG9zc2libGUgY2FwdHVyZXMsIGZhbHNlIG90aGVyd2lzZS5cclxuICAgKi9cclxuICBwdWJsaWMgY2FwdHVyZXNQb3NzaWJsZSgpOiBib29sZWFuIHtcclxuICAgIGxldCBmbGFnID0gZmFsc2U7XHJcbiAgICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCA4OyByb3crKykge1xyXG4gICAgICBmb3IgKGxldCBjb2wgPSAwOyBjb2wgPCA4OyBjb2wrKykge1xyXG4gICAgICAgIGNvbnN0IHBpZWNlID0gdGhpcy5nZXRQaWVjZShyb3csIGNvbCk7XHJcbiAgICAgICAgaWYgKHBpZWNlICYmIHBpZWNlLmNvbG9yID09PSB0aGlzLmN1cnJlbnRQbGF5ZXIuY29sb3IpIHtcclxuICAgICAgICAgIGNvbnN0IG1vdmVzID0gdGhpcy5wb3NzaWJsZU1vdmVzKHJvdywgY29sKTtcclxuICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgbW92ZXMuc29tZSgobW92ZSkgPT4gTWF0aC5hYnMobW92ZS5zdGFydFJvdyAtIG1vdmUuZW5kUm93KSA9PT0gMilcclxuICAgICAgICAgICkge1xyXG4gICAgICAgICAgICBwaWVjZS5jYXB0dXJlQ2hlY2soKTtcclxuICAgICAgICAgICAgZmxhZyA9IHRydWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmxhZztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBpc1Z1bG5lcmFibGUocm93OiBudW1iZXIsIGNvbDogbnVtYmVyKTogYm9vbGVhbiB7XHJcbiAgICBjb25zdCBwaWVjZSA9IHRoaXMuZ2V0UGllY2Uocm93LCBjb2wpO1xyXG4gICAgaWYgKCFwaWVjZSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgIC8vIENoZWNrIGRpYWdvbmFsbHkgaW4gYWxsIGRpcmVjdGlvbnMgZm9yIG9wcG9uZW50IHBpZWNlc1xyXG4gICAgY29uc3QgZGlyZWN0aW9ucyA9XHJcbiAgICAgIHBpZWNlLmNvbG9yID09PSBQaWVjZUNvbG9yLkJsYWNrXHJcbiAgICAgICAgPyBbXHJcbiAgICAgICAgICAgIFsxLCAtMV0sXHJcbiAgICAgICAgICAgIFsxLCAxXSxcclxuICAgICAgICAgIF1cclxuICAgICAgICA6IFtcclxuICAgICAgICAgICAgWy0xLCAtMV0sXHJcbiAgICAgICAgICAgIFstMSwgMV0sXHJcbiAgICAgICAgICBdO1xyXG4gICAgZm9yIChsZXQgW2RyLCBkY10gb2YgZGlyZWN0aW9ucykge1xyXG4gICAgICBjb25zdCBvcHBvbmVudFJvdyA9IHJvdyArIGRyO1xyXG4gICAgICBjb25zdCBvcHBvbmVudENvbCA9IGNvbCArIGRjO1xyXG4gICAgICBjb25zdCBsYW5kaW5nUm93ID0gb3Bwb25lbnRSb3cgKyBkcjtcclxuICAgICAgY29uc3QgbGFuZGluZ0NvbCA9IG9wcG9uZW50Q29sICsgZGM7XHJcblxyXG4gICAgICAvLyBDaGVjayBpZiB0aGUgb3Bwb25lbnQgYW5kIGxhbmRpbmcgcG9zaXRpb25zIGFyZSBvbiB0aGUgYm9hcmRcclxuICAgICAgaWYgKFxyXG4gICAgICAgIHRoaXMuaXNWYWxpZFBvc2l0aW9uKG9wcG9uZW50Um93LCBvcHBvbmVudENvbCkgJiZcclxuICAgICAgICB0aGlzLmlzVmFsaWRQb3NpdGlvbihsYW5kaW5nUm93LCBsYW5kaW5nQ29sKVxyXG4gICAgICApIHtcclxuICAgICAgICBjb25zdCBvcHBvbmVudFBpZWNlID0gdGhpcy5nZXRQaWVjZShvcHBvbmVudFJvdywgb3Bwb25lbnRDb2wpO1xyXG4gICAgICAgIGNvbnN0IGxhbmRpbmdTcG90ID0gdGhpcy5nZXRQaWVjZShsYW5kaW5nUm93LCBsYW5kaW5nQ29sKTtcclxuXHJcbiAgICAgICAgLy8gSWYgdGhlcmUgaXMgYW4gb3Bwb25lbnQgcGllY2UgYW5kIHRoZSBsYW5kaW5nIHNwb3QgYWZ0ZXIgY2FwdHVyZSBpcyBlbXB0eVxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIG9wcG9uZW50UGllY2UgJiZcclxuICAgICAgICAgIG9wcG9uZW50UGllY2UuY29sb3IgIT09IHBpZWNlLmNvbG9yICYmXHJcbiAgICAgICAgICAhbGFuZGluZ1Nwb3RcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBpc1ZhbGlkUG9zaXRpb24ocm93OiBudW1iZXIsIGNvbDogbnVtYmVyKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gcm93ID49IDAgJiYgcm93IDwgOCAmJiBjb2wgPj0gMCAmJiBjb2wgPCA4O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRGV0ZXJtaW5lcyBpZiBhIHBsYXllciBoYXMgcnVuIG91dCBvZiBwaWVjZXMgb24gdGhlIGJvYXJkLlxyXG4gICAqIEBwYXJhbSB7UGxheWVyfSBwbGF5ZXIgLSBUaGUgcGxheWVyIHRvIGNoZWNrIGZvciByZW1haW5pbmcgcGllY2VzLlxyXG4gICAqIEByZXR1cm5zIHtib29sZWFufSAtIFRydWUgaWYgdGhlIHBsYXllciBoYXMgbm8gcGllY2VzIGxlZnQsIGZhbHNlIG90aGVyd2lzZS5cclxuICAgKi9cclxuICBwdWJsaWMgbm9QaWVjZXNMZWZ0KHBsYXllcjogUGxheWVyKTogYm9vbGVhbiB7XHJcbiAgICBpZiAocGxheWVyLm51bU9mUGllY2VzID09PSAwKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2hlY2tzIGlmIHRoZSBjdXJyZW50IHBsYXllciBjYW5ub3QgbWFrZSBhbnkgdmFsaWQgbW92ZXMuXHJcbiAgICogQHJldHVybnMge2Jvb2xlYW59IC0gVHJ1ZSBpZiBubyB2YWxpZCBtb3ZlcyBhcmUgYXZhaWxhYmxlLCBmYWxzZSBvdGhlcndpc2UuXHJcbiAgICovXHJcbiAgcHVibGljIG5vVmFsaWRNb3ZlcygpOiBib29sZWFuIHtcclxuICAgIGxldCB2YWxpZE1vdmVzID0gMDtcclxuICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IDg7IHJvdysrKSB7XHJcbiAgICAgIGZvciAobGV0IGNvbCA9IDA7IGNvbCA8IDg7IGNvbCsrKSB7XHJcbiAgICAgICAgY29uc3QgcGllY2UgPSB0aGlzLmdldFBpZWNlKHJvdywgY29sKTtcclxuICAgICAgICBpZiAocGllY2UgJiYgcGllY2UuY29sb3IgPT09IHRoaXMuY3VycmVudFBsYXllci5jb2xvcikge1xyXG4gICAgICAgICAgaWYgKHRoaXMucG9zc2libGVNb3Zlcyhyb3csIGNvbCkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB2YWxpZE1vdmVzKys7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAodmFsaWRNb3ZlcyA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENoZWNrcyBpZiB0aGUgZ2FtZSBoYXMgZW5kZWQgYW5kIGRldGVybWluZXMgdGhlIHdpbm5lci5cclxuICAgKi9cclxuICBwdWJsaWMgY2hlY2tFbmRPZkdhbWUoKTogdm9pZCB7XHJcbiAgICBpZiAoXHJcbiAgICAgIHRoaXMubm9QaWVjZXNMZWZ0KHRoaXMucGxheWVyc1swXSkgJiZcclxuICAgICAgdGhpcy5wbGF5ZXJzWzFdLm51bU9mUGllY2VzID49IDFcclxuICAgICkge1xyXG4gICAgICB0aGlzLmN1cnJlbnRTdGF0ZSA9IFN0YXRlLmdhbWVGaW5pc2hlZDtcclxuICAgICAgdGhpcy53aW5uZXIgPSB0aGlzLnBsYXllcnNbMV07XHJcbiAgICB9IGVsc2UgaWYgKFxyXG4gICAgICB0aGlzLm5vUGllY2VzTGVmdCh0aGlzLnBsYXllcnNbMV0pICYmXHJcbiAgICAgIHRoaXMucGxheWVyc1swXS5udW1PZlBpZWNlcyA+PSAxXHJcbiAgICApIHtcclxuICAgICAgdGhpcy5jdXJyZW50U3RhdGUgPSBTdGF0ZS5nYW1lRmluaXNoZWQ7XHJcbiAgICAgIHRoaXMud2lubmVyID0gdGhpcy5wbGF5ZXJzWzBdO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLm5vVmFsaWRNb3ZlcygpKSB7XHJcbiAgICAgIHRoaXMuY3VycmVudFN0YXRlID0gU3RhdGUuZ2FtZUZpbmlzaGVkO1xyXG4gICAgICBpZiAodGhpcy5wbGF5ZXJzWzBdLnNjb3JlID4gdGhpcy5wbGF5ZXJzWzFdLnNjb3JlKSB7XHJcbiAgICAgICAgdGhpcy53aW5uZXIgPSB0aGlzLnBsYXllcnNbMF07XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5wbGF5ZXJzWzBdLnNjb3JlIDwgdGhpcy5wbGF5ZXJzWzFdLnNjb3JlKSB7XHJcbiAgICAgICAgdGhpcy53aW5uZXIgPSB0aGlzLnBsYXllcnNbMV07XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy53aW5uZXIgPSBudWxsO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmN1cnJlbnRTdGF0ZSA9IFN0YXRlLmluUHJvZ3Jlc3M7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBBSSBQbGF5ZXIgU3BlY2lmaWMgTWV0aG9kczpcclxuICAvKipcclxuICAgKiBTZXRzIHBsYXllciAyIGFzIHRoZSBBSVxyXG4gICAqIEBwYXJhbSBhaVBsYXllciAtIFRoZSBBSSBwbGF5ZXJcclxuICAgKi9cclxuICBwdWJsaWMgc2V0QUkoYWlQbGF5ZXI6IENoZWNrZXJzQUkpOiB2b2lkIHtcclxuICAgIHRoaXMucGxheWVyc1sxXSA9IGFpUGxheWVyO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIEFJIHBsYXllciB1c2VzIHRoaXMgbWV0aG9kIHRvIHNpbXVsYXRlIG1vdmVzIG9uIHRoZSBib2FyZFxyXG4gICAqIEBwYXJhbSBzdGFydFJvdyAtIFN0YXJ0aW5nIHJvdyBvZiB0aGUgbW92aW5nIHBpZWNlXHJcbiAgICogQHBhcmFtIHN0YXJ0Q29sIC0gU3RhcnRpbmcgY29sdW1uIG9mIHRoZSBtb3ZpbmcgcGllY2VcclxuICAgKiBAcGFyYW0gZW5kUm93IC0gRW5kaW5nIHJvdyBvZiB0aGUgbW92aW5nIHBpZWNlXHJcbiAgICogQHBhcmFtIGVuZENvbCAtIEVuZGluZyBjb2x1bW4gb2YgdGhlIG1vdmluZyBwaWVjZVxyXG4gICAqIEByZXR1cm5zIHtbe3BpZWNlOiBDaGVja2Vyc1BpZWNlLCByb3c6IG51bWJlciwgY29sOiBudW1iZXJ9W10sIGJvb2xlYW4sIG51bWJlciwgbnVtYmVyXX0gLSBSZXR1cm4gYW4gYXJyYXkgY29udGFpbmFpbmcgYW4gYXJyYXkgb2YgdGhlIHBpZWNlcyBjYXB0dXJlZCBhcyB3ZWxsIGFzXHJcbiAgICogdGhlaXIgcG9zaXRpb25zLCBhIGJvb2xlYW4gdHJhY2tpbmcgd2hldGhlciB0aGUgbW92aW5nIHBpZWNlIHdhcyBwcm9tb3RlZCBhbmQgdGhlIGZpbmFsIHJvdyBhbmQgY29sdW1uIG9mIHRoZSBwaWVjZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzaW11bGF0ZU1vdmUoXHJcbiAgICBzdGFydFJvdzogbnVtYmVyLFxyXG4gICAgc3RhcnRDb2w6IG51bWJlcixcclxuICAgIGVuZFJvdzogbnVtYmVyLFxyXG4gICAgZW5kQ29sOiBudW1iZXJcclxuICApOiBbXHJcbiAgICB7IHBpZWNlOiBDaGVja2Vyc1BpZWNlOyByb3c6IG51bWJlcjsgY29sOiBudW1iZXIgfVtdLFxyXG4gICAgYm9vbGVhbixcclxuICAgIG51bWJlcixcclxuICAgIG51bWJlclxyXG4gIF0ge1xyXG4gICAgY29uc3QgcGllY2UgPSB0aGlzLmdldFBpZWNlKHN0YXJ0Um93LCBzdGFydENvbCk7XHJcbiAgICAvLyBrZWVwIHRyYWNrIG9mIGFsbCBjYXB0dXJlZCBwaWVjZXMgb3Igbm9uZSBpZiBub25lIGFyZSBjYXB0dXJlZFxyXG4gICAgbGV0IGNhcHR1cmVkUGllY2VzOiB7IHBpZWNlOiBDaGVja2Vyc1BpZWNlOyByb3c6IG51bWJlcjsgY29sOiBudW1iZXIgfVtdID1cclxuICAgICAgW107XHJcbiAgICBsZXQgd2FzUHJvbW90ZWQgPSBmYWxzZTtcclxuICAgIGxldCBjdXJyZW50Um93ID0gc3RhcnRSb3csXHJcbiAgICAgIGN1cnJlbnRDb2wgPSBzdGFydENvbDtcclxuICAgIGxldCBtb3ZlUm93ID0gZW5kUm93LFxyXG4gICAgICBtb3ZlQ29sID0gZW5kQ29sO1xyXG5cclxuICAgIGlmIChwaWVjZSAmJiB0aGlzLnZhbGlkYXRlTW92ZShzdGFydFJvdywgc3RhcnRDb2wsIGVuZFJvdywgZW5kQ29sKSkge1xyXG4gICAgICBsZXQgY2FuQ29udGludWVDYXB0dXJlID0gdHJ1ZTtcclxuXHJcbiAgICAgIHdoaWxlIChjYW5Db250aW51ZUNhcHR1cmUpIHtcclxuICAgICAgICBpZiAodGhpcy5jYW5DYXB0dXJlKGN1cnJlbnRSb3csIGN1cnJlbnRDb2wsIG1vdmVSb3csIG1vdmVDb2wpKSB7XHJcbiAgICAgICAgICBjb25zdCBtaWRkbGVSb3cgPSBNYXRoLmZsb29yKChjdXJyZW50Um93ICsgbW92ZVJvdykgLyAyKTtcclxuICAgICAgICAgIGNvbnN0IG1pZGRsZUNvbCA9IE1hdGguZmxvb3IoKGN1cnJlbnRDb2wgKyBtb3ZlQ29sKSAvIDIpO1xyXG4gICAgICAgICAgY29uc3QgY2FwdHVyZWRQaWVjZSA9IHRoaXMuZ2V0UGllY2UobWlkZGxlUm93LCBtaWRkbGVDb2wpO1xyXG5cclxuICAgICAgICAgIC8vIHN0b3JlIGNhcHR1cmVkIHBpZWNlcyBpbiB0aGlzIGFycmF5XHJcbiAgICAgICAgICBpZiAoY2FwdHVyZWRQaWVjZSkge1xyXG4gICAgICAgICAgICBjYXB0dXJlZFBpZWNlcy5wdXNoKHtcclxuICAgICAgICAgICAgICBwaWVjZTogY2FwdHVyZWRQaWVjZSxcclxuICAgICAgICAgICAgICByb3c6IG1pZGRsZVJvdyxcclxuICAgICAgICAgICAgICBjb2w6IG1pZGRsZUNvbCxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuYm9hcmRbbWlkZGxlUm93XVttaWRkbGVDb2xdID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5ib2FyZFtjdXJyZW50Um93XVtjdXJyZW50Q29sXSA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuYm9hcmRbbW92ZVJvd11bbW92ZUNvbF0gPSBwaWVjZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChwaWVjZS5pc0tpbmcgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgaWYgKHRoaXMucHJvbW90ZVRvS2luZyhtb3ZlUm93LCBtb3ZlQ29sKSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgcGllY2UubWFrZUtpbmcoKTtcclxuICAgICAgICAgICAgICAgIHdhc1Byb21vdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHVwZGF0ZSBjdXJyZW50IHJvdyBhbmQgY29sXHJcbiAgICAgICAgICAgIGN1cnJlbnRSb3cgPSBtb3ZlUm93O1xyXG4gICAgICAgICAgICBjdXJyZW50Q29sID0gbW92ZUNvbDtcclxuICAgICAgICAgICAgY29uc3QgbmV4dENhcHR1cmVzID0gdGhpcy5jaGFpbkNhcHR1cmVzKG1vdmVSb3csIG1vdmVDb2wpO1xyXG4gICAgICAgICAgICBjYW5Db250aW51ZUNhcHR1cmUgPSBuZXh0Q2FwdHVyZXMubGVuZ3RoID4gMDtcclxuXHJcbiAgICAgICAgICAgIGlmIChjYW5Db250aW51ZUNhcHR1cmUpIHtcclxuICAgICAgICAgICAgICAvLyBhc3N1bWluZyBhaSB3aWxsIGNob29zZSBmaXJzdCBjYXB0dXJlIG1vdmVcclxuICAgICAgICAgICAgICBtb3ZlUm93ID0gbmV4dENhcHR1cmVzWzBdLmVuZFJvdztcclxuICAgICAgICAgICAgICBtb3ZlQ29sID0gbmV4dENhcHR1cmVzWzBdLmVuZENvbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLmJvYXJkW2N1cnJlbnRSb3ddW2N1cnJlbnRDb2xdID0gbnVsbDtcclxuICAgICAgICAgIHRoaXMuYm9hcmRbbW92ZVJvd11bbW92ZUNvbF0gPSBwaWVjZTtcclxuICAgICAgICAgIGN1cnJlbnRSb3cgPSBtb3ZlUm93O1xyXG4gICAgICAgICAgY3VycmVudENvbCA9IG1vdmVDb2w7XHJcblxyXG4gICAgICAgICAgaWYgKHBpZWNlLmlzS2luZyA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucHJvbW90ZVRvS2luZyhtb3ZlUm93LCBtb3ZlQ29sKSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgIHBpZWNlLm1ha2VLaW5nKCk7XHJcbiAgICAgICAgICAgICAgd2FzUHJvbW90ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBjYW5Db250aW51ZUNhcHR1cmUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIEtlZXAgdHJhY2sgb2YgY2FwdHVyZWRQaWVjZSBpZiB0aGVyZSBpcyBvbmUgdG8gcmV2ZXJzZSBpdCBpbiB0aGUgZ2FtZSBzdGF0ZSBhZnRlciB0aGUgc2ltdWxhdGlvblxyXG4gICAgcmV0dXJuIFtjYXB0dXJlZFBpZWNlcywgd2FzUHJvbW90ZWQsIGN1cnJlbnRSb3csIGN1cnJlbnRDb2xdO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIG5ldyAnc2ltdWxhdGVNb3ZlJyBmdW5jdGlvbiBmb3IgdGhlIEFJIHRvIHVzZSwgdG8gc2FmZWx5IG1ha2UgbW92ZXMgb24gdGhlIGJvYXJkIGR1cmluZyBtaW5pbWF4IHdpdGhvdXRcclxuICAgKiBpbmNvcnJlY3RseSBhbHRlcmluZyB0aGUgYWN0dWFsIGdhbWUgc3RhdGVcclxuICAgKiBAcGFyYW0gc3RhcnRSb3cgLSBTdGFydGluZyByb3cgb2YgdGhlIG1vdmluZyBwaWVjZVxyXG4gICAqIEBwYXJhbSBzdGFydENvbCAtIFN0YXJ0aW5nIGNvbHVtbiBvZiB0aGUgbW92aW5nIHBpZWNlXHJcbiAgICogQHBhcmFtIGVuZFJvdyAtIEVuZGluZyByb3cgb2YgdGhlIG1vdmluZyBwaWVjZVxyXG4gICAqIEBwYXJhbSBlbmRDb2wgLSBFbmRpbmcgY29sdW1uIG9mIHRoZSBtb3ZpbmcgcGllY2VcclxuICAgKlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtb3ZlQUkoXHJcbiAgICBzdGFydFJvdzogbnVtYmVyLFxyXG4gICAgc3RhcnRDb2w6IG51bWJlcixcclxuICAgIGVuZFJvdzogbnVtYmVyLFxyXG4gICAgZW5kQ29sOiBudW1iZXJcclxuICApOiB2b2lkIHtcclxuICAgIGNvbnN0IHBpZWNlID0gdGhpcy5nZXRQaWVjZShzdGFydFJvdywgc3RhcnRDb2wpO1xyXG4gICAgbGV0IGNhcHR1cmVkQWxyZWFkeSA9IGZhbHNlO1xyXG4gICAgaWYgKHBpZWNlICYmIHBpZWNlLmNvbG9yID09PSB0aGlzLmN1cnJlbnRQbGF5ZXIuY29sb3IpIHtcclxuICAgICAgaWYgKHRoaXMudmFsaWRhdGVNb3ZlKHN0YXJ0Um93LCBzdGFydENvbCwgZW5kUm93LCBlbmRDb2wpKSB7XHJcbiAgICAgICAgaWYgKHBpZWNlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICBjb25zdCBtaWRkbGVSb3cgPSBNYXRoLmZsb29yKChzdGFydFJvdyArIGVuZFJvdykgLyAyKTtcclxuICAgICAgICAgIGNvbnN0IG1pZGRsZUNvbCA9IE1hdGguZmxvb3IoKHN0YXJ0Q29sICsgZW5kQ29sKSAvIDIpO1xyXG4gICAgICAgICAgaWYgKHRoaXMuY2FuQ2FwdHVyZShzdGFydFJvdywgc3RhcnRDb2wsIGVuZFJvdywgZW5kQ29sKSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50UGxheWVyID09PSB0aGlzLnBsYXllcnNbMF0pIHtcclxuICAgICAgICAgICAgICB0aGlzLnBsYXllcnNbMV0ubnVtT2ZQaWVjZXMgLT0gMTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICB0aGlzLnBsYXllcnNbMF0ubnVtT2ZQaWVjZXMgLT0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmJvYXJkW21pZGRsZVJvd11bbWlkZGxlQ29sXSA9IG51bGw7XHJcbiAgICAgICAgICAgIGNhcHR1cmVkQWxyZWFkeSA9IHRydWU7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjYXB0dXJlZEFscmVhZHkgPSBmYWxzZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5ib2FyZFtzdGFydFJvd11bc3RhcnRDb2xdID0gbnVsbDtcclxuICAgICAgICB0aGlzLmJvYXJkW2VuZFJvd11bZW5kQ29sXSA9IHBpZWNlO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5wcm9tb3RlVG9LaW5nKGVuZFJvdywgZW5kQ29sKSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgcGllY2UubWFrZUtpbmcoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IG5leHRDYXB0dXJlcyA9IHRoaXMuY2hhaW5DYXB0dXJlcyhlbmRSb3csIGVuZENvbCk7XHJcbiAgICAgICAgaWYgKG5leHRDYXB0dXJlcyAmJiBjYXB0dXJlZEFscmVhZHkgPT09IHRydWUpIHtcclxuICAgICAgICAgIGlmIChuZXh0Q2FwdHVyZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZVR1cm4oKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5jaGFuZ2VUdXJuKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBCcmluZyB0aGUgYm9hcmQgYmFjayB0byBpdCdzIGluaXRpYWwgc3RhdGUgYmVmb3JlIHRoZSBzaW11bGF0ZWQgbW92ZVxyXG4gICAqIEBwYXJhbSBzdGFydFJvdyAtIFN0YXJ0aW5nIHJvdyBvZiB0aGUgQUkncyBwaWVjZVxyXG4gICAqIEBwYXJhbSBzdGFydENvbCAtIFN0YXJ0aW5nIGNvbHVtbiBvZiB0aGUgQUkncyBwaWVjZVxyXG4gICAqIEBwYXJhbSBmaW5hbFJvdyAtIEZpbmFsIHJvdyBvZiB0aGUgQUkncyBwaWVjZVxyXG4gICAqIEBwYXJhbSBmaW5hbENvbCAtIEZpbmFsIHJvdyBvZiB0aGUgQUkncyBwaWVjZVxyXG4gICAqIEBwYXJhbSBjYXB0dXJlZFBpZWNlcyAtIEFycmF5IG9mIHBpZWNlcyBjYXB0dXJlZCBhbmQgdGhlaXIgcG9zaXRpb25cclxuICAgKiBAcGFyYW0gd2FzUHJvbW90ZWQgLSBCb29sZWFuIHRyYWNraW5nIHdoZXRoZXIgdGhlIG1vdmluZyBwaWVjZSB3YXMgcHJvbW90ZWRcclxuICAgKi9cclxuICBwdWJsaWMgdW5kb1NpbXVsYXRpb24oXHJcbiAgICBzdGFydFJvdzogbnVtYmVyLFxyXG4gICAgc3RhcnRDb2w6IG51bWJlcixcclxuICAgIGZpbmFsUm93OiBudW1iZXIsXHJcbiAgICBmaW5hbENvbDogbnVtYmVyLFxyXG4gICAgY2FwdHVyZWRQaWVjZXM6IHsgcGllY2U6IENoZWNrZXJzUGllY2U7IHJvdzogbnVtYmVyOyBjb2w6IG51bWJlciB9W10sXHJcbiAgICB3YXNQcm9tb3RlZDogYm9vbGVhblxyXG4gICk6IHZvaWQge1xyXG4gICAgLy8gUmV2ZXJzZSB0aGUgcG9zaXRpb24gb2YgdGhlIHBpZWNlIHRvIHdoYXQgaXQgd2FzIGJlZm9yZSB0aGUgJ3NpbXVsYXRlZCBtb3ZlJ1xyXG4gICAgY29uc3QgcGllY2UgPSB0aGlzLmdldFBpZWNlKGZpbmFsUm93LCBmaW5hbENvbCk7XHJcbiAgICB0aGlzLmJvYXJkW2ZpbmFsUm93XVtmaW5hbENvbF0gPSBudWxsO1xyXG4gICAgdGhpcy5ib2FyZFtzdGFydFJvd11bc3RhcnRDb2xdID0gcGllY2U7XHJcblxyXG4gICAgY2FwdHVyZWRQaWVjZXMuZm9yRWFjaCgoY2FwdHVyZWRQaWVjZSkgPT4ge1xyXG4gICAgICB0aGlzLmJvYXJkW2NhcHR1cmVkUGllY2Uucm93XVtjYXB0dXJlZFBpZWNlLmNvbF0gPSBjYXB0dXJlZFBpZWNlLnBpZWNlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gcmV2ZXJzZSB0aGUgQUkncyBwaWVjZSBpZiBpdCB3YXMgcHJvbW90ZWQgdG8gS2luZyBzdGF0dXNcclxuICAgIGlmICh3YXNQcm9tb3RlZCAmJiBwaWVjZSkge1xyXG4gICAgICBwaWVjZS5pc0tpbmcgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSBjb3B5IG9mIHRoZSBjdXJyZW50IGdhbWUgaW5zdGFuY2VcclxuICAgKiBAcmV0dXJucyB7Q2hlY2tlcnNHYW1lfSAtIGNvcHkgb2YgZ2FtZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBkZWVwQ29weUdhbWUoKTogQ2hlY2tlcnNHYW1lIHtcclxuICAgIGNvbnN0IGNvcGllZEdhbWUgPSBuZXcgQ2hlY2tlcnNHYW1lKFxyXG4gICAgICB0aGlzLnBsYXllcnNbMF0uZGVlcENvcHlQbGF5ZXIoKSxcclxuICAgICAgdGhpcy5wbGF5ZXJzWzFdLmRlZXBDb3B5UGxheWVyKCksXHJcbiAgICAgIHRoaXMuZm9yY2VkSnVtcHNcclxuICAgICk7XHJcblxyXG4gICAgLy8gQ29weSB0aGUgYm9hcmRcclxuICAgIGNvcGllZEdhbWUuYm9hcmQgPSB0aGlzLmJvYXJkLm1hcCgocm93KSA9PlxyXG4gICAgICByb3cubWFwKChwaWVjZSkgPT4gKHBpZWNlID8gcGllY2UuZGVlcENvcHlQaWVjZSgpIDogbnVsbCkpXHJcbiAgICApO1xyXG5cclxuICAgIGNvcGllZEdhbWUuY3VycmVudFBsYXllciA9IHRoaXMuY3VycmVudFBsYXllcjtcclxuICAgIGNvcGllZEdhbWUuY3VycmVudFN0YXRlID0gdGhpcy5jdXJyZW50U3RhdGU7XHJcbiAgICBjb3BpZWRHYW1lLndpbm5lciA9IHRoaXMud2lubmVyID8gdGhpcy53aW5uZXIuZGVlcENvcHlQbGF5ZXIoKSA6IG51bGw7XHJcblxyXG4gICAgcmV0dXJuIGNvcGllZEdhbWU7XHJcbiAgfVxyXG59IiwiaW1wb3J0IHtcclxuICBNb3ZlcyxcclxuICBQaWVjZUNvbG9yLFxyXG4gIENoZWNrZXJzUGllY2UsXHJcbiAgQ2hlY2tlcnNCb2FyZCxcclxuICBTdGF0ZSxcclxuICBQbGF5ZXIsXHJcbiAgQ2hlY2tlcnNHYW1lLFxyXG59IGZyb20gXCIuL2NoZWNrZXJzR2FtZVwiO1xyXG5cclxuLyoqXHJcbiAqIEEgY2xhc3MgZm9yIHRoZSBBSSBwbGF5ZXIgZXh0ZW5kaW5nIHRoZSByZWd1bGFyIHBsYXllciBjbGFzc1xyXG4gKiBIYXMgbWV0aG9kcyBmb3IgYSBoZXVyaXN0aWMgZXZhbHVhdGlvbiwgdGhlIG1pbmltYXggYWxnb3JpdGhtIGFuZCBhIG1ldGhvZCB0aGF0IG1ha2VzIHRoZSBtb3ZlXHJcbiAqIHJldHVybmVkIGJ5IG1pbmltYXhcclxuICovXHJcbmV4cG9ydCBjbGFzcyBDaGVja2Vyc0FJIGV4dGVuZHMgUGxheWVyIHtcclxuICBwcml2YXRlIGdhbWU6IENoZWNrZXJzR2FtZTtcclxuICBwcml2YXRlIGRlcHRoOiBudW1iZXI7XHJcbiAgcHJpdmF0ZSBvcGVuaW5nczogTWFwPHN0cmluZywgTW92ZXNbXT47XHJcbiAgcHJpdmF0ZSBjdXJyZW50T3BlbmluZzogc3RyaW5nIHwgbnVsbDtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBuYW1lOiBzdHJpbmcsXHJcbiAgICBjb2xvcjogUGllY2VDb2xvcixcclxuICAgIGdhbWU6IENoZWNrZXJzR2FtZSxcclxuICAgIGRlcHRoOiBudW1iZXJcclxuICApIHtcclxuICAgIHN1cGVyKG5hbWUsIGNvbG9yKTtcclxuICAgIHRoaXMuZ2FtZSA9IGdhbWU7XHJcbiAgICB0aGlzLmRlcHRoID0gZGVwdGg7XHJcbiAgICB0aGlzLm9wZW5pbmdzID0gdGhpcy5vcGVuaW5nU2V0KCk7XHJcbiAgICB0aGlzLmN1cnJlbnRPcGVuaW5nID0gbnVsbDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENhbGN1bGF0ZXMgYSBzY29yZSBmb3IgdGhlIEFJIGJhc2VkIG9uIG51bWJlciBvZiByZWd1bGFyIGFuZCBraW5nIHBpZWNlcyBpdCBoYXMgb3Bwb3NlZCB0byB0aGUgdXNlclxyXG4gICAqIEBwYXJhbSB7Q2hlY2tlcnNHYW1lfSBnYW1lIC0gQ3VycmVudCBzdGF0ZSBvZiB0aGUgZ2FtZVxyXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IC0gVGhlIHNjb3JlIGNhbGN1bGF0ZWRcclxuICAgKi9cclxuXHJcbiAgcHVibGljIGhldXJpc3RpYyhnYW1lOiBDaGVja2Vyc0dhbWUpOiBudW1iZXIge1xyXG4gICAgbGV0IHNjb3JlID0gMDtcclxuICAgIGxldCBhaVBpZWNlQ291bnQgPSBnYW1lLnBsYXllcnNbMV0ubnVtT2ZQaWVjZXMsXHJcbiAgICAgIHBsYXllclBpZWNlQ291bnQgPSBnYW1lLnBsYXllcnNbMF0ubnVtT2ZQaWVjZXM7XHJcbiAgICBsZXQgYWlLaW5nQ291bnQgPSAwLFxyXG4gICAgICBwbGF5ZXJLaW5nQ291bnQgPSAwO1xyXG5cclxuICAgIC8vIENvbXBhcmUgbnVtYmVyIG9mIHBpZWNlc1xyXG4gICAgc2NvcmUgKz0gYWlQaWVjZUNvdW50ICogMTUgLSBwbGF5ZXJQaWVjZUNvdW50ICogMTU7XHJcblxyXG4gICAgLy8gU2luZ2xlIGNhcHR1cmVcclxuICAgIHNjb3JlIC09IHRoaXMuY291bnRPcHBvbmVudENhcHR1cmVzUG9zc2libGUoUGllY2VDb2xvci5SZWQsIGdhbWUpO1xyXG5cclxuICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IDg7IHJvdysrKSB7XHJcbiAgICAgIGZvciAobGV0IGNvbCA9IDA7IGNvbCA8IDg7IGNvbCsrKSB7XHJcbiAgICAgICAgbGV0IHBpZWNlID0gZ2FtZS5nZXRQaWVjZShyb3csIGNvbCk7XHJcbiAgICAgICAgaWYgKHBpZWNlKSB7XHJcbiAgICAgICAgICAvLyBDb21wYXJlIEtpbmcgQ291bnRzXHJcbiAgICAgICAgICBpZiAocGllY2UuY29sb3IgPT09IFBpZWNlQ29sb3IuQmxhY2sgJiYgcGllY2UuaXNLaW5nID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIGFpS2luZ0NvdW50Kys7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKHBpZWNlLmNvbG9yID09PSBQaWVjZUNvbG9yLlJlZCAmJiBwaWVjZS5pc0tpbmcgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgcGxheWVyS2luZ0NvdW50Kys7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyBDZW50cmFsIGJveFxyXG4gICAgICAgICAgaWYgKGNvbCA+PSAyICYmIGNvbCA8PSA1ICYmIHJvdyA+PSAzICYmIHJvdyA8PSA0KSB7XHJcbiAgICAgICAgICAgIHNjb3JlICs9IHBpZWNlLmNvbG9yID09PSBQaWVjZUNvbG9yLkJsYWNrID8gMi41IDogLTIuNTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC8vIENlbnRyYWwgYm91bmRhcmllc1xyXG4gICAgICAgICAgaWYgKHJvdyA+PSAzICYmIHJvdyA8PSA0ICYmIGNvbCA8IDIgJiYgY29sID4gNSkge1xyXG4gICAgICAgICAgICBzY29yZSArPSBwaWVjZS5jb2xvciA9PT0gUGllY2VDb2xvci5CbGFjayA/IDAuNSA6IC0wLjU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyBCYWNrIFJvdyBHdWFyZFxyXG4gICAgICAgICAgaWYgKGdhbWUubnVtT2ZUdXJucyA8IDEwKSB7XHJcbiAgICAgICAgICAgIGlmIChwaWVjZS5jb2xvciA9PT0gUGllY2VDb2xvci5CbGFjayAmJiByb3cgPT09IDApIHtcclxuICAgICAgICAgICAgICBpZiAoY29sID09PSAxIHx8IGNvbCA9PT0gNSkge1xyXG4gICAgICAgICAgICAgICAgc2NvcmUgKz0gMTA7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHBpZWNlLmNvbG9yID09PSBQaWVjZUNvbG9yLlJlZCAmJiByb3cgPT09IDcpIHtcclxuICAgICAgICAgICAgICBpZiAoY29sID09PSAyIHx8IGNvbCA9PT0gNikge1xyXG4gICAgICAgICAgICAgICAgc2NvcmUgLT0gMTA7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gQmFzaWMgUGllY2UgUHJvdGVjdGlvblxyXG4gICAgICAgICAgaWYgKHJvdyA+PSAxICYmIHJvdyA8PSA2ICYmIGNvbCA+PSAxICYmIGNvbCA8PSA2KSB7XHJcbiAgICAgICAgICAgIGxldCBiYWNrd2FyZFJvdyA9XHJcbiAgICAgICAgICAgICAgcGllY2UuY29sb3IgPT09IFBpZWNlQ29sb3IuQmxhY2sgPyByb3cgLSAxIDogcm93ICsgMTtcclxuXHJcbiAgICAgICAgICAgIGxldCBsZWZ0UHJvdGVjdGlvblBpZWNlID0gZ2FtZS5nZXRQaWVjZShiYWNrd2FyZFJvdywgY29sIC0gMSk7XHJcbiAgICAgICAgICAgIGxldCByaWdodFByb3RlY3Rpb25QaWVjZSA9IGdhbWUuZ2V0UGllY2UoYmFja3dhcmRSb3csIGNvbCArIDEpO1xyXG5cclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgIGxlZnRQcm90ZWN0aW9uUGllY2UgJiZcclxuICAgICAgICAgICAgICBsZWZ0UHJvdGVjdGlvblBpZWNlLmNvbG9yID09PSBwaWVjZS5jb2xvclxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAvLyBJbmNyZWFzZSBzY29yZSBiZWNhdXNlIHRoZSBwaWVjZSBpcyBwcm90ZWN0ZWQgZnJvbSB0aGUgbGVmdFxyXG4gICAgICAgICAgICAgIHNjb3JlICs9IHBpZWNlLmNvbG9yID09PSBQaWVjZUNvbG9yLkJsYWNrID8gNiA6IC02O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICByaWdodFByb3RlY3Rpb25QaWVjZSAmJlxyXG4gICAgICAgICAgICAgIHJpZ2h0UHJvdGVjdGlvblBpZWNlLmNvbG9yID09PSBwaWVjZS5jb2xvclxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAvLyBJbmNyZWFzZSBzY29yZSBiZWNhdXNlIHRoZSBwaWVjZSBpcyBwcm90ZWN0ZWQgZnJvbSB0aGUgcmlnaHRcclxuICAgICAgICAgICAgICBzY29yZSArPSBwaWVjZS5jb2xvciA9PT0gUGllY2VDb2xvci5CbGFjayA/IDYgOiAtNjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8vIFB5cmFtaWQgRm9ybWF0aW9uXHJcbiAgICAgICAgICBpZiAoZ2FtZS5udW1PZlR1cm5zIDwgMTUpIHtcclxuICAgICAgICAgICAgaWYgKHBpZWNlLmNvbG9yID09PSBQaWVjZUNvbG9yLkJsYWNrKSB7XHJcbiAgICAgICAgICAgICAgaWYgKHJvdyA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbCA9PT0gMSB8fCBjb2wgPT09IDMgfHwgY29sID09IDUpIHtcclxuICAgICAgICAgICAgICAgICAgc2NvcmUgKz0gNTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgaWYgKHJvdyA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbCA9PT0gMiB8fCBjb2wgPT09IDQpIHtcclxuICAgICAgICAgICAgICAgICAgc2NvcmUgKz0gNTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgaWYgKHJvdyA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbCA9PT0gMykge1xyXG4gICAgICAgICAgICAgICAgICBzY29yZSArPSA1O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8vIFByb3RlY3QgdnVsbmVyYWJsZSBwaWVjZXNcclxuICAgICAgICAgIGlmICghZ2FtZS5pc1Z1bG5lcmFibGUocm93LCBjb2wpKSB7XHJcbiAgICAgICAgICAgIHNjb3JlICs9IHBpZWNlLmNvbG9yID09PSBQaWVjZUNvbG9yLkJsYWNrID8gLTYgOiA2O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNjb3JlICs9IGFpS2luZ0NvdW50ICogMjAgLSBwbGF5ZXJLaW5nQ291bnQgKiAyMDtcclxuXHJcbiAgICByZXR1cm4gc2NvcmU7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNvdW50T3Bwb25lbnRDYXB0dXJlc1Bvc3NpYmxlKFxyXG4gICAgY29sb3I6IFBpZWNlQ29sb3IsXHJcbiAgICBnYW1lOiBDaGVja2Vyc0dhbWVcclxuICApOiBudW1iZXIge1xyXG4gICAgbGV0IGNhcHR1cmVDb3VudCA9IDA7XHJcbiAgICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCA4OyByb3crKykge1xyXG4gICAgICBmb3IgKGxldCBjb2wgPSAwOyBjb2wgPCA4OyBjb2wrKykge1xyXG4gICAgICAgIGNvbnN0IHBpZWNlID0gZ2FtZS5nZXRQaWVjZShyb3csIGNvbCk7XHJcbiAgICAgICAgaWYgKHBpZWNlICYmIHBpZWNlLmNvbG9yID09PSBjb2xvcikge1xyXG4gICAgICAgICAgY29uc3QgbW92ZXMgPSBnYW1lLnBvc3NpYmxlTW92ZXMocm93LCBjb2wpO1xyXG4gICAgICAgICAgY2FwdHVyZUNvdW50ICs9IG1vdmVzLmZpbHRlcihcclxuICAgICAgICAgICAgKG1vdmUpID0+IE1hdGguYWJzKG1vdmUuc3RhcnRSb3cgLSBtb3ZlLmVuZFJvdykgPT09IDJcclxuICAgICAgICAgICkubGVuZ3RoO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNhcHR1cmVDb3VudDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBvcGVuaW5nU2V0KCk6IE1hcDxzdHJpbmcsIE1vdmVzW10+IHtcclxuICAgIGNvbnN0IG9wZW5pbmdzID0gbmV3IE1hcDxzdHJpbmcsIE1vdmVzW10+KCk7XHJcblxyXG4gICAgb3BlbmluZ3Muc2V0KFwiT2xkIEZvdXJ0ZWVudGhcIiwgW1xyXG4gICAgICBuZXcgTW92ZXMoNSwgMiwgNCwgMyksIC8vIHJlZCBvciBwbGF5ZXJzIG1vdmVcclxuICAgICAgbmV3IE1vdmVzKDIsIDMsIDMsIDIpLCAvLyBibGFjayBvciBhaSdzIG1vdmVcclxuICAgICAgbmV3IE1vdmVzKDYsIDEsIDUsIDIpLCAvLyByZWQgb3IgcGxheWVycyBtb3ZlXHJcbiAgICAgIG5ldyBNb3ZlcygyLCA1LCAzLCA2KSwgLy8gYmxhY2sgb3IgYWkncyBtb3ZlXHJcbiAgICAgIG5ldyBNb3Zlcyg3LCAwLCA2LCAxKSwgLy8gcmVkIG9yIHBsYXllcnMgbW92ZVxyXG4gICAgXSk7XHJcbiAgICBvcGVuaW5ncy5zZXQoXCJBbG1hXCIsIFtcclxuICAgICAgbmV3IE1vdmVzKDUsIDIsIDQsIDMpLCAvLyByZWQgb3IgcGxheWVycyBtb3ZlXHJcbiAgICAgIG5ldyBNb3ZlcygyLCAzLCAzLCAyKSwgLy8gYmxhY2sgb3IgYWkncyBtb3ZlXHJcbiAgICAgIG5ldyBNb3Zlcyg2LCAxLCA1LCAyKSwgLy8gcmVkIG9yIHBsYXllcnMgbW92ZVxyXG4gICAgICBuZXcgTW92ZXMoMiwgNSwgMywgNiksIC8vIGJsYWNrIG9yIGFpJ3MgbW92ZVxyXG4gICAgICBuZXcgTW92ZXMoNywgMiwgNiwgMSksIC8vIHJlZCBvciBwbGF5ZXJzIG1vdmVcclxuICAgIF0pO1xyXG4gICAgb3BlbmluZ3Muc2V0KFwiQ2VudHJlXCIsIFtcclxuICAgICAgbmV3IE1vdmVzKDUsIDIsIDQsIDMpLCAvLyByZWQgb3IgcGxheWVycyBtb3ZlXHJcbiAgICAgIG5ldyBNb3ZlcygyLCAzLCAzLCAyKSwgLy8gYmxhY2sgb3IgYWkncyBtb3ZlXHJcbiAgICAgIG5ldyBNb3Zlcyg2LCAxLCA1LCAyKSwgLy8gcmVkIG9yIHBsYXllcnMgbW92ZVxyXG4gICAgICBuZXcgTW92ZXMoMiwgNSwgMywgNiksIC8vIGJsYWNrIG9yIGFpJ3MgbW92ZVxyXG4gICAgICBuZXcgTW92ZXMoNCwgMywgMywgNCksIC8vIHJlZCBvciBwbGF5ZXJzIG1vdmVcclxuICAgIF0pO1xyXG4gICAgb3BlbmluZ3Muc2V0KFwiR2xhc2dvd1wiLCBbXHJcbiAgICAgIG5ldyBNb3Zlcyg1LCAyLCA0LCAzKSwgLy8gcmVkIG9yIHBsYXllcnMgbW92ZVxyXG4gICAgICBuZXcgTW92ZXMoMiwgMywgMywgMiksIC8vIGJsYWNrIG9yIGFpJ3MgbW92ZVxyXG4gICAgICBuZXcgTW92ZXMoNiwgMSwgNSwgMiksIC8vIHJlZCBvciBwbGF5ZXJzIG1vdmVcclxuICAgICAgbmV3IE1vdmVzKDIsIDUsIDMsIDYpLCAvLyBibGFjayBvciBhaSdzIG1vdmVcclxuICAgICAgbmV3IE1vdmVzKDUsIDIsIDQsIDEpLCAvLyByZWQgb3IgcGxheWVycyBtb3ZlXHJcbiAgICBdKTtcclxuICAgIG9wZW5pbmdzLnNldChcIkxhaXJkIGFuZCBMYWR5XCIsIFtcclxuICAgICAgbmV3IE1vdmVzKDUsIDIsIDQsIDMpLCAvLyByZWQgb3IgcGxheWVycyBtb3ZlXHJcbiAgICAgIG5ldyBNb3ZlcygyLCAzLCAzLCAyKSwgLy8gYmxhY2sgb3IgYWkncyBtb3ZlXHJcbiAgICAgIG5ldyBNb3Zlcyg2LCAxLCA1LCAyKSwgLy8gcmVkIG9yIHBsYXllcnMgbW92ZVxyXG4gICAgICBuZXcgTW92ZXMoMiwgNSwgMywgNiksIC8vIGJsYWNrIG9yIGFpJ3MgbW92ZVxyXG4gICAgICBuZXcgTW92ZXMoNSwgNiwgNCwgNyksXHJcbiAgICAgIG5ldyBNb3ZlcygzLCA2LCA0LCA1KSxcclxuICAgICAgbmV3IE1vdmVzKDUsIDQsIDMsIDYpLFxyXG4gICAgICBuZXcgTW92ZXMoMiwgNywgNCwgNSksXHJcbiAgICBdKTtcclxuICAgIG9wZW5pbmdzLnNldChcIkJsYWNrIERvY3RvclwiLCBbXHJcbiAgICAgIG5ldyBNb3Zlcyg1LCAyLCA0LCAzKSwgLy8gcmVkIG9yIHBsYXllcnMgbW92ZVxyXG4gICAgICBuZXcgTW92ZXMoMiwgMywgMywgMiksIC8vIGJsYWNrIG9yIGFpJ3MgbW92ZVxyXG4gICAgICBuZXcgTW92ZXMoNiwgMSwgNSwgMiksIC8vIHJlZCBvciBwbGF5ZXJzIG1vdmVcclxuICAgICAgbmV3IE1vdmVzKDIsIDUsIDMsIDYpLCAvLyBibGFjayBvciBhaSdzIG1vdmVcclxuICAgICAgbmV3IE1vdmVzKDUsIDYsIDQsIDcpLFxyXG4gICAgICBuZXcgTW92ZXMoMywgNiwgNCwgNSksXHJcbiAgICAgIG5ldyBNb3Zlcyg1LCA0LCAzLCA2KSxcclxuICAgICAgbmV3IE1vdmVzKDMsIDIsIDUsIDQpLFxyXG4gICAgICBuZXcgTW92ZXMoNiwgMywgNCwgNSksXHJcbiAgICBdKTtcclxuICAgIG9wZW5pbmdzLnNldChcIkxhaXJkIGFuZCBMYWR5IFJlZnVzZWRcIiwgW1xyXG4gICAgICBuZXcgTW92ZXMoNSwgMiwgNCwgMyksIC8vIHJlZCBvciBwbGF5ZXJzIG1vdmVcclxuICAgICAgbmV3IE1vdmVzKDIsIDMsIDMsIDIpLCAvLyBibGFjayBvciBhaSdzIG1vdmVcclxuICAgICAgbmV3IE1vdmVzKDYsIDEsIDUsIDIpLCAvLyByZWQgb3IgcGxheWVycyBtb3ZlXHJcbiAgICAgIG5ldyBNb3ZlcygyLCA1LCAzLCA2KSwgLy8gYmxhY2sgb3IgYWkncyBtb3ZlXHJcbiAgICAgIG5ldyBNb3Zlcyg1LCA2LCA0LCA3KSxcclxuICAgICAgbmV3IE1vdmVzKDEsIDYsIDIsIDUpLFxyXG4gICAgXSk7XHJcbiAgICBvcGVuaW5ncy5zZXQoXCJHbGFzZ293LVdoaWx0ZXJcIiwgW1xyXG4gICAgICBuZXcgTW92ZXMoNSwgMiwgNCwgMyksIC8vIHJlZCBvciBwbGF5ZXJzIG1vdmVcclxuICAgICAgbmV3IE1vdmVzKDIsIDMsIDMsIDIpLCAvLyBibGFjayBvciBhaSdzIG1vdmVcclxuICAgICAgbmV3IE1vdmVzKDYsIDEsIDUsIDIpLCAvLyByZWQgb3IgcGxheWVycyBtb3ZlXHJcbiAgICAgIG5ldyBNb3ZlcygyLCA1LCAzLCA2KSwgLy8gYmxhY2sgb3IgYWkncyBtb3ZlXHJcbiAgICAgIG5ldyBNb3Zlcyg1LCA2LCA0LCA1KSxcclxuICAgICAgbmV3IE1vdmVzKDEsIDYsIDIsIDUpLFxyXG4gICAgICBuZXcgTW92ZXMoNSwgMiwgNCwgMSksXHJcbiAgICAgIG5ldyBNb3ZlcygxLCA0LCAyLCAzKSxcclxuICAgIF0pO1xyXG4gICAgb3BlbmluZ3Muc2V0KFwiTmFpbG9yXCIsIFtcclxuICAgICAgbmV3IE1vdmVzKDUsIDIsIDQsIDMpLCAvLyByZWQgb3IgcGxheWVycyBtb3ZlXHJcbiAgICAgIG5ldyBNb3ZlcygyLCAzLCAzLCAyKSwgLy8gYmxhY2sgb3IgYWkncyBtb3ZlXHJcbiAgICAgIG5ldyBNb3Zlcyg2LCAxLCA1LCAyKSwgLy8gcmVkIG9yIHBsYXllcnMgbW92ZVxyXG4gICAgICBuZXcgTW92ZXMoMSwgNCwgMiwgMyksIC8vIGJsYWNrIG9yIGFpJ3MgbW92ZVxyXG4gICAgXSk7XHJcbiAgICBvcGVuaW5ncy5zZXQoXCJUaWxsaWNvdWx0cnlcIiwgW1xyXG4gICAgICBuZXcgTW92ZXMoNSwgMiwgNCwgMyksIC8vIHJlZCBvciBwbGF5ZXJzIG1vdmVcclxuICAgICAgbmV3IE1vdmVzKDIsIDMsIDMsIDIpLCAvLyBibGFjayBvciBhaSdzIG1vdmVcclxuICAgICAgbmV3IE1vdmVzKDYsIDEsIDUsIDIpLCAvLyByZWQgb3IgcGxheWVycyBtb3ZlXHJcbiAgICAgIG5ldyBNb3ZlcygyLCA1LCAzLCA0KSwgLy8gYmxhY2sgb3IgYWkncyBtb3ZlXHJcbiAgICBdKTtcclxuICAgIG9wZW5pbmdzLnNldChcIldpbGwgbycgdGhlIFdpc3BcIiwgW1xyXG4gICAgICBuZXcgTW92ZXMoNSwgMiwgNCwgMyksIC8vIHJlZCBvciBwbGF5ZXJzIG1vdmVcclxuICAgICAgbmV3IE1vdmVzKDIsIDMsIDMsIDIpLCAvLyBibGFjayBvciBhaSdzIG1vdmVcclxuICAgICAgbmV3IE1vdmVzKDUsIDYsIDQsIDcpLCAvLyByZWQgb3IgcGxheWVycyBtb3ZlXHJcbiAgICBdKTtcclxuICAgIG9wZW5pbmdzLnNldChcIkRlZmlhbmNlXCIsIFtcclxuICAgICAgbmV3IE1vdmVzKDUsIDIsIDQsIDMpLCAvLyByZWQgb3IgcGxheWVycyBtb3ZlXHJcbiAgICAgIG5ldyBNb3ZlcygyLCAzLCAzLCAyKSwgLy8gYmxhY2sgb3IgYWkncyBtb3ZlXHJcbiAgICAgIG5ldyBNb3Zlcyg1LCA2LCA0LCA1KSwgLy8gcmVkIG9yIHBsYXllcnMgbW92ZVxyXG4gICAgICBuZXcgTW92ZXMoMSwgMiwgMiwgMyksIC8vIGJsYWNrIG9yIGFpJ3MgbW92ZVxyXG4gICAgXSk7XHJcbiAgICBvcGVuaW5ncy5zZXQoXCJGaWZlXCIsIFtcclxuICAgICAgbmV3IE1vdmVzKDUsIDIsIDQsIDMpLCAvLyByZWQgb3IgcGxheWVycyBtb3ZlXHJcbiAgICAgIG5ldyBNb3ZlcygyLCAzLCAzLCAyKSwgLy8gYmxhY2sgb3IgYWkncyBtb3ZlXHJcbiAgICAgIG5ldyBNb3Zlcyg1LCA2LCA0LCA1KSwgLy8gcmVkIG9yIHBsYXllcnMgbW92ZVxyXG4gICAgICBuZXcgTW92ZXMoMiwgNSwgMywgNiksIC8vIGJsYWNrIG9yIGFpJ3MgbW92ZVxyXG4gICAgICBuZXcgTW92ZXMoNiwgNywgNSwgNiksXHJcbiAgICBdKTtcclxuICAgIG9wZW5pbmdzLnNldChcIlNvdXRlclwiLCBbXHJcbiAgICAgIG5ldyBNb3Zlcyg1LCAyLCA0LCAzKSwgLy8gcmVkIG9yIHBsYXllcnMgbW92ZVxyXG4gICAgICBuZXcgTW92ZXMoMiwgMywgMywgMiksIC8vIGJsYWNrIG9yIGFpJ3MgbW92ZVxyXG4gICAgICBuZXcgTW92ZXMoNSwgNiwgNCwgNSksIC8vIHJlZCBvciBwbGF5ZXJzIG1vdmVcclxuICAgICAgbmV3IE1vdmVzKDIsIDUsIDMsIDYpLCAvLyBibGFjayBvciBhaSdzIG1vdmVcclxuICAgICAgbmV3IE1vdmVzKDYsIDUsIDUsIDYpLFxyXG4gICAgXSk7XHJcbiAgICBvcGVuaW5ncy5zZXQoXCJXaGlsdGVyLUlcIiwgW1xyXG4gICAgICBuZXcgTW92ZXMoNSwgMiwgNCwgMyksIC8vIHJlZCBvciBwbGF5ZXJzIG1vdmVcclxuICAgICAgbmV3IE1vdmVzKDIsIDMsIDMsIDIpLCAvLyBibGFjayBvciBhaSdzIG1vdmVcclxuICAgICAgbmV3IE1vdmVzKDUsIDYsIDQsIDUpLCAvLyByZWQgb3IgcGxheWVycyBtb3ZlXHJcbiAgICAgIG5ldyBNb3ZlcygyLCA1LCAzLCA2KSwgLy8gYmxhY2sgb3IgYWkncyBtb3ZlXHJcbiAgICAgIG5ldyBNb3Zlcyg2LCAzLCA1LCAyKSxcclxuICAgIF0pO1xyXG4gICAgb3BlbmluZ3Muc2V0KFwiV2hpbHRlci1JSVwiLCBbXHJcbiAgICAgIG5ldyBNb3Zlcyg1LCAyLCA0LCAzKSwgLy8gcmVkIG9yIHBsYXllcnMgbW92ZVxyXG4gICAgICBuZXcgTW92ZXMoMiwgMywgMywgMiksIC8vIGJsYWNrIG9yIGFpJ3MgbW92ZVxyXG4gICAgICBuZXcgTW92ZXMoNiwgMywgNSwgMiksXHJcbiAgICBdKTtcclxuICAgIG9wZW5pbmdzLnNldChcIldoaWx0ZXItRXhjaGFuZ2VcIiwgW1xyXG4gICAgICBuZXcgTW92ZXMoNSwgMiwgNCwgMyksIC8vIHJlZCBvciBwbGF5ZXJzIG1vdmVcclxuICAgICAgbmV3IE1vdmVzKDIsIDMsIDMsIDIpLCAvLyBibGFjayBvciBhaSdzIG1vdmVcclxuICAgICAgbmV3IE1vdmVzKDYsIDMsIDUsIDIpLFxyXG4gICAgICBuZXcgTW92ZXMoMiwgNSwgMywgNCksXHJcbiAgICBdKTtcclxuICAgIG9wZW5pbmdzLnNldChcIk1haWQgb2YgdGhlIE1pbGxcIiwgW1xyXG4gICAgICBuZXcgTW92ZXMoNSwgMiwgNCwgMyksIC8vIHJlZCBvciBwbGF5ZXJzIG1vdmVcclxuICAgICAgbmV3IE1vdmVzKDIsIDMsIDMsIDIpLCAvLyBibGFjayBvciBhaSdzIG1vdmVcclxuICAgICAgbmV3IE1vdmVzKDYsIDEsIDUsIDIpLFxyXG4gICAgICBuZXcgTW92ZXMoMywgNiwgNCwgNyksXHJcbiAgICAgIG5ldyBNb3Zlcyg0LCAzLCAzLCA0KSxcclxuICAgIF0pO1xyXG4gICAgb3BlbmluZ3Muc2V0KFwiRG91Z2xhc1wiLCBbXHJcbiAgICAgIG5ldyBNb3Zlcyg1LCAyLCA0LCAzKSwgLy8gcmVkIG9yIHBsYXllcnMgbW92ZVxyXG4gICAgICBuZXcgTW92ZXMoMiwgMywgMywgMiksIC8vIGJsYWNrIG9yIGFpJ3MgbW92ZVxyXG4gICAgICBuZXcgTW92ZXMoNiwgMSwgNSwgMiksXHJcbiAgICAgIG5ldyBNb3ZlcygzLCA2LCA0LCA3KSxcclxuICAgICAgbmV3IE1vdmVzKDcsIDAsIDYsIDEpLFxyXG4gICAgICBuZXcgTW92ZXMoMSwgNiwgMiwgNSksXHJcbiAgICBdKTtcclxuICAgIG9wZW5pbmdzLnNldChcIlBpb25lZXJcIiwgW1xyXG4gICAgICBuZXcgTW92ZXMoNSwgMiwgNCwgMyksIC8vIHJlZCBvciBwbGF5ZXJzIG1vdmVcclxuICAgICAgbmV3IE1vdmVzKDIsIDMsIDMsIDIpLCAvLyBibGFjayBvciBhaSdzIG1vdmVcclxuICAgICAgbmV3IE1vdmVzKDYsIDEsIDUsIDIpLFxyXG4gICAgICBuZXcgTW92ZXMoMSwgNiwgMiwgNSksXHJcbiAgICBdKTtcclxuICAgIG9wZW5pbmdzLnNldChcIldoaXRlIER5a2VcIiwgW1xyXG4gICAgICBuZXcgTW92ZXMoNSwgMiwgNCwgMyksXHJcbiAgICAgIG5ldyBNb3ZlcygyLCA1LCAzLCA2KSxcclxuICAgICAgbmV3IE1vdmVzKDYsIDEsIDUsIDIpLFxyXG4gICAgICBuZXcgTW92ZXMoMywgNiwgNCwgNSksXHJcbiAgICBdKTtcclxuICAgIG9wZW5pbmdzLnNldChcIldhZ3JhbVwiLCBbXHJcbiAgICAgIG5ldyBNb3Zlcyg1LCAyLCA0LCAzKSxcclxuICAgICAgbmV3IE1vdmVzKDIsIDUsIDMsIDYpLFxyXG4gICAgICBuZXcgTW92ZXMoNSwgNiwgNCwgNyksXHJcbiAgICAgIG5ldyBNb3ZlcygyLCAxLCAzLCAwKSxcclxuICAgIF0pO1xyXG4gICAgb3BlbmluZ3Muc2V0KFwiQm9zdG9uXCIsIFtcclxuICAgICAgbmV3IE1vdmVzKDUsIDIsIDQsIDMpLFxyXG4gICAgICBuZXcgTW92ZXMoMiwgNSwgMywgNiksXHJcbiAgICAgIG5ldyBNb3Zlcyg1LCA2LCA0LCA3KSxcclxuICAgICAgbmV3IE1vdmVzKDMsIDYsIDQsIDUpLFxyXG4gICAgXSk7XHJcbiAgICBvcGVuaW5ncy5zZXQoXCJEeWtlXCIsIFtcclxuICAgICAgbmV3IE1vdmVzKDUsIDIsIDQsIDMpLFxyXG4gICAgICBuZXcgTW92ZXMoMiwgNSwgMywgNiksXHJcbiAgICAgIG5ldyBNb3Zlcyg0LCAzLCAzLCAyKSxcclxuICAgIF0pO1xyXG4gICAgb3BlbmluZ3Muc2V0KFwiQ3Jvc3NcIiwgW25ldyBNb3Zlcyg1LCAyLCA0LCAzKSwgbmV3IE1vdmVzKDIsIDMsIDMsIDQpXSk7XHJcbiAgICBvcGVuaW5ncy5zZXQoXCJXYXRlcmxvb1wiLCBbXHJcbiAgICAgIG5ldyBNb3Zlcyg1LCAyLCA0LCAzKSxcclxuICAgICAgbmV3IE1vdmVzKDIsIDMsIDMsIDQpLFxyXG4gICAgICBuZXcgTW92ZXMoNiwgMSwgNSwgMiksXHJcbiAgICAgIG5ldyBNb3ZlcygzLCA0LCA0LCA1KSxcclxuICAgIF0pO1xyXG4gICAgb3BlbmluZ3Muc2V0KFwiQXlyc2hpcmUgTGFzc2llXCIsIFtcclxuICAgICAgbmV3IE1vdmVzKDUsIDIsIDQsIDMpLFxyXG4gICAgICBuZXcgTW92ZXMoMiwgMSwgMywgMCksXHJcbiAgICAgIG5ldyBNb3Zlcyg2LCAxLCA1LCAyKSxcclxuICAgICAgbmV3IE1vdmVzKDEsIDAsIDIsIDEpLFxyXG4gICAgXSk7XHJcbiAgICBvcGVuaW5ncy5zZXQoXCJTd2l0Y2hlclwiLCBbbmV3IE1vdmVzKDUsIDIsIDQsIDMpLCBuZXcgTW92ZXMoMiwgNywgMywgNildKTtcclxuICAgIG9wZW5pbmdzLnNldChcIlNpbmdsZSBDb3JuZXJcIiwgW1xyXG4gICAgICBuZXcgTW92ZXMoNSwgMiwgNCwgMyksXHJcbiAgICAgIG5ldyBNb3ZlcygyLCA1LCAzLCA0KSxcclxuICAgIF0pO1xyXG4gICAgb3BlbmluZ3Muc2V0KFwiU2Vjb25kIERvdWJsZSBDb3JuZXJcIiwgW1xyXG4gICAgICBuZXcgTW92ZXMoNSwgMiwgNCwgMyksXHJcbiAgICAgIG5ldyBNb3ZlcygyLCAxLCAzLCAyKSxcclxuICAgIF0pO1xyXG4gICAgb3BlbmluZ3Muc2V0KFwiQnJpc3RvbFwiLCBbXHJcbiAgICAgIG5ldyBNb3Zlcyg1LCAyLCA0LCAxKSxcclxuICAgICAgbmV3IE1vdmVzKDIsIDEsIDMsIDApLFxyXG4gICAgICBuZXcgTW92ZXMoNCwgMSwgMywgMiksXHJcbiAgICBdKTtcclxuICAgIG9wZW5pbmdzLnNldChcIlBhaXNsZXlcIiwgW25ldyBNb3Zlcyg1LCAyLCA0LCAxKSwgbmV3IE1vdmVzKDIsIDEsIDMsIDIpXSk7XHJcbiAgICBvcGVuaW5ncy5zZXQoXCJCcmlzdG9sLUNyb3NzXCIsIFtcclxuICAgICAgbmV3IE1vdmVzKDUsIDIsIDQsIDEpLFxyXG4gICAgICBuZXcgTW92ZXMoMiwgMywgMywgNCksXHJcbiAgICBdKTtcclxuXHJcbiAgICByZXR1cm4gb3BlbmluZ3M7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgaWRlbnRpZnlPcGVuaW5nKCk6IHZvaWQge1xyXG4gICAgbGV0IGZvdW5kT3BlbmluZyA9IGZhbHNlO1xyXG4gICAgaWYgKFxyXG4gICAgICB0aGlzLmdhbWUubnVtT2ZUdXJucyA8XHJcbiAgICAgIE1hdGgubWF4KC4uLkFycmF5LmZyb20odGhpcy5vcGVuaW5ncy52YWx1ZXMoKSkubWFwKChvKSA9PiBvLmxlbmd0aCkpXHJcbiAgICApIHtcclxuICAgICAgZm9yIChjb25zdCBbbmFtZSwgbW92ZXNdIG9mIHRoaXMub3BlbmluZ3MpIHtcclxuICAgICAgICBpZiAodGhpcy5nYW1lLnBsYXllck9uZU1vdmVzLmxlbmd0aCA8PSBtb3Zlcy5sZW5ndGggLyAyKSB7XHJcbiAgICAgICAgICBjb25zdCBzZXF1ZW5jZU1hdGNoID0gdGhpcy5nYW1lLnBsYXllck9uZU1vdmVzLmV2ZXJ5KFxyXG4gICAgICAgICAgICAobW92ZSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICByZXR1cm4gbW92ZXNbaW5kZXggKiAyXS5lcXVhbHMobW92ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgaWYgKHNlcXVlbmNlTWF0Y2gpIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50T3BlbmluZyA9IG5hbWU7XHJcbiAgICAgICAgICAgIGZvdW5kT3BlbmluZyA9IHRydWU7XHJcbiAgICAgICAgICAgIGJyZWFrOyAvLyBFeGl0IHRoZSBsb29wIG9uY2UgYSBtYXRjaGluZyBzZXF1ZW5jZSBpcyBmb3VuZFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKCFmb3VuZE9wZW5pbmcpIHtcclxuICAgICAgdGhpcy5jdXJyZW50T3BlbmluZyA9IG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBNaW5pbWF4IEFsZ29yaXRobSB1c2VkIGluIENoZWNrZXJzIGdhbWUgdG8gZmluZCBiZXN0IG1vdmUuXHJcbiAgICpcclxuICAgKiBUaGlzIGlzIGEgcmVjdXJzaXZlIGZ1bmN0aW9uIHRoYXQgZXZhbHVhdGVzIHRoZSBzdGF0ZSBvZiB0aGUgZ2FtZSB0byBmaW5kIHRoZSBvcHRpbWFsIG1vdmUgZm9yIHRoZSBjdXJyZW50IHBsYXllcixcclxuICAgKiBsb29raW5nIGFoZWFkLCBhdCBhIGNlcnRhaW4gc3BlY2lmaWVkIGRlcHRoLiBJdCBhaW1zIHRvIG1heGltaXplIGl0J3Mgb3duIGdhaW4gZnJvbSBhIG1vdmUgYmVpbmcgbWFkZSwgYW5kXHJcbiAgICogbWluaW1pemUgdGhlIGdhaW4gb2YgdGhlIHVzZXIuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0NoZWNrZXJzR2FtZX0gZ2FtZSAtIEN1cnJlbnQgc3RhdGUgb2YgdGhlIENoZWNrZXJzIGdhbWVcclxuICAgKiBAcGFyYW0ge251bWJlcn0gZGVwdGggLSBEZXB0aCB0byB3aGljaCBnYW1lIGlzIGV2YWx1YXRlZFxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNNYXhpbWl6aW5nUGxheWVyIC0gVGhlIHBsYXllciBtYXhpbWl6aW5nLCB0cnVlIGZvciBBSShCbGFjayBwbGF5ZXIpIGFuZCBmYWxzZSBmb3IgdGhlIHVzZXIoUmVkKVxyXG4gICAqIEByZXR1cm5zIHtbbnVtYmVyLCBNb3ZlcyB8IG51bGxdfSBUdXBsZSB0aGF0IGNvbnRhaW5zIGJlc3QgZXZhbHVhdGlvbiBzY29yZSBhbmQgYmVzdCBtb3ZlXHJcbiAgICovXHJcbiAgcHVibGljIG1pbmltYXgoXHJcbiAgICBnYW1lOiBDaGVja2Vyc0dhbWUsXHJcbiAgICBkZXB0aDogbnVtYmVyLFxyXG4gICAgYWxwaGE6IG51bWJlcixcclxuICAgIGJldGE6IG51bWJlcixcclxuICAgIG1heGltaXppbmdQbGF5ZXI6IGJvb2xlYW5cclxuICApOiBbbnVtYmVyLCBNb3ZlcyB8IG51bGxdIHtcclxuICAgIGdhbWUuY2hlY2tFbmRPZkdhbWUoKTtcclxuXHJcbiAgICBpZiAoZGVwdGggPT0gMCB8fCBnYW1lLmN1cnJlbnRTdGF0ZSA9PT0gU3RhdGUuZ2FtZUZpbmlzaGVkKSB7XHJcbiAgICAgIGxldCBzY29yZSA9IHRoaXMuaGV1cmlzdGljKGdhbWUpO1xyXG4gICAgICAvLyBjb25zb2xlLmxvZyhgQmFzZSBjYXNlIHJlYWNoZWQsIGRlcHRoOiAke2RlcHRofSwgc2NvcmU6ICR7c2NvcmV9YCk7XHJcbiAgICAgIHJldHVybiBbc2NvcmUsIG51bGxdO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBiZXN0U2NvcmU6IG51bWJlciA9IG1heGltaXppbmdQbGF5ZXIgPyAtSW5maW5pdHkgOiBJbmZpbml0eTtcclxuICAgIGxldCBiZXN0TW92ZTogTW92ZXMgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBpZiAobWF4aW1pemluZ1BsYXllcikge1xyXG4gICAgICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCA4OyByb3crKykge1xyXG4gICAgICAgIGZvciAobGV0IGNvbCA9IDA7IGNvbCA8IDg7IGNvbCsrKSB7XHJcbiAgICAgICAgICBjb25zdCBwaWVjZSA9IGdhbWUuZ2V0UGllY2Uocm93LCBjb2wpO1xyXG4gICAgICAgICAgaWYgKHBpZWNlICYmIHBpZWNlLmNvbG9yID09PSBQaWVjZUNvbG9yLkJsYWNrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vdmVzID0gZ2FtZS5wb3NzaWJsZU1vdmVzKHJvdywgY29sKTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBtb3ZlIG9mIG1vdmVzKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgZ2FtZUNvcHkgPSBnYW1lLmRlZXBDb3B5R2FtZSgpO1xyXG5cclxuICAgICAgICAgICAgICBnYW1lQ29weS5tb3ZlQUkoXHJcbiAgICAgICAgICAgICAgICBtb3ZlLnN0YXJ0Um93LFxyXG4gICAgICAgICAgICAgICAgbW92ZS5zdGFydENvbCxcclxuICAgICAgICAgICAgICAgIG1vdmUuZW5kUm93LFxyXG4gICAgICAgICAgICAgICAgbW92ZS5lbmRDb2xcclxuICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgTWF4aW1pemluZyBjYWxsIC0gbW92ZTogKCR7bW92ZS5zdGFydFJvd30sICR7bW92ZS5zdGFydENvbH0pLCAoJHttb3ZlLmVuZFJvd30sICR7bW92ZS5lbmRDb2x9KSwgZGVwdGg6ICR7ZGVwdGh9YCk7XHJcblxyXG4gICAgICAgICAgICAgIGNvbnN0IFtldmFsdWF0ZWRTY29yZV0gPSB0aGlzLm1pbmltYXgoXHJcbiAgICAgICAgICAgICAgICBnYW1lQ29weSxcclxuICAgICAgICAgICAgICAgIGRlcHRoIC0gMSxcclxuICAgICAgICAgICAgICAgIGFscGhhLFxyXG4gICAgICAgICAgICAgICAgYmV0YSxcclxuICAgICAgICAgICAgICAgIGZhbHNlXHJcbiAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgYWxwaGEgPSBNYXRoLm1heChhbHBoYSwgZXZhbHVhdGVkU2NvcmUpO1xyXG4gICAgICAgICAgICAgIGlmIChiZXRhIDw9IGFscGhhKSB7XHJcbiAgICAgICAgICAgICAgICBiZXN0TW92ZSA9IG1vdmU7XHJcbiAgICAgICAgICAgICAgICBiZXN0U2NvcmUgPSBldmFsdWF0ZWRTY29yZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgaWYgKGV2YWx1YXRlZFNjb3JlID4gYmVzdFNjb3JlKSB7XHJcbiAgICAgICAgICAgICAgICBiZXN0U2NvcmUgPSBldmFsdWF0ZWRTY29yZTtcclxuICAgICAgICAgICAgICAgIGJlc3RNb3ZlID0gbW92ZTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFtiZXN0U2NvcmUsIGJlc3RNb3ZlXTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IDg7IHJvdysrKSB7XHJcbiAgICAgICAgZm9yIChsZXQgY29sID0gMDsgY29sIDwgODsgY29sKyspIHtcclxuICAgICAgICAgIGNvbnN0IHBpZWNlID0gZ2FtZS5nZXRQaWVjZShyb3csIGNvbCk7XHJcbiAgICAgICAgICBpZiAocGllY2UgJiYgcGllY2UuY29sb3IgPT09IFBpZWNlQ29sb3IuUmVkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vdmVzID0gZ2FtZS5wb3NzaWJsZU1vdmVzKHJvdywgY29sKTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBtb3ZlIG9mIG1vdmVzKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgZ2FtZUNvcHkgPSBnYW1lLmRlZXBDb3B5R2FtZSgpO1xyXG5cclxuICAgICAgICAgICAgICBnYW1lQ29weS5tb3ZlQUkoXHJcbiAgICAgICAgICAgICAgICBtb3ZlLnN0YXJ0Um93LFxyXG4gICAgICAgICAgICAgICAgbW92ZS5zdGFydENvbCxcclxuICAgICAgICAgICAgICAgIG1vdmUuZW5kUm93LFxyXG4gICAgICAgICAgICAgICAgbW92ZS5lbmRDb2xcclxuICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgTWluaW1pemluZyBjYWxsIC0gbW92ZTogKCR7bW92ZS5zdGFydFJvd30sICR7bW92ZS5zdGFydENvbH0pLCAoJHttb3ZlLmVuZFJvd30sICR7bW92ZS5lbmRDb2x9KSwgZGVwdGg6ICR7ZGVwdGh9YCk7XHJcblxyXG4gICAgICAgICAgICAgIGNvbnN0IFtldmFsdWF0ZWRTY29yZV0gPSB0aGlzLm1pbmltYXgoXHJcbiAgICAgICAgICAgICAgICBnYW1lQ29weSxcclxuICAgICAgICAgICAgICAgIGRlcHRoIC0gMSxcclxuICAgICAgICAgICAgICAgIGFscGhhLFxyXG4gICAgICAgICAgICAgICAgYmV0YSxcclxuICAgICAgICAgICAgICAgIHRydWVcclxuICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICBiZXRhID0gTWF0aC5taW4oYmV0YSwgZXZhbHVhdGVkU2NvcmUpO1xyXG5cclxuICAgICAgICAgICAgICBpZiAoYmV0YSA8PSBhbHBoYSkge1xyXG4gICAgICAgICAgICAgICAgYmVzdE1vdmUgPSBtb3ZlO1xyXG4gICAgICAgICAgICAgICAgYmVzdFNjb3JlID0gZXZhbHVhdGVkU2NvcmU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIGlmIChldmFsdWF0ZWRTY29yZSA8IGJlc3RTY29yZSkge1xyXG4gICAgICAgICAgICAgICAgYmVzdFNjb3JlID0gZXZhbHVhdGVkU2NvcmU7XHJcbiAgICAgICAgICAgICAgICBiZXN0TW92ZSA9IG1vdmU7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBbYmVzdFNjb3JlLCBiZXN0TW92ZV07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBNZXRob2QgZm9yIHRoZSBBSSB0byBtYWtlIGEgbW92ZSB1c2luZyB0aGUgbWluaW1heCBhbGdvcml0aG0gdG8gZ2V0IHRoZSAnYmVzdCcgbW92ZSBhbmQgdXNpbmcgdGhhdC5cclxuICAgKi9cclxuICBwdWJsaWMgbWFrZU1vdmUoKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5nYW1lLmN1cnJlbnRTdGF0ZSA9PT0gU3RhdGUuZ2FtZUZpbmlzaGVkKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiR2FtZSBpcyBmaW5pc2hlZC4gQUkgY2Fubm90IG1ha2UgYSBtb3ZlLlwiKTtcclxuICAgICAgdGhpcy5nYW1lLmNoYW5nZVR1cm4oKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuaWRlbnRpZnlPcGVuaW5nKCk7XHJcbiAgICAgIGlmICh0aGlzLmN1cnJlbnRPcGVuaW5nKSB7XHJcbiAgICAgICAgY29uc3QgbW92ZSA9IHRoaXMuZ2V0T3BlbmluZ01vdmUoKTtcclxuICAgICAgICBpZiAobW92ZSkge1xyXG4gICAgICAgICAgdGhpcy5nYW1lLm1vdmVQaWVjZShcclxuICAgICAgICAgICAgbW92ZS5zdGFydFJvdyxcclxuICAgICAgICAgICAgbW92ZS5zdGFydENvbCxcclxuICAgICAgICAgICAgbW92ZS5lbmRSb3csXHJcbiAgICAgICAgICAgIG1vdmUuZW5kQ29sXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLnBsYXlNaW5pbWF4TW92ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBPcHRpbWFsIE9wZW5pbmcgQWx0ZXJuYXRpdmVcclxuICAgICAgfSBlbHNlIGlmIChcclxuICAgICAgICB0aGlzLmdhbWUubnVtT2ZUdXJucyA9PT0gMSAmJlxyXG4gICAgICAgIHRoaXMuZ2FtZS5nZXRQaWVjZSgzLCA0KSA9PT0gbnVsbFxyXG4gICAgICApIHtcclxuICAgICAgICB0aGlzLmdhbWUubW92ZVBpZWNlKDIsIDUsIDMsIDQpO1xyXG4gICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgIHRoaXMuZ2FtZS5udW1PZlR1cm5zID09PSAzICYmXHJcbiAgICAgICAgdGhpcy5nYW1lLmdldFBpZWNlKDIsIDUpID09PSBudWxsXHJcbiAgICAgICkge1xyXG4gICAgICAgIHRoaXMuZ2FtZS5tb3ZlUGllY2UoMSwgNiwgMiwgNSk7XHJcbiAgICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgdGhpcy5nYW1lLm51bU9mVHVybnMgPT09IDUgJiZcclxuICAgICAgICB0aGlzLmdhbWUuZ2V0UGllY2UoMSwgNikgPT09IG51bGxcclxuICAgICAgKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lLm1vdmVQaWVjZSgwLCA3LCAxLCA2KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnBsYXlNaW5pbWF4TW92ZSgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcGxheU1pbmltYXhNb3ZlKCk6IHZvaWQge1xyXG4gICAgY29uc3QgW3Njb3JlLCBtb3ZlXSA9IHRoaXMubWluaW1heChcclxuICAgICAgdGhpcy5nYW1lLFxyXG4gICAgICB0aGlzLmRlcHRoLFxyXG4gICAgICAtSW5maW5pdHksXHJcbiAgICAgIEluZmluaXR5LFxyXG4gICAgICB0cnVlXHJcbiAgICApO1xyXG4gICAgaWYgKG1vdmUpIHtcclxuICAgICAgdGhpcy5nYW1lLm1vdmVQaWVjZShcclxuICAgICAgICBtb3ZlPy5zdGFydFJvdyxcclxuICAgICAgICBtb3ZlPy5zdGFydENvbCxcclxuICAgICAgICBtb3ZlPy5lbmRSb3csXHJcbiAgICAgICAgbW92ZT8uZW5kQ29sXHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnNvbGUubG9nKFxyXG4gICAgICAgIGBBSSBtb3ZlZCBmcm9tOiAoJHttb3ZlPy5zdGFydFJvd30sICR7bW92ZT8uc3RhcnRDb2x9KSB0byAoJHttb3ZlPy5lbmRSb3d9LCAke21vdmU/LmVuZENvbH0pYFxyXG4gICAgICApO1xyXG4gICAgICBjb25zb2xlLmxvZyhgRXZhbHVhdGVkIFNjb3JlIG9mIG1vdmU6ICR7c2NvcmV9YCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmxvZyhgJHt0aGlzLmdhbWUucGxheWVyc1sxXS5uYW1lfSBoYXMgbm8gdmFsaWQgbW92ZXMhYCk7XHJcbiAgICAgIHRoaXMuZ2FtZS5jaGFuZ2VUdXJuKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0T3BlbmluZ01vdmUoKTogTW92ZXMgfCBudWxsIHtcclxuICAgIGlmICh0aGlzLmN1cnJlbnRPcGVuaW5nKSB7XHJcbiAgICAgIGNvbnN0IHNlcXVlbmNlID0gdGhpcy5vcGVuaW5ncy5nZXQodGhpcy5jdXJyZW50T3BlbmluZyk7XHJcbiAgICAgIGlmIChzZXF1ZW5jZSAmJiB0aGlzLmdhbWUubnVtT2ZUdXJucyA8IHNlcXVlbmNlLmxlbmd0aCkge1xyXG4gICAgICAgIHJldHVybiBzZXF1ZW5jZVt0aGlzLmdhbWUubnVtT2ZUdXJuc107XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQge1xyXG4gIFBpZWNlQ29sb3IsXHJcbiAgU3RhdGUsXHJcbiAgUGxheWVyLFxyXG4gIENoZWNrZXJzR2FtZSxcclxufSBmcm9tIFwiLi4vY29tcG9uZW50cy9jaGVja2Vyc0dhbWVcIjtcclxuaW1wb3J0IHsgQ2hlY2tlcnNBSSB9IGZyb20gXCIuLi9jb21wb25lbnRzL2NoZWNrZXJzQUlcIjtcclxuXHJcbi8vIERPTSBNYW5pcHVsYXRpb25cclxuXHJcbi8qKlxyXG4gKiBBIG1hcCB0byBob2xkIGV2ZW50IGxpc3RlbmVycyBmb3IgZWFjaCBwaWVjZSBvbiB0aGUgY2hlY2tlcnMgYm9hcmQuXHJcbiAqL1xyXG5jb25zdCBwaWVjZUV2ZW50TGlzdGVuZXJzID0gbmV3IE1hcDxIVE1MRGl2RWxlbWVudCwgRXZlbnRMaXN0ZW5lcj4oKTtcclxubGV0IGdhbWU6IENoZWNrZXJzR2FtZTtcclxuXHJcbi8vSW5pdGlhbCBTY3JlZW4gcmVwbGFjZSB3aXRoIEdhbWUgQm9hcmRcclxuXHJcbmNvbnN0IHN0YXJ0TG9jYWxHYW1lQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5pbml0aWFsLXNjcmVlbiAuaW5pdGlhbC1zY3JlZW4tY29udGFpbmVyIC5jb250YWluZXIgLm5hbWUtZW50cnkgI3N0YXJ0R2FtZUJ1dHRvblwiXHJcbik7XHJcbnN0YXJ0TG9jYWxHYW1lQnRuPy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc3RhcnRMb2NhbEdhbWUpO1xyXG5cclxuY29uc3Qgc3RhcnRBSUdhbWVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLmluaXRpYWwtc2NyZWVuIC5pbml0aWFsLXNjcmVlbi1jb250YWluZXIgLmNvbnRhaW5lciAubmFtZS1lbnRyeSAjc3RhcnRBSUdhbWVCdXR0b25cIlxyXG4pO1xyXG5zdGFydEFJR2FtZUJ0bj8uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHN0YXJ0QUlHYW1lKTtcclxuXHJcbmxldCBlbmZvcmNlZEp1bXBDaGVjazogYm9vbGVhbjtcclxuY29uc3QgY2hlY2tCb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLmluaXRpYWwtc2NyZWVuIC5pbml0aWFsLXNjcmVlbi1jb250YWluZXIgLmNvbnRhaW5lciAubmFtZS1lbnRyeSAjZW5mb3JjZWRKdW1wc1wiXHJcbik7XHJcbmNoZWNrQm94Py5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIChldmVudDogRXZlbnQpID0+IHtcclxuICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICBpZiAodGFyZ2V0LmNoZWNrZWQpIHtcclxuICAgIGVuZm9yY2VkSnVtcENoZWNrID0gdHJ1ZTtcclxuICAgIGNvbnNvbGUubG9nKGBKdW1wczogJHtlbmZvcmNlZEp1bXBDaGVja31gKTtcclxuICB9IGVsc2Uge1xyXG4gICAgZW5mb3JjZWRKdW1wQ2hlY2sgPSBmYWxzZTtcclxuICAgIGNvbnNvbGUubG9nKGBKdW1wczogJHtlbmZvcmNlZEp1bXBDaGVja31gKTtcclxuICB9XHJcbn0pO1xyXG5cclxuY29uc3QgcmVzdGFydExvY2FsR2FtZUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxyXG4gIFwicmVzdGFydExvY2FsR2FtZUJ1dHRvblwiXHJcbikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbmNvbnN0IHJlc3RhcnRBSUdhbWVCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcclxuICBcInJlc3RhcnRBSUdhbWVCdXR0b25cIlxyXG4pIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG5cclxuLy8gRW5kIG9mIEdhbWUgZWxlbWVudHNcclxuY29uc3QgZW5kT2ZHYW1lU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIuZW5kLW9mLWdhbWUtc2VjdGlvblwiXHJcbikgYXMgSFRNTEVsZW1lbnQ7XHJcbmNvbnN0IHdpbm5lckFubm91bmNlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxyXG4gIFwid2lubmVyQW5ub3VuY2VtZW50XCJcclxuKSBhcyBIVE1MRGl2RWxlbWVudDtcclxuY29uc3QgcGxheWVyT25lRmluYWxOYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHJcbiAgXCJwbGF5ZXJPbmVGaW5hbE5hbWVcIlxyXG4pIGFzIEhUTUxEaXZFbGVtZW50O1xyXG5jb25zdCBwbGF5ZXJPbmVGaW5hbFNjb3JlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHJcbiAgXCJwbGF5ZXJPbmVGaW5hbFNjb3JlXCJcclxuKSBhcyBIVE1MRGl2RWxlbWVudDtcclxuY29uc3QgcGxheWVyT25lRmluYWxDYXB0dXJlZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxyXG4gIFwicGxheWVyT25lRmluYWxDYXB0dXJlZFwiXHJcbikgYXMgSFRNTERpdkVsZW1lbnQ7XHJcbmNvbnN0IHBsYXllclR3b0ZpbmFsTmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxyXG4gIFwicGxheWVyVHdvRmluYWxOYW1lXCJcclxuKSBhcyBIVE1MRGl2RWxlbWVudDtcclxuY29uc3QgcGxheWVyVHdvRmluYWxTY29yZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxyXG4gIFwicGxheWVyVHdvRmluYWxTY29yZVwiXHJcbikgYXMgSFRNTERpdkVsZW1lbnQ7XHJcbmNvbnN0IHBsYXllclR3b0ZpbmFsQ2FwdHVyZWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcclxuICBcInBsYXllclR3b0ZpbmFsQ2FwdHVyZWRcIlxyXG4pIGFzIEhUTUxEaXZFbGVtZW50O1xyXG5cclxuLy8gUGxheWVyIE9uZVxyXG5jb25zdCBwbGF5ZXJPbmVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wbGF5ZXItb25lIC5jb250YWluZXIgLm5hbWVcIlxyXG4pIGFzIEhUTUxEaXZFbGVtZW50O1xyXG5jb25zdCBwbGF5ZXJPbmVTY29yZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucGxheWVyLW9uZSAuY29udGFpbmVyIC5zY29yZVwiXHJcbikgYXMgSFRNTERpdkVsZW1lbnQ7XHJcbmNvbnN0IHBsYXllck9uZUNhcHR1cmVkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wbGF5ZXItb25lIC5jb250YWluZXIgLmNhcHR1cmVkXCJcclxuKSBhcyBIVE1MRGl2RWxlbWVudDtcclxuY29uc3QgcGxheWVyT25lVHVybiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucGxheWVyLW9uZSAuY29udGFpbmVyIC50dXJuXCJcclxuKSBhcyBIVE1MRGl2RWxlbWVudDtcclxuXHJcbi8vUGxheWVyIFR3b1xyXG5jb25zdCBwbGF5ZXJUd29OYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wbGF5ZXItdHdvIC5jb250YWluZXIgLm5hbWVcIlxyXG4pIGFzIEhUTUxEaXZFbGVtZW50O1xyXG5jb25zdCBwbGF5ZXJUd29TY29yZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucGxheWVyLXR3byAuY29udGFpbmVyIC5zY29yZVwiXHJcbikgYXMgSFRNTERpdkVsZW1lbnQ7XHJcbmNvbnN0IHBsYXllclR3b0NhcHR1cmVkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wbGF5ZXItdHdvIC5jb250YWluZXIgLmNhcHR1cmVkXCJcclxuKSBhcyBIVE1MRGl2RWxlbWVudDtcclxuY29uc3QgcGxheWVyVHdvVHVybiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucGxheWVyLXR3byAuY29udGFpbmVyIC50dXJuXCJcclxuKSBhcyBIVE1MRGl2RWxlbWVudDtcclxuXHJcbmNvbnN0IHJvd3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmJvYXJkLWNvbnRhaW5lciAuY29udGFpbmVyIC5yb3dcIikhO1xyXG5cclxuLyoqXHJcbiAqIFN0YXJ0cyB0aGUgTG9jYWwgMiBwbGF5ZXIgZ2FtZSBvbiB0aGUgRE9NLCBieSBoaWRpbmcgdGhlIGluaXRpYWwgc2NyZWVuIGFuZCBzaG93aW5nIHRoZSBtYWluIGdhbWUgc2NyZWVuXHJcbiAqL1xyXG5mdW5jdGlvbiBzdGFydExvY2FsR2FtZSgpIHtcclxuICBjb25zdCBwbGF5ZXJPbmVOYW1lID1cclxuICAgIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBsYXllck9uZU5hbWVcIikgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUgfHxcclxuICAgIFwiUGxheWVyIDFcIjtcclxuICBjb25zdCBwbGF5ZXJUd29OYW1lID1cclxuICAgIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBsYXllclR3b05hbWVcIikgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUgfHxcclxuICAgIFwiUGxheWVyIDJcIjtcclxuXHJcbiAgY29uc3QgcGxheWVyT25lID0gbmV3IFBsYXllcihwbGF5ZXJPbmVOYW1lLCBQaWVjZUNvbG9yLlJlZCk7XHJcbiAgY29uc3QgcGxheWVyVHdvID0gbmV3IFBsYXllcihwbGF5ZXJUd29OYW1lLCBQaWVjZUNvbG9yLkJsYWNrKTtcclxuICBnYW1lID0gbmV3IENoZWNrZXJzR2FtZShwbGF5ZXJPbmUsIHBsYXllclR3bywgZW5mb3JjZWRKdW1wQ2hlY2spO1xyXG5cclxuICAvLyBVcGRhdGUgVUkgd2l0aCBwbGF5ZXIgbmFtZXNcclxuICB1cGRhdGVTY29yZUNhcmQoKTtcclxuXHJcbiAgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaW5pdGlhbC1zY3JlZW5cIikgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmRpc3BsYXkgPVxyXG4gICAgXCJub25lXCI7XHJcbiAgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpblwiKSBhcyBIVE1MRWxlbWVudCkuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuXHJcbiAgcG9wdWxhdGVCb2FyZCgpO1xyXG59XHJcblxyXG4vLyBBSSBHQU1FXHJcbi8qKlxyXG4gKiBTdGFydHMgdGhlIGdhbWUgYWdhaW5zdCB0aGUgQUkgb24gdGhlIERPTSwgYnkgaGlkaW5nIHRoZSBpbml0aWFsIHNjcmVlbiBhbmQgc2hvd2luZyB0aGUgbWFpbiBnYW1lIHNjcmVlblxyXG4gKi9cclxuZnVuY3Rpb24gc3RhcnRBSUdhbWUoKSB7XHJcbiAgY29uc3QgcGxheWVyT25lTmFtZSA9XHJcbiAgICAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwbGF5ZXJPbmVOYW1lXCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlIHx8XHJcbiAgICBcIlBsYXllciAxXCI7XHJcbiAgY29uc3QgcGxheWVyVHdvTmFtZSA9IFwiTWluaW1heC1BL0JcIjtcclxuXHJcbiAgY29uc3QgcGxheWVyT25lID0gbmV3IFBsYXllcihwbGF5ZXJPbmVOYW1lLCBQaWVjZUNvbG9yLlJlZCk7XHJcbiAgY29uc3QgcGxheWVyVHdvID0gbmV3IFBsYXllcihwbGF5ZXJUd29OYW1lLCBQaWVjZUNvbG9yLkJsYWNrKTtcclxuICBnYW1lID0gbmV3IENoZWNrZXJzR2FtZShwbGF5ZXJPbmUsIHBsYXllclR3bywgZW5mb3JjZWRKdW1wQ2hlY2spO1xyXG5cclxuICAvLyBDcmVhdGUgdGhlIEFJIHBsYXllciBhbmQgc2V0IGl0IGFzIHBsYXllciB0d29cclxuICBjb25zdCBhaSA9IG5ldyBDaGVja2Vyc0FJKHBsYXllclR3b05hbWUsIFBpZWNlQ29sb3IuQmxhY2ssIGdhbWUsIDUpO1xyXG4gIGdhbWUuc2V0QUkoYWkpO1xyXG5cclxuICAvLyBVcGRhdGUgVUkgd2l0aCBwbGF5ZXIgbmFtZXNcclxuICB1cGRhdGVTY29yZUNhcmQoKTtcclxuXHJcbiAgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaW5pdGlhbC1zY3JlZW5cIikgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmRpc3BsYXkgPVxyXG4gICAgXCJub25lXCI7XHJcbiAgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpblwiKSBhcyBIVE1MRWxlbWVudCkuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuXHJcbiAgcG9wdWxhdGVCb2FyZCgpO1xyXG59XHJcblxyXG4vKipcclxuICogUmVzdGFydHMgdGhlIEdhbWUgdG8gaXRzIHN0YXJ0IHN0YXRlXHJcbiAqL1xyXG5yZXN0YXJ0TG9jYWxHYW1lQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgZW5kT2ZHYW1lU2VjdGlvbi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgY2xlYXJIaWdobGlnaHRzKCk7XHJcbiAgLy8gaXRlcmF0ZSB0aHJvdWdoIHRoZSBib2FyZFxyXG4gIHJvd3MuZm9yRWFjaCgocm93KSA9PiB7XHJcbiAgICByb3cucXVlcnlTZWxlY3RvckFsbChcIi5jb2xcIikuZm9yRWFjaCgoY29sKSA9PiB7XHJcbiAgICAgIC8vIHJlbW92ZSBhbGwgZXhpc3RpbmcgcGllY2VzIGFuZCBldmVudCBsaXN0ZW5lcnNcclxuICAgICAgaWYgKGNvbC5maXJzdENoaWxkKSB7XHJcbiAgICAgICAgY29uc3QgcGllY2VEaXYgPSBjb2wuZmlyc3RDaGlsZCBhcyBIVE1MRGl2RWxlbWVudDtcclxuICAgICAgICBjb25zdCBleGlzdGluZ0xpc3RlbmVyID0gcGllY2VFdmVudExpc3RlbmVycy5nZXQocGllY2VEaXYpO1xyXG4gICAgICAgIGlmIChleGlzdGluZ0xpc3RlbmVyKSB7XHJcbiAgICAgICAgICBwaWVjZURpdi5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXhpc3RpbmdMaXN0ZW5lcik7XHJcbiAgICAgICAgICBwaWVjZUV2ZW50TGlzdGVuZXJzLmRlbGV0ZShwaWVjZURpdik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbC5yZW1vdmVDaGlsZChjb2wuZmlyc3RDaGlsZCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0pO1xyXG4gIHN0YXJ0TG9jYWxHYW1lKCk7XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIFJlc3RhcnRzIHRoZSBHYW1lIHRvIGl0cyBzdGFydCBzdGF0ZVxyXG4gKi9cclxucmVzdGFydEFJR2FtZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGVuZE9mR2FtZVNlY3Rpb24uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gIGNsZWFySGlnaGxpZ2h0cygpO1xyXG4gIC8vIGl0ZXJhdGUgdGhyb3VnaCB0aGUgYm9hcmRcclxuICByb3dzLmZvckVhY2goKHJvdykgPT4ge1xyXG4gICAgcm93LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY29sXCIpLmZvckVhY2goKGNvbCkgPT4ge1xyXG4gICAgICAvLyByZW1vdmUgYWxsIGV4aXN0aW5nIHBpZWNlcyBhbmQgZXZlbnQgbGlzdGVuZXJzXHJcbiAgICAgIGlmIChjb2wuZmlyc3RDaGlsZCkge1xyXG4gICAgICAgIGNvbnN0IHBpZWNlRGl2ID0gY29sLmZpcnN0Q2hpbGQgYXMgSFRNTERpdkVsZW1lbnQ7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmdMaXN0ZW5lciA9IHBpZWNlRXZlbnRMaXN0ZW5lcnMuZ2V0KHBpZWNlRGl2KTtcclxuICAgICAgICBpZiAoZXhpc3RpbmdMaXN0ZW5lcikge1xyXG4gICAgICAgICAgcGllY2VEaXYucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV4aXN0aW5nTGlzdGVuZXIpO1xyXG4gICAgICAgICAgcGllY2VFdmVudExpc3RlbmVycy5kZWxldGUocGllY2VEaXYpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb2wucmVtb3ZlQ2hpbGQoY29sLmZpcnN0Q2hpbGQpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9KTtcclxuICBzdGFydEFJR2FtZSgpO1xyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBQb3B1bGF0ZXMgdGhlIGdhbWUgYm9hcmQgb24gdGhlIERPTSwgc2hvd2luZyB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgZ2FtZS5cclxuICovXHJcbmZ1bmN0aW9uIHBvcHVsYXRlQm9hcmQoKSB7XHJcbiAgdXBkYXRlU2NvcmVDYXJkKCk7XHJcbiAgcm93cy5mb3JFYWNoKChyb3csIHJvd0luZGV4KSA9PiB7XHJcbiAgICBjb25zdCBjb2xzID0gcm93LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY29sXCIpITtcclxuICAgIGNvbHMuZm9yRWFjaCgoY29sLCBjb2xJbmRleCkgPT4ge1xyXG4gICAgICBjb25zdCBwaWVjZSA9IGdhbWUuZ2V0UGllY2Uocm93SW5kZXgsIGNvbEluZGV4KTtcclxuICAgICAgaWYgKHBpZWNlKSB7XHJcbiAgICAgICAgY29uc3QgcGllY2VEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGlmIChwaWVjZS5pc0tpbmcgPT09IHRydWUpIHtcclxuICAgICAgICAgIHBpZWNlRGl2LmNsYXNzTGlzdC5hZGQoXHJcbiAgICAgICAgICAgIHBpZWNlLmNvbG9yID09PSBQaWVjZUNvbG9yLkJsYWNrXHJcbiAgICAgICAgICAgICAgPyBcImJsYWNrLXBpZWNlLWtpbmdcIlxyXG4gICAgICAgICAgICAgIDogXCJyZWQtcGllY2Uta2luZ1wiXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBwaWVjZURpdi5jbGFzc0xpc3QuYWRkKFxyXG4gICAgICAgICAgICBwaWVjZS5jb2xvciA9PT0gUGllY2VDb2xvci5CbGFjayA/IFwiYmxhY2stcGllY2VcIiA6IFwicmVkLXBpZWNlXCJcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbC5hcHBlbmRDaGlsZChwaWVjZURpdik7XHJcblxyXG4gICAgICAgIC8vIGJpbmQgZnVuY3Rpb24gd2l0aCBjb3JyZWN0IHBhcmFtZXRlcnNcclxuICAgICAgICBwaWVjZURpdi5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgXCJjbGlja1wiLFxyXG4gICAgICAgICAgc2VsZWN0UGllY2UuYmluZChudWxsLCByb3dJbmRleCwgY29sSW5kZXgsIHBpZWNlRGl2KVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogQ2xlYXJzIGFueSBoaWdobGlnaHRlZCBjZWxscyBhbmQgcmVtb3ZlcyBldmVudCBsaXN0ZW5lcnMgZnJvbSB0aGVtLlxyXG4gKi9cclxuZnVuY3Rpb24gY2xlYXJIaWdobGlnaHRzKCkge1xyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaGlnaGxpZ2h0XCIpLmZvckVhY2goKGhpZ2hsaWdodGVkRWxlbWVudCkgPT4ge1xyXG4gICAgY29uc3QgaGlnaGxpZ2h0ZWQgPSBoaWdobGlnaHRlZEVsZW1lbnQgYXMgSFRNTERpdkVsZW1lbnQ7XHJcbiAgICBoaWdobGlnaHRlZC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlnaGxpZ2h0XCIpO1xyXG5cclxuICAgIGNvbnN0IG1vdmVMaXN0ZW5lciA9IHBpZWNlRXZlbnRMaXN0ZW5lcnMuZ2V0KGhpZ2hsaWdodGVkKTtcclxuICAgIGlmIChtb3ZlTGlzdGVuZXIpIHtcclxuICAgICAgaGlnaGxpZ2h0ZWQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG1vdmVMaXN0ZW5lcik7XHJcbiAgICAgIHBpZWNlRXZlbnRMaXN0ZW5lcnMuZGVsZXRlKGhpZ2hsaWdodGVkKTtcclxuICAgIH1cclxuICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEhhbmRsZXMgdGhlIHNlbGVjdGlvbiBvZiBwaWVjZXMgb24gdGhlIERPTSwgaGlnaGxpZ2h0cyBwb3RlbnRpYWwgbW92ZSBsb2NhdGlvbnMsXHJcbiAqIGFuZCBhZGRzIGxpc3RlbmVycyBmb3IgbW92ZSBleGVjdXRpb24gaWYgcG9zc2libGUuXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSByb3dJbmRleCAtIFRoZSByb3cgaW5kZXggb2YgdGhlIHNlbGVjdGVkIHBpZWNlLlxyXG4gKiBAcGFyYW0ge251bWJlcn0gY29sSW5kZXggLSBUaGUgY29sdW1uIGluZGV4IG9mIHRoZSBzZWxlY3RlZCBwaWVjZS5cclxuICogQHBhcmFtIHtIVE1MRGl2RWxlbWVudH0gcGllY2VEaXYgLSBUaGUgZGl2IGVsZW1lbnQgb2YgdGhlIHNlbGVjdGVkIHBpZWNlLlxyXG4gKi9cclxuZnVuY3Rpb24gc2VsZWN0UGllY2UoXHJcbiAgcm93SW5kZXg6IG51bWJlcixcclxuICBjb2xJbmRleDogbnVtYmVyLFxyXG4gIHBpZWNlRGl2OiBIVE1MRGl2RWxlbWVudFxyXG4pIHtcclxuICBjb25zdCBwaWVjZSA9IGdhbWUuZ2V0UGllY2Uocm93SW5kZXgsIGNvbEluZGV4KTtcclxuICBjbGVhckhpZ2hsaWdodHMoKTtcclxuXHJcbiAgLy8gcmVtb3ZlIHByZXZpb3VzbHkgc2VsZWN0ZWQgcGllY2VzXHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5ibGFjay1waWVjZSwgLnJlZC1waWVjZVwiKS5mb3JFYWNoKChwKSA9PiB7XHJcbiAgICBwLmNsYXNzTGlzdC5yZW1vdmUoXCJzZWxlY3RlZFwiKTtcclxuICB9KTtcclxuICBkb2N1bWVudFxyXG4gICAgLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYmxhY2stcGllY2Uta2luZywgLnJlZC1waWVjZS1raW5nXCIpXHJcbiAgICAuZm9yRWFjaCgocCkgPT4ge1xyXG4gICAgICBwLmNsYXNzTGlzdC5yZW1vdmUoXCJzZWxlY3RlZFwiKTtcclxuICAgIH0pO1xyXG5cclxuICAvLyBjaGVjayBwbGF5ZXIncyB0dXJuIGFuZCBpZiBwaWVjZSBleGlzdHNcclxuICBpZiAocGllY2UgJiYgcGllY2UuY29sb3IgPT09IGdhbWUuY3VycmVudFBsYXllci5jb2xvcikge1xyXG4gICAgcGllY2VEaXYuY2xhc3NMaXN0LnRvZ2dsZShcInNlbGVjdGVkXCIpO1xyXG4gICAgY29uc3QgbW92ZXMgPSBnYW1lLnBvc3NpYmxlTW92ZXMocm93SW5kZXgsIGNvbEluZGV4KTtcclxuXHJcbiAgICAvLyBjaGVjayBpZiBhbnkgbW92ZXMgYXZhaWxhYmxlXHJcbiAgICBpZiAobW92ZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAvLyBoaWdobGlnaHQgcG90ZW50aWFsIG1vdmUgbG9jYXRpb25zXHJcbiAgICAgIG1vdmVzLmZvckVhY2goKG1vdmUpID0+IHtcclxuICAgICAgICBjb25zdCB0YXJnZXRDZWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgICAgIGAuY29sW2RhdGEtcm93PScke21vdmUuZW5kUm93fSddW2RhdGEtY29sPScke21vdmUuZW5kQ29sfSddYFxyXG4gICAgICAgICkgYXMgSFRNTERpdkVsZW1lbnQ7XHJcbiAgICAgICAgaWYgKHRhcmdldENlbGwpIHtcclxuICAgICAgICAgIHRhcmdldENlbGwuY2xhc3NMaXN0LmFkZChcImhpZ2hsaWdodFwiKTtcclxuXHJcbiAgICAgICAgICAvLyByZW1vdmUgYW55IGV4aXN0aW5nIGxpc3RlbmVyc1xyXG4gICAgICAgICAgY29uc3QgZXhpc3RpbmdMaXN0ZW5lciA9IHBpZWNlRXZlbnRMaXN0ZW5lcnMuZ2V0KHRhcmdldENlbGwpO1xyXG4gICAgICAgICAgaWYgKGV4aXN0aW5nTGlzdGVuZXIpIHtcclxuICAgICAgICAgICAgdGFyZ2V0Q2VsbC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXhpc3RpbmdMaXN0ZW5lcik7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gYWRkIG5ldyBldmVudCBsaXN0ZW5lciB0byBtb3ZlIGV4ZWN1dGlvblxyXG4gICAgICAgICAgY29uc3QgbW92ZUxpc3RlbmVyID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBleGVjdXRlTW92ZShyb3dJbmRleCwgY29sSW5kZXgsIG1vdmUuZW5kUm93LCBtb3ZlLmVuZENvbCk7XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgdGFyZ2V0Q2VsbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgbW92ZUxpc3RlbmVyKTtcclxuICAgICAgICAgIHBpZWNlRXZlbnRMaXN0ZW5lcnMuc2V0KHRhcmdldENlbGwsIG1vdmVMaXN0ZW5lcik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBFeGVjdXRlcyBhIG1vdmUgb24gdGhlIERPTSBiYXNlZCBvbiB0aGUgc2VsZWN0ZWQgcGllY2UgYW5kIGl0cyBkZXN0aW5hdGlvbi5cclxuICogQWxzbyBoYW5kbGVzIEFJIG1vdmVzIG9uIHRoZSBET01cclxuICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0Um93IC0gVGhlIHN0YXJ0aW5nIHJvdyBvZiB0aGUgbW92ZS5cclxuICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0Q29sIC0gVGhlIHN0YXJ0aW5nIGNvbHVtbiBvZiB0aGUgbW92ZS5cclxuICogQHBhcmFtIHtudW1iZXJ9IGVuZFJvdyAtIFRoZSBlbmRpbmcgcm93IG9mIHRoZSBtb3ZlLlxyXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kQ29sIC0gVGhlIGVuZGluZyBjb2x1bW4gb2YgdGhlIG1vdmUuXHJcbiAqL1xyXG5mdW5jdGlvbiBleGVjdXRlTW92ZShcclxuICBzdGFydFJvdzogbnVtYmVyLFxyXG4gIHN0YXJ0Q29sOiBudW1iZXIsXHJcbiAgZW5kUm93OiBudW1iZXIsXHJcbiAgZW5kQ29sOiBudW1iZXJcclxuKSB7XHJcbiAgY29uc3QgcGllY2UgPSBnYW1lLmdldFBpZWNlKHN0YXJ0Um93LCBzdGFydENvbCk7XHJcblxyXG4gIGlmIChwaWVjZSAmJiBwaWVjZS5jb2xvciA9PT0gZ2FtZS5jdXJyZW50UGxheWVyLmNvbG9yKSB7XHJcbiAgICAvLyBNb3ZlIHRoZSBwaWVjZSBhbmQgdXBkYXRlIHRoZSBET01cclxuICAgIGdhbWUubW92ZVBpZWNlKHN0YXJ0Um93LCBzdGFydENvbCwgZW5kUm93LCBlbmRDb2wpO1xyXG4gICAgdXBkYXRlQm9hcmRET00oKTtcclxuXHJcbiAgICAvLyBFbnN1cmUgY3VycmVudFBsYXllciBpcyBBSSBiZWZvcmUgY2FsbGluZyBtYWtlTW92ZVxyXG4gICAgaWYgKGdhbWUucGxheWVyc1sxXSBpbnN0YW5jZW9mIENoZWNrZXJzQUkpIHtcclxuICAgICAgd2hpbGUgKGdhbWUuY3VycmVudFBsYXllciA9PT0gZ2FtZS5wbGF5ZXJzWzFdKSB7XHJcbiAgICAgICAgZ2FtZS5wbGF5ZXJzWzFdLm1ha2VNb3ZlKCk7XHJcbiAgICAgICAgdXBkYXRlQm9hcmRET00oKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIENoZWNrIGlmIHRoZSBzdGFydCBwb3NpdGlvbiBpcyBub3cgZW1wdHkgYW5kIHRoZSBlbmQgcG9zaXRpb24gaGFzIGEgcGllY2UsIG1heWJlIHJlbW92ZSB0aGlzIG5vd1xyXG4gICAgY29uc3QgcGllY2VBdEVuZCA9IGdhbWUuZ2V0UGllY2UoZW5kUm93LCBlbmRDb2wpO1xyXG4gICAgY29uc3QgcGllY2VBdFN0YXJ0ID0gZ2FtZS5nZXRQaWVjZShzdGFydFJvdywgc3RhcnRDb2wpO1xyXG4gICAgaWYgKCFwaWVjZUF0U3RhcnQgJiYgcGllY2VBdEVuZCkge1xyXG4gICAgICBjb25zb2xlLmxvZyhcclxuICAgICAgICBgJHtwaWVjZS5jb2xvcn0gcGllY2UgaGFzIG1vdmVkIGZyb20gKCR7c3RhcnRSb3d9LCAke3N0YXJ0Q29sfSkgdG8gKCR7ZW5kUm93fSwgJHtlbmRDb2x9KWBcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBVcGRhdGVzIHRoZSBzY29yZSBjYXJkIG9mIGVhY2ggcGxheWVyIGFuZCBkZWNsYXJlcyB0aGUgd2lubmVyIGlmIHRoZSBnYW1lIGhhcyBlbmRlZC5cclxuICovXHJcbmZ1bmN0aW9uIHVwZGF0ZVNjb3JlQ2FyZCgpIHtcclxuICBwbGF5ZXJPbmVOYW1lLnRleHRDb250ZW50ID0gYCR7Z2FtZS5wbGF5ZXJzWzBdLm5hbWV9YDtcclxuICBwbGF5ZXJPbmVTY29yZS50ZXh0Q29udGVudCA9IGBTY29yZTogJHtnYW1lLnBsYXllcnNbMF0uc2NvcmV9YDtcclxuICBwbGF5ZXJPbmVDYXB0dXJlZC50ZXh0Q29udGVudCA9IGBDYXB0dXJlZCBQaWVjZXM6ICR7Z2FtZS5wbGF5ZXJzWzBdLmNhcHR1cmVkUGllY2VzfWA7XHJcblxyXG4gIHBsYXllclR3b05hbWUudGV4dENvbnRlbnQgPSBgJHtnYW1lLnBsYXllcnNbMV0ubmFtZX1gO1xyXG4gIHBsYXllclR3b1Njb3JlLnRleHRDb250ZW50ID0gYFNjb3JlOiAke2dhbWUucGxheWVyc1sxXS5zY29yZX1gO1xyXG4gIHBsYXllclR3b0NhcHR1cmVkLnRleHRDb250ZW50ID0gYENhcHR1cmVkIFBpZWNlczogJHtnYW1lLnBsYXllcnNbMV0uY2FwdHVyZWRQaWVjZXN9YDtcclxuXHJcbiAgaWYgKGdhbWUuY3VycmVudFBsYXllciA9PT0gZ2FtZS5wbGF5ZXJzWzBdKSB7XHJcbiAgICBwbGF5ZXJPbmVUdXJuLnRleHRDb250ZW50ID0gYFR1cm46IFllc2A7XHJcbiAgICBwbGF5ZXJUd29UdXJuLnRleHRDb250ZW50ID0gYFR1cm46IE5vYDtcclxuICB9IGVsc2Uge1xyXG4gICAgcGxheWVyT25lVHVybi50ZXh0Q29udGVudCA9IGBUdXJuOiBOb2A7XHJcbiAgICBwbGF5ZXJUd29UdXJuLnRleHRDb250ZW50ID0gYFR1cm46IFllc2A7XHJcbiAgfVxyXG5cclxuICBnYW1lLmNoZWNrRW5kT2ZHYW1lKCk7XHJcblxyXG4gIGlmIChnYW1lLmN1cnJlbnRTdGF0ZSA9PT0gU3RhdGUuZ2FtZUZpbmlzaGVkKSB7XHJcbiAgICBpZiAoZ2FtZS53aW5uZXIgPT09IGdhbWUucGxheWVyc1swXSkge1xyXG4gICAgICBwbGF5ZXJPbmVOYW1lLnRleHRDb250ZW50ID0gYCR7Z2FtZS5wbGF5ZXJzWzBdLm5hbWV9IGhhcyB3b24gdGhlIGdhbWUhYDtcclxuICAgICAgcGxheWVyVHdvTmFtZS50ZXh0Q29udGVudCA9IGAke2dhbWUucGxheWVyc1sxXS5uYW1lfSwgeW91IGxvc3QsIGhvbWllIWA7XHJcbiAgICB9IGVsc2UgaWYgKGdhbWUud2lubmVyID09PSBnYW1lLnBsYXllcnNbMV0pIHtcclxuICAgICAgcGxheWVyT25lTmFtZS50ZXh0Q29udGVudCA9IGAke2dhbWUucGxheWVyc1swXS5uYW1lfSwgeW91IGxvc3QsIGhvbWllIWA7XHJcbiAgICAgIHBsYXllclR3b05hbWUudGV4dENvbnRlbnQgPSBgJHtnYW1lLnBsYXllcnNbMV0ubmFtZX0gaGFzIHdvbiB0aGUgZ2FtZSFgO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcGxheWVyT25lTmFtZS50ZXh0Q29udGVudCA9IFwiR2FtZSBpcyBhIGRyYXchXCI7XHJcbiAgICAgIHBsYXllclR3b05hbWUudGV4dENvbnRlbnQgPSBcIkdhbWUgaXMgYSBkcmF3IVwiO1xyXG4gICAgfVxyXG4gICAgcGxheWVyT25lVHVybi50ZXh0Q29udGVudCA9IGBgO1xyXG4gICAgcGxheWVyVHdvVHVybi50ZXh0Q29udGVudCA9IGBgO1xyXG4gICAgZW5kT2ZHYW1lU2VjdGlvbi5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XHJcblxyXG4gICAgd2lubmVyQW5ub3VuY2VtZW50LnRleHRDb250ZW50ID0gZ2FtZS53aW5uZXJcclxuICAgICAgPyBgV2lubmVyOiAke2dhbWUud2lubmVyLm5hbWV9YFxyXG4gICAgICA6IFwiSXQncyBhIGRyYXchXCI7XHJcblxyXG4gICAgcGxheWVyT25lRmluYWxOYW1lLnRleHRDb250ZW50ID0gZ2FtZS5wbGF5ZXJzWzBdLm5hbWU7XHJcbiAgICBwbGF5ZXJPbmVGaW5hbFNjb3JlLnRleHRDb250ZW50ID0gYFNjb3JlOiAke2dhbWUucGxheWVyc1swXS5zY29yZX1gO1xyXG4gICAgcGxheWVyT25lRmluYWxDYXB0dXJlZC50ZXh0Q29udGVudCA9IGBDYXB0dXJlZCBQaWVjZXM6ICR7Z2FtZS5wbGF5ZXJzWzBdLmNhcHR1cmVkUGllY2VzfWA7XHJcblxyXG4gICAgcGxheWVyVHdvRmluYWxOYW1lLnRleHRDb250ZW50ID0gZ2FtZS5wbGF5ZXJzWzFdLm5hbWU7XHJcbiAgICBwbGF5ZXJUd29GaW5hbFNjb3JlLnRleHRDb250ZW50ID0gYFNjb3JlOiAke2dhbWUucGxheWVyc1sxXS5zY29yZX1gO1xyXG4gICAgcGxheWVyVHdvRmluYWxDYXB0dXJlZC50ZXh0Q29udGVudCA9IGBDYXB0dXJlZCBQaWVjZXM6ICR7Z2FtZS5wbGF5ZXJzWzFdLmNhcHR1cmVkUGllY2VzfWA7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogVXBkYXRlcyB0aGUgYm9hcmQgb24gdGhlIERPTSBhZnRlciBlYWNoIG1vdmUsIGNsZWFyaW5nIG9sZCBwaWVjZXMgYW5kIGV2ZW50IGxpc3RlbmVycyxcclxuICogYW5kIHJlcG9wdWxhdGluZyB3aXRoIGN1cnJlbnQgZ2FtZSBzdGF0ZS5cclxuICovXHJcbmZ1bmN0aW9uIHVwZGF0ZUJvYXJkRE9NKCkge1xyXG4gIGNsZWFySGlnaGxpZ2h0cygpO1xyXG4gIC8vIGl0ZXJhdGUgdGhyb3VnaCB0aGUgYm9hcmRcclxuICByb3dzLmZvckVhY2goKHJvdykgPT4ge1xyXG4gICAgcm93LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY29sXCIpLmZvckVhY2goKGNvbCkgPT4ge1xyXG4gICAgICAvLyByZW1vdmUgYWxsIGV4aXN0aW5nIHBpZWNlcyBhbmQgZXZlbnQgbGlzdGVuZXJzXHJcbiAgICAgIGlmIChjb2wuZmlyc3RDaGlsZCkge1xyXG4gICAgICAgIGNvbnN0IHBpZWNlRGl2ID0gY29sLmZpcnN0Q2hpbGQgYXMgSFRNTERpdkVsZW1lbnQ7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmdMaXN0ZW5lciA9IHBpZWNlRXZlbnRMaXN0ZW5lcnMuZ2V0KHBpZWNlRGl2KTtcclxuICAgICAgICBpZiAoZXhpc3RpbmdMaXN0ZW5lcikge1xyXG4gICAgICAgICAgcGllY2VEaXYucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV4aXN0aW5nTGlzdGVuZXIpO1xyXG4gICAgICAgICAgcGllY2VFdmVudExpc3RlbmVycy5kZWxldGUocGllY2VEaXYpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb2wucmVtb3ZlQ2hpbGQoY29sLmZpcnN0Q2hpbGQpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9KTtcclxuICAvLyBwb3B1bGF0ZSB0aGUgYm9hcmQgd2l0aCB0aGUgcGllY2VzIGFzIHdlbGwgYXMgdGhlaXIgZXZlbnQgbGlzdGVuZXJzXHJcbiAgcG9wdWxhdGVCb2FyZCgpO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJTdGF0ZSIsIlBpZWNlQ29sb3IiLCJQbGF5ZXIiLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJjb2xvciIsInRoaXMiLCJzY29yZSIsImNhcHR1cmVkUGllY2VzIiwibnVtT2ZQaWVjZXMiLCJudW1PZktpbmdzIiwiY2FwdHVyZXNBdmFpbGFibGUiLCJ1cGRhdGVDYXB0dXJlZFBpZWNlcyIsImNvdW50IiwidXBkYXRlU2NvcmUiLCJkZWVwQ29weVBsYXllciIsImNvcGllZFBsYXllciIsIkNoZWNrZXJzUGllY2UiLCJpc0tpbmciLCJjYXB0dXJlU3RhdHVzIiwibWFrZUtpbmciLCJjYXB0dXJlQ2hlY2siLCJkZWVwQ29weVBpZWNlIiwiTW92ZXMiLCJzdGFydFJvdyIsInN0YXJ0Q29sIiwiZW5kUm93IiwiZW5kQ29sIiwiZXF1YWxzIiwiY2hlY2tNb3ZlIiwiQ2hlY2tlcnNCb2FyZCIsImJvYXJkIiwiaW5pdGlhbGl6ZUJvYXJkIiwicm93IiwiY29sIiwiQmxhY2siLCJSZWQiLCJnZXRQaWVjZSIsIkNoZWNrZXJzR2FtZSIsInBsYXllck9uZSIsInBsYXllclR3byIsImZvcmNlZEp1bXBzIiwicGxheWVycyIsImN1cnJlbnRTdGF0ZSIsImluUHJvZ3Jlc3MiLCJjdXJyZW50UGxheWVyIiwid2lubmVyIiwibnVtT2ZUdXJucyIsInBsYXllck9uZU1vdmVzIiwicGxheWVyVHdvTW92ZXMiLCJjaGFpbmluZ1JvdyIsImNoYWluaW5nQ29sIiwiY2hhbmdlVHVybiIsImNhcHR1cmVzUG9zc2libGUiLCJ2YWxpZGF0ZU1vdmUiLCJkZXN0aW5hdGlvblNxdWFyZSIsInBpZWNlIiwidmFsaWRhdGVCbGFjayIsInZhbGlkYXRlUmVkIiwiTWF0aCIsImFicyIsImNhbkNhcHR1cmUiLCJwb3NzaWJsZU1vdmVzIiwibW92ZXMiLCJkaXJlY3Rpb24iLCJwb3RlbnRpYWxNb3Zlc0FyciIsIm1vdmUiLCJwdXNoIiwiZmlsdGVyIiwibWlkZGxlUm93IiwibWlkZGxlQ29sIiwibWlkZGxlUGllY2UiLCJjdXJyZW50UGllY2UiLCJtb3ZlUGllY2UiLCJjYXB0dXJlZEFscmVhZHkiLCJmbG9vciIsImVuZW15UGllY2UiLCJoYW5kbGVQaWVjZUNhcHR1cmUiLCJwcm9tb3RlVG9LaW5nIiwibmV4dENhcHR1cmVzIiwiY2hhaW5DYXB0dXJlcyIsImxlbmd0aCIsImNvbnNvbGUiLCJsb2ciLCJtYXAiLCJmbGFnIiwic29tZSIsImlzVnVsbmVyYWJsZSIsImRpcmVjdGlvbnMiLCJkciIsImRjIiwib3Bwb25lbnRSb3ciLCJvcHBvbmVudENvbCIsImxhbmRpbmdSb3ciLCJsYW5kaW5nQ29sIiwiaXNWYWxpZFBvc2l0aW9uIiwib3Bwb25lbnRQaWVjZSIsImxhbmRpbmdTcG90Iiwibm9QaWVjZXNMZWZ0IiwicGxheWVyIiwibm9WYWxpZE1vdmVzIiwidmFsaWRNb3ZlcyIsImNoZWNrRW5kT2ZHYW1lIiwiZ2FtZUZpbmlzaGVkIiwic2V0QUkiLCJhaVBsYXllciIsInNpbXVsYXRlTW92ZSIsIndhc1Byb21vdGVkIiwiY3VycmVudFJvdyIsImN1cnJlbnRDb2wiLCJtb3ZlUm93IiwibW92ZUNvbCIsImNhbkNvbnRpbnVlQ2FwdHVyZSIsImNhcHR1cmVkUGllY2UiLCJtb3ZlQUkiLCJ1bmRvU2ltdWxhdGlvbiIsImZpbmFsUm93IiwiZmluYWxDb2wiLCJmb3JFYWNoIiwiZGVlcENvcHlHYW1lIiwiY29waWVkR2FtZSIsIkNoZWNrZXJzQUkiLCJnYW1lIiwiZGVwdGgiLCJzdXBlciIsIm9wZW5pbmdzIiwib3BlbmluZ1NldCIsImN1cnJlbnRPcGVuaW5nIiwiaGV1cmlzdGljIiwiYWlLaW5nQ291bnQiLCJwbGF5ZXJLaW5nQ291bnQiLCJjb3VudE9wcG9uZW50Q2FwdHVyZXNQb3NzaWJsZSIsImJhY2t3YXJkUm93IiwibGVmdFByb3RlY3Rpb25QaWVjZSIsInJpZ2h0UHJvdGVjdGlvblBpZWNlIiwiY2FwdHVyZUNvdW50IiwiTWFwIiwic2V0IiwiaWRlbnRpZnlPcGVuaW5nIiwiZm91bmRPcGVuaW5nIiwibWF4IiwiQXJyYXkiLCJmcm9tIiwidmFsdWVzIiwibyIsImV2ZXJ5IiwiaW5kZXgiLCJtaW5pbWF4IiwiYWxwaGEiLCJiZXRhIiwibWF4aW1pemluZ1BsYXllciIsImJlc3RTY29yZSIsIkluZmluaXR5IiwiYmVzdE1vdmUiLCJnYW1lQ29weSIsImV2YWx1YXRlZFNjb3JlIiwibWluIiwibWFrZU1vdmUiLCJnZXRPcGVuaW5nTW92ZSIsInBsYXlNaW5pbWF4TW92ZSIsInNlcXVlbmNlIiwiZ2V0IiwicGllY2VFdmVudExpc3RlbmVycyIsInN0YXJ0TG9jYWxHYW1lQnRuIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsInN0YXJ0TG9jYWxHYW1lIiwic3RhcnRBSUdhbWVCdG4iLCJlbmZvcmNlZEp1bXBDaGVjayIsInN0YXJ0QUlHYW1lIiwiY2hlY2tCb3giLCJldmVudCIsInRhcmdldCIsImNoZWNrZWQiLCJyZXN0YXJ0TG9jYWxHYW1lQnV0dG9uIiwiZ2V0RWxlbWVudEJ5SWQiLCJyZXN0YXJ0QUlHYW1lQnV0dG9uIiwiZW5kT2ZHYW1lU2VjdGlvbiIsIndpbm5lckFubm91bmNlbWVudCIsInBsYXllck9uZUZpbmFsTmFtZSIsInBsYXllck9uZUZpbmFsU2NvcmUiLCJwbGF5ZXJPbmVGaW5hbENhcHR1cmVkIiwicGxheWVyVHdvRmluYWxOYW1lIiwicGxheWVyVHdvRmluYWxTY29yZSIsInBsYXllclR3b0ZpbmFsQ2FwdHVyZWQiLCJwbGF5ZXJPbmVOYW1lIiwicGxheWVyT25lU2NvcmUiLCJwbGF5ZXJPbmVDYXB0dXJlZCIsInBsYXllck9uZVR1cm4iLCJwbGF5ZXJUd29OYW1lIiwicGxheWVyVHdvU2NvcmUiLCJwbGF5ZXJUd29DYXB0dXJlZCIsInBsYXllclR3b1R1cm4iLCJyb3dzIiwicXVlcnlTZWxlY3RvckFsbCIsInZhbHVlIiwidXBkYXRlU2NvcmVDYXJkIiwic3R5bGUiLCJkaXNwbGF5IiwicG9wdWxhdGVCb2FyZCIsImFpIiwicm93SW5kZXgiLCJjb2xJbmRleCIsInBpZWNlRGl2IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImFwcGVuZENoaWxkIiwic2VsZWN0UGllY2UiLCJiaW5kIiwiY2xlYXJIaWdobGlnaHRzIiwiaGlnaGxpZ2h0ZWRFbGVtZW50IiwiaGlnaGxpZ2h0ZWQiLCJyZW1vdmUiLCJtb3ZlTGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGVsZXRlIiwicCIsInRvZ2dsZSIsInRhcmdldENlbGwiLCJleGlzdGluZ0xpc3RlbmVyIiwidXBkYXRlQm9hcmRET00iLCJwaWVjZUF0RW5kIiwiZXhlY3V0ZU1vdmUiLCJ0ZXh0Q29udGVudCIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCJdLCJzb3VyY2VSb290IjoiIn0=